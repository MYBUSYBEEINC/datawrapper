!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).publish=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){}function o(e,t){for(var n in t)e[n]=t[n];return e}function r(e,t){for(var n in t)e[n]=1;return e}function a(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n)}function c(e){e.parentNode.removeChild(e)}function u(e,t){for(;e.nextSibling;)t.appendChild(e.nextSibling)}function p(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(){return document.createDocumentFragment()}function h(e){return document.createElement(e)}function f(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function b(e){return document.createTextNode(e)}function m(){return document.createComment("")}function v(e,t,n,i){e.addEventListener(t,n,i)}function g(e,t,n,i){e.removeEventListener(t,n,i)}function _(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function w(e,t){e.data=""+t}function L(e,t,n){e.style.setProperty(t,n)}function U(e,t,n){e.classList[n?"add":"remove"](t)}function T(){return Object.create(null)}function R(e){e._lock=!0,x(e._beforecreate),x(e._oncreate),x(e._aftercreate),e._lock=!1}function N(e,t){e._handlers=T(),e._slots=T(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function x(e){for(;e&&e.length;)e.shift()()}function S(){this.store._remove(this)}var C={destroy:function(e){this.destroy=s,this.fire("destroy"),this.set=s,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var i=0;i<n.length;i+=1){var s=n[i];if(!s.__calling)try{s.__calling=!0,s.call(this,t)}finally{s.__calling=!1}}},on:function(e,t){var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},set:function(e){this._set(o({},e)),this.root._lock||R(this.root)},_recompute:s,_set:function(e){var t=this._state,n={},i=!1;for(var s in e=o(this._staged,e),this._staged={},e)this._differs(e[s],t[s])&&(n[s]=i=!0);i&&(this._state=o(o({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))},_stage:function(e){o(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:function(t,n){return t!=t?n==n:t!==n||t&&"object"===e(t)||"function"==typeof t}},H={};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(H[e]=window.__dw.vis.meta.locale||{}):H[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function O(e){var t=arguments,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(e=e.trim(),H[n]||k(n),!H[n][e])return"MISSING:"+e;var i=H[n][e];return"string"==typeof i&&arguments.length>2&&(i=i.replace(/\$(\d)/g,(function(e,n){return n=2+Number(n),void 0===t[n]?e:t[n]}))),i}function A(e,t,n,i){window._paq&&window._paq.push(["trackEvent",e,t,n,i])}function E(e){var t,n,i,s,r;N(this,e),this._state=o({icon:"api",size:"1em",color:"inherit",valign:"baseline",class:"",style:"",assetURL:null,spin:!1,timing:"linear",duration:"2s"},e.data),this._recompute({icon:1,assetURL:1},this._state),this._intro=!0,this._fragment=(t=this._state,{c:function(){n=h("span"),i=f("svg"),L(s=f("use"),"fill",t.color),y(s,"xlink:href",t.iconURL),L(i,"height",t.size),L(i,"width",t.size),_(i,"class","svelte-1th5ah8"),n.className=r="svg-icon "+t.class+" svelte-1th5ah8",L(n,"animation-timing-function",t.timing),L(n,"animation-duration",t.duration),L(n,"height",t.size),L(n,"width",t.size),L(n,"vertical-align",t.valign),U(n,"spin",t.spin)},m:function(e,t){l(e,n,t),a(n,i),a(i,s)},p:function(e,t){e.color&&L(s,"fill",t.color),e.iconURL&&y(s,"xlink:href",t.iconURL),e.size&&(L(i,"height",t.size),L(i,"width",t.size)),e.class&&r!==(r="svg-icon "+t.class+" svelte-1th5ah8")&&(n.className=r),e.timing&&L(n,"animation-timing-function",t.timing),e.duration&&L(n,"animation-duration",t.duration),e.size&&(L(n,"height",t.size),L(n,"width",t.size)),e.valign&&L(n,"vertical-align",t.valign),(e.class||e.spin)&&U(n,"spin",t.spin)},d:function(e){e&&c(n)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}o(E.prototype,C),E.prototype._recompute=function(e,t){var n,i,s;(e.icon||e.assetURL)&&this._differs(t.iconURL,t.iconURL=(i=(n=t).icon,s=n.assetURL,"".concat(s||"/lib/icons/symbol/svg/sprite.symbol.svg","#").concat(i)))&&(e.iconURL=!0)};var M='<svg width="18" height="18" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15.035 1.963c-.256 0-.511.1-.707.295l-7.07 7.07a1 1 0 00.707 1.707h4.07v15a2 2 0 002 2h2a2 2 0 002-2v-15h4.07a.999.999 0 00.707-1.707l-7.07-7.07a.999.999 0 00-.707-.295z"/></svg>';function z(e,t){var n,i;function s(e){return"upgrade-info"===e.type?D:j}var o=s(t),r=o(e,t);return{c:function(){n=h("div"),r.c(),n.className=i="alert "+t.class+" svelte-xl52r3",U(n,"alert-success","success"===t.type),U(n,"alert-warning","warning"===t.type),U(n,"alert-error","error"===t.type),U(n,"alert-info","info"===t.type),U(n,"alert-upgrade-info","upgrade-info"===t.type)},m:function(e,t){l(e,n,t),r.m(n,null)},p:function(t,a){o===(o=s(a))&&r?r.p(t,a):(r.d(1),(r=o(e,a)).c(),r.m(n,null)),t.class&&i!==(i="alert "+a.class+" svelte-xl52r3")&&(n.className=i),(t.class||t.type)&&(U(n,"alert-success","success"===a.type),U(n,"alert-warning","warning"===a.type),U(n,"alert-error","error"===a.type),U(n,"alert-info","info"===a.type),U(n,"alert-upgrade-info","upgrade-info"===a.type))},d:function(e){e&&c(n),r.d()}}}function j(e,t){var n,i,s,o,r=e._slotted.default,a=t.closeable&&I(e);return{c:function(){a&&a.c(),n=b("\n    "),r||(o=b("content"))},m:function(e,t){a&&a.m(e,t),l(e,n,t),r?(l(e,i||(i=m()),t),l(e,r,t),l(e,s||(s=m()),t)):l(e,o,t)},p:function(t,i){i.closeable?a||((a=I(e)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function(e){a&&a.d(e),e?(c(n),r||c(o)):(!function(e,t,n){for(;e.nextSibling&&e.nextSibling!==t;)n.appendChild(e.parentNode.removeChild(e.nextSibling))}(i,s,r),c(i),c(s))}}}function D(e,t){var n,i,o,r,u,p,d,f,m=O("upgrade-available"),v=O("upgrade-info");return{c:function(){n=h("div"),i=h("span"),o=b("\n    "),r=h("div"),u=h("span"),p=b(m),d=b(" "),f=h("noscript"),i.className="upgrade-icon svelte-xl52r3",n.className="icon",u.className="title svelte-xl52r3"},m:function(e,t){l(e,n,t),a(n,i),i.innerHTML=M,l(e,o,t),l(e,r,t),a(r,u),a(u,p),a(r,d),a(r,f),f.insertAdjacentHTML("afterend",v)},p:s,d:function(e){e&&(c(n),c(o),c(r))}}}function I(e,t){var n;function i(t){e.close()}return{c:function(){(n=h("button")).textContent="Ã—",v(n,"click",i),n.type="button",_(n,"aria-label","close"),n.className="close"},m:function(e,t){l(e,n,t)},d:function(e){e&&c(n),g(n,"click",i)}}}function P(e){var t,n,i,s;N(this,e),this._state=o({visible:!1,type:"",closeable:!0,class:"",closeFunc:!1},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(t=this,n=this._state,s=n.visible&&z(t,n),{c:function(){s&&s.c(),i=m()},m:function(e,t){s&&s.m(e,t),l(e,i,t)},p:function(e,n){n.visible?s?s.p(e,n):((s=z(t,n)).c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d:function(e){s&&s.d(e),e&&c(i)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}o(P.prototype,C),o(P.prototype,{close:function(){var e=this.get().closeFunc;e?e():(this.set({visible:!1}),this.fire("close"))}});var W={publish:function(){A("Chart Editor","publish"),this.fire("publish")},unpublish:function(){A("Chart Editor","unpublish"),this.fire("unpublish")}};function F(e,t,n){var i=Object.create(e);return i.step=t[n],i.i=n,i}function q(e,t){var n,i,s=O("publish / published"),o={assetURL:t.assetURL,icon:"cloud-check",color:"#000000",size:"30px"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n    "),(i=h("div")).className="message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function V(e,t){var n,i,s=O("publish / publish-success"),o={assetURL:t.assetURL,icon:"cloud-check",color:"#000000",size:"30px"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n    "),(i=h("div")).className="message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function B(e,t){var n,i,s=O("publish / republish"),o={assetURL:t.assetURL,icon:"cloud-sync",color:"#FFB800",size:"30px"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n    "),(i=h("div")).className="message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function G(e,t){var n,i,s=O("publish / progress / publishing"),o={assetURL:t.assetURL,icon:"cloud-sync",color:"#858585",size:"30px"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n    "),(i=h("div")).className="message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function J(e,t){var n,i,s=O("publish / publish-btn-intro"),o={assetURL:t.assetURL,icon:"cloud-dotted",color:"#858585",size:"30px",class:"pt-2"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n    "),(i=h("div")).className="message pt-2 svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function X(e,t){var n,i,s=O("publish / progress / unpublished"),o={assetURL:t.assetURL,icon:"cloud-dotted",color:"#858585",size:"30px"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n    "),(i=h("div")).className="message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function Z(e,t){var n,i,s=O("publish / progress / unpublishing"),o={assetURL:t.assetURL,icon:"cloud-sync",color:"#858585",size:"30px"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n    "),(i=h("div")).className="message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function K(e,t){var n;function i(e){return e.publishing?te:ee}var s=i(t),o=s(e,t);return{c:function(){n=h("span"),o.c(),n.className="button-publish svelte-di7o7w",U(n,"is-publishing",t.publishing)},m:function(e,t){l(e,n,t),o.m(n,null)},p:function(t,r){s===(s=i(r))&&o?o.p(t,r):(o.d(1),(o=s(e,r)).c(),o.m(n,null)),t.publishing&&U(n,"is-publishing",r.publishing)},d:function(e){e&&c(n),o.d()}}}function Q(e,t){var n;function i(e){return e.publishing?ie:ne}var s=i(t),o=s(e,t);return{c:function(){n=h("span"),o.c(),n.className="button-republish"},m:function(e,t){l(e,n,t),o.m(n,null)},p:function(t,r){s===(s=i(r))&&o?o.p(t,r):(o.d(1),(o=s(e,r)).c(),o.m(n,null))},d:function(e){e&&c(n),o.d()}}}function Y(e,t){var n,i,o=O("publish / unpublishing-btn");return{c:function(){n=h("span"),i=b(o),n.className="title"},m:function(e,t){l(e,n,t),a(n,i)},p:s,d:function(e){e&&c(n)}}}function ee(e,t){var n,i,s,o=O("publish / publish-btn"),r={assetURL:t.assetURL,icon:"cloud-upload",size:"30px",color:"#ffffff",class:"cloud"},u=new E({root:e.root,store:e.store,data:r});return{c:function(){u._fragment.c(),n=b("\n                "),i=h("span"),s=b(o)},m:function(e,t){u._mount(e,t),l(e,n,t),l(e,i,t),a(i,s)},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),u._set(n)},d:function(e){u.destroy(e),e&&(c(n),c(i))}}}function te(e,t){var n,i,s,o=O("publish / publishing-btn"),r={assetURL:t.assetURL,icon:"refresh",spin:!0,size:"28px",color:"#ffffff",valign:"middle",class:"mr-1"},u=new E({root:e.root,store:e.store,data:r});return{c:function(){u._fragment.c(),n=b("\n                "),i=h("span"),s=b(o)},m:function(e,t){u._mount(e,t),l(e,n,t),l(e,i,t),a(i,s)},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),u._set(n)},d:function(e){u.destroy(e),e&&(c(n),c(i))}}}function ne(e,t){var n,i,s,o=O("publish / republish-btn"),r={assetURL:t.assetURL,icon:"refresh",size:"28px",color:"#ffffff",valign:"middle",class:"mr-1"},u=new E({root:e.root,store:e.store,data:r});return{c:function(){u._fragment.c(),n=b("\n                "),i=h("span"),s=b(o)},m:function(e,t){u._mount(e,t),l(e,n,t),l(e,i,t),a(i,s)},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),u._set(n)},d:function(e){u.destroy(e),e&&(c(n),c(i))}}}function ie(e,t){var n,i,s,o=O("publish / publishing-btn"),r={assetURL:t.assetURL,icon:"refresh",spin:!0,size:"28px",color:"#ffffff",valign:"middle",class:"mr-1"},u=new E({root:e.root,store:e.store,data:r});return{c:function(){u._fragment.c(),n=b("\n                "),i=h("span"),s=b(o)},m:function(e,t){u._mount(e,t),l(e,n,t),l(e,i,t),a(i,s)},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),u._set(n)},d:function(e){u.destroy(e),e&&(c(n),c(i))}}}function se(e,t){for(var n,i=t.progress,s=[],o=0;o<i.length;o+=1)s[o]=ae(e,F(t,i,o));return{c:function(){n=h("ul");for(var e=0;e<s.length;e+=1)s[e].c();n.className="publish-progress unstyled svelte-di7o7w"},m:function(e,t){l(e,n,t);for(var i=0;i<s.length;i+=1)s[i].m(n,null)},p:function(t,o){if(t.progress||t.assetURL){i=o.progress;for(var r=0;r<i.length;r+=1){var a=F(o,i,r);s[r]?s[r].p(t,a):(s[r]=ae(e,a),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},d:function(e){e&&c(n),p(s,e)}}}function oe(e,t){var n={assetURL:t.assetURL,icon:"loading-spinner",size:"18px",valign:"middle",class:"mr-2",spin:!0,timing:"steps(12)",duration:"1.5s"},i=new E({root:e.root,store:e.store,data:n});return{c:function(){i._fragment.c()},m:function(e,t){i._mount(e,t)},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),i._set(n)},d:function(e){i.destroy(e)}}}function re(e,t){var n={assetURL:t.assetURL,icon:"check-circle",size:"18px",color:"#468847",valign:"middle",class:"mr-2"},i=new E({root:e.root,store:e.store,data:n});return{c:function(){i._fragment.c()},m:function(e,t){i._mount(e,t)},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),i._set(n)},d:function(e){i.destroy(e)}}}function ae(e,t){var n,i,s,o=O("publish / status / "+t.step);function r(e){return e.i<e.progress.length-1?re:oe}var u=r(t),p=u(e,t);return{c:function(){n=h("li"),p.c(),i=b(" "),s=h("noscript"),n.className="svelte-di7o7w"},m:function(e,t){l(e,n,t),p.m(n,null),a(n,i),a(n,s),s.insertAdjacentHTML("afterend",o)},p:function(t,a){u===(u=r(a))&&p?p.p(t,a):(p.d(1),(p=u(e,a)).c(),p.m(n,i)),t.progress&&o!==(o=O("publish / status / "+a.step))&&(!function(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}(s),s.insertAdjacentHTML("afterend",o))},d:function(e){e&&c(n),p.d()}}}function le(e,t){var n,i,s,o,r,u=O("publish / unpublish-intro"),p=O("publish / unpublish-btn"),d={assetURL:t.assetURL,icon:"undo",size:"1.2em",valign:"-0.2em"},f=new E({root:e.root,store:e.store,data:d});function m(t){e.unpublish()}return{c:function(){n=h("p"),i=h("noscript"),s=b("\n    "),o=h("button"),f._fragment.c(),r=h("noscript"),v(o,"click",m),o.className="plain-link unpublish-button svelte-di7o7w",n.className="unpublish mt-2 mb-2 svelte-di7o7w"},m:function(e,t){l(e,n,t),a(n,i),i.insertAdjacentHTML("beforebegin",u),a(n,s),a(n,o),f._mount(o,null),a(o,r),r.insertAdjacentHTML("afterend",p)},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),f._set(n)},d:function(e){e&&c(n),f.destroy(),g(o,"click",m)}}}function ce(e,t){var n,i=new P({root:e.root,store:e.store,slots:{default:d()},data:{type:"error",visible:"true",class:"mt-4 mb-2"}});return{c:function(){n=b(t.publishError),i._fragment.c()},m:function(e,t){a(i._slotted.default,n),i._mount(e,t)},p:function(e,t){e.publishError&&w(n,t.publishError)},d:function(e){i.destroy(e)}}}function ue(e,t){var n,i,s,o=O("publish / publish-info-1"),r=O("publish / publish-info-2");return{c:function(){n=h("p"),i=b("\n"),s=h("p"),n.className="publish-info pt-3 svelte-di7o7w",s.className="publish-info svelte-di7o7w"},m:function(e,t){l(e,n,t),n.innerHTML=o,l(e,i,t),l(e,s,t),s.innerHTML=r},d:function(e){e&&(c(n),c(i),c(s))}}}function pe(e,t){var n;function i(e){return e.redirectDisabled?he:de}var s=i(t),o=s(e,t);return{c:function(){n=h("div"),o.c(),n.className="embed-alert svelte-di7o7w"},m:function(e,t){l(e,n,t),o.m(n,null)},p:function(t,r){s===(s=i(r))&&o?o.p(t,r):(o.d(1),(o=s(e,r)).c(),o.m(n,null))},d:function(e){e&&c(n),o.d()}}}function de(e,t){var n,i,s=O("publish / update-embed"),o={assetURL:t.assetURL,icon:"info-circle",size:"20px",color:"#3a87ad"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n        "),(i=h("p")).className="embed-message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function he(e,t){var n,i,s=O("publish / replace-embed"),o={assetURL:t.assetURL,icon:"warning",size:"20px",color:"#FFB800"},r=new E({root:e.root,store:e.store,data:o});return{c:function(){r._fragment.c(),n=b("\n        "),(i=h("p")).className="embed-message svelte-di7o7w"},m:function(e,t){r._mount(e,t),l(e,n,t),l(e,i,t),i.innerHTML=s},p:function(e,t){var n={};e.assetURL&&(n.assetURL=t.assetURL),r._set(n)},d:function(e){r.destroy(e),e&&(c(n),c(i))}}}function fe(e){N(this,e),this._state=o({published:!1,publishing:!1,publishStarted:0,now:0,publishError:!1,publishSuccess:!1,needsRepublish:!1,progress:[],redirectDisabled:!1,publicVersion:0,assetURL:null},e.data),this._recompute({publishStarted:1,now:1,progress:1,publishing:1},this._state),this._intro=!0,this._fragment=function(e,t){var n,i,s,o,r,u,p,f,_,y,w;function L(e){return e.unpublishing?Z:e.unpublished?X:e.published||e.publishing?e.publishing?G:e.needsRepublish&&!e.publishing?B:e.published&&e.publishSuccess&&!e.needsRepublish?V:e.published&&!e.needsRepublish?q:void 0:J}var T=L(t),R=T&&T(e,t);function N(e){return e.unpublishing?Y:e.published?Q:K}var x=N(t),S=x(e,t);function C(t){e.publish()}var H=t.publishing&&t.publishWait>3e3&&se(e,t),k=t.published&&!t.publishing&&!t.unpublishing&&le(e,t),O=t.publishError&&ce(e,t),A=!t.published&&!t.unpublished&&ue(),E=t.published&&t.publishSuccess&&t.publicVersion>1&&pe(e,t),M={type:t.redirectDisabled?"warning":"info",visible:t.published&&t.publishSuccess&&t.publicVersion>1,class:"mt-4 mb-2"},z=new P({root:e.root,store:e.store,slots:{default:d()},data:M});return{c:function(){n=h("div"),R&&R.c(),i=b("\n\n    "),s=h("div"),o=h("button"),S.c(),u=b("\n\n    \n    "),H&&H.c(),p=b("\n\n\n"),k&&k.c(),f=b("\n\n\n"),O&&O.c(),_=b("\n\n\n"),A&&A.c(),y=b("\n\n\n"),E&&E.c(),w=m(),z._fragment.c(),v(o,"click",C),o.disabled=r=t.publishing||t.unpublishing,o.className="button-wrapper svelte-di7o7w",U(o,"is-unpublishing",t.unpublishing),s.className="action svelte-di7o7w",n.className="publish-status svelte-di7o7w",U(n,"is-busy",t.publishing||t.unpublishing),U(n,"is-published",t.published&&!t.unpublishing&&!t.publishing&&!t.needsRepublish&&!t.publishSuccess),U(n,"alert",t.needsRepublish&&!t.publishing),U(n,"alert-success",t.publishSuccess)},m:function(e,t){l(e,n,t),R&&R.m(n,null),a(n,i),a(n,s),a(s,o),S.m(o,null),a(n,u),H&&H.m(n,null),l(e,p,t),k&&k.m(e,t),l(e,f,t),O&&O.m(e,t),l(e,_,t),A&&A.m(e,t),l(e,y,t),E&&E.m(z._slotted.default,null),a(z._slotted.default,w),z._mount(e,t)},p:function(t,s){T===(T=L(s))&&R?R.p(t,s):(R&&R.d(1),(R=T&&T(e,s))&&R.c(),R&&R.m(n,i)),x===(x=N(s))&&S?S.p(t,s):(S.d(1),(S=x(e,s)).c(),S.m(o,null)),(t.publishing||t.unpublishing)&&r!==(r=s.publishing||s.unpublishing)&&(o.disabled=r),t.unpublishing&&U(o,"is-unpublishing",s.unpublishing),s.publishing&&s.publishWait>3e3?H?H.p(t,s):((H=se(e,s)).c(),H.m(n,null)):H&&(H.d(1),H=null),(t.publishing||t.unpublishing)&&U(n,"is-busy",s.publishing||s.unpublishing),(t.published||t.unpublishing||t.publishing||t.needsRepublish||t.publishSuccess)&&U(n,"is-published",s.published&&!s.unpublishing&&!s.publishing&&!s.needsRepublish&&!s.publishSuccess),(t.needsRepublish||t.publishing)&&U(n,"alert",s.needsRepublish&&!s.publishing),t.publishSuccess&&U(n,"alert-success",s.publishSuccess),!s.published||s.publishing||s.unpublishing?k&&(k.d(1),k=null):k?k.p(t,s):((k=le(e,s)).c(),k.m(f.parentNode,f)),s.publishError?O?O.p(t,s):((O=ce(e,s)).c(),O.m(_.parentNode,_)):O&&(O.d(1),O=null),s.published||s.unpublished?A&&(A.d(1),A=null):A||((A=ue()).c(),A.m(y.parentNode,y)),s.published&&s.publishSuccess&&s.publicVersion>1?E?E.p(t,s):((E=pe(e,s)).c(),E.m(w.parentNode,w)):E&&(E.d(1),E=null);var a={};t.redirectDisabled&&(a.type=s.redirectDisabled?"warning":"info"),(t.published||t.publishSuccess||t.publicVersion)&&(a.visible=s.published&&s.publishSuccess&&s.publicVersion>1),z._set(a)},d:function(e){e&&c(n),R&&R.d(),S.d(),g(o,"click",C),H&&H.d(),e&&c(p),k&&k.d(e),e&&c(f),O&&O.d(e),e&&c(_),A&&A.d(e),e&&c(y),E&&E.d(),z.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),R(this))}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _e(e,t,n){return(_e=ge()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var s=new(Function.bind.apply(e,i));return n&&be(s,n.prototype),s}).apply(null,arguments)}function ye(e){var t="function"==typeof Map?new Map:void 0;return(ye=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return _e(e,arguments,ve(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),be(i,e)})(e)}function we(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n,i,s={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}o(fe.prototype,C),o(fe.prototype,W),fe.prototype._recompute=function(e,t){var n,i,s,o,r,a;(e.publishStarted||e.now)&&this._differs(t.publishWait,t.publishWait=(i=(n=t).publishStarted,s=n.now,i>0?s-i:0))&&(e.publishWait=!0),(e.progress||e.publishing)&&this._differs(t.publishSuccess,t.publishSuccess=(r=(o=t).progress,a=o.publishing,r&&r.includes("done")&&!a))&&(e.publishSuccess=!0)};var Le={exports:{}};
/*!
   * JavaScript Cookie v2.2.1
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   */!function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function s(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},s.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var r=JSON.stringify(n);/^[\{\[]/.test(r)&&(n=r)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,!0!==o[l]&&(a+="="+o[l].split(";")[0]));return document.cookie=t+"="+n+a}}function r(e,n){if("undefined"!=typeof document){for(var s={},o=document.cookie?document.cookie.split("; "):[],r=0;r<o.length;r++){var a=o[r].split("="),l=a.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(a[0]);if(l=(i.read||i)(l,c)||t(l),n)try{l=JSON.parse(l)}catch(e){}if(s[c]=l,e===c)break}catch(e){}}return e?s[e]:s}}return s.set=o,s.get=function(e){return r(e,!1)},s.getJSON=function(e){return r(e,!0)},s.remove=function(t,n){o(t,"",e(n,{expires:-1}))},s.defaults={},s.withConverter=n,s}((function(){}))},e.exports=n()}(Le);var Ue=Le.exports;function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ve(e);if(t){var s=ve(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return me(this,n)}}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=new Set(["get","head","options","trace"]);function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.fetch)try{t.fetch=window.fetch}catch(e){throw new Error("Neither options.fetch nor window.fetch is defined.")}if(!t.baseUrl)try{t.baseUrl="//".concat(window.dw.backend.__api_domain)}catch(e){throw new Error("Neither options.baseUrl nor window.dw is defined.")}var n,i=Ne(Ne({payload:null,raw:!1,method:"GET",mode:"cors",credentials:"include"},t),{},{headers:Ne({"Content-Type":"application/json"},t.headers)}),s=i.payload,o=i.baseUrl,r=i.fetch,a=i.raw,l=we(i,["payload","baseUrl","fetch","raw"]),c="".concat(o.replace(/\/$/,""),"/").concat(e.replace(/^\//,""));if(s&&(l.body=JSON.stringify(s)),xe.has(l.method.toLowerCase()))n=r(c,l);else{var u=Ue.get("crumb");u?(l.headers["X-CSRF-Token"]=u,n=r(c,l)):n=Se("/v3/me",{fetch:r,baseUrl:o}).then((function(){var e=Ue.get("crumb");e&&(l.headers["X-CSRF-Token"]=e)})).catch((function(){})).then((function(){return r(c,l)}))}return n.then((function(e){if(a)return e;if(!e.ok)throw new He(e);if(204===e.status||!e.headers.get("content-type"))return e;var t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()}))}function Ce(e){return function(t,n){if(n&&n.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(e.toLowerCase(),"()"));return Se(t,Ne(Ne({},n),{},{method:e}))}}Se.get=Ce("GET"),Se.patch=Ce("PATCH"),Se.put=Ce("PUT"),Se.post=Ce("POST"),Se.head=Ce("HEAD"),Se.delete=Ce("DELETE");var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(n,e);var t=Te(n);function n(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this)).name="HttpReqError",i.status=e.status,i.statusText=e.statusText,i.message="[".concat(e.status,"] ").concat(e.statusText),i.response=e,i}return n}(ye(Error));function ke(e){N(this,e),this._state=o({},e.data),this._intro=!0,this._fragment=function(e,t){var n,i,s,o,r,u,p,d,f,m,y,w,L,U,T,R,N,x=O("publish / unpublish-confirmation / title"),S=O("publish / unpublish-confirmation / explanation"),C=O("publish / unpublish-confirmation / back"),H=O("publish / unpublish-confirmation / unpublish"),k=new E({root:e.root,store:e.store,data:{icon:"close",size:"20px"}}),A=new E({root:e.root,store:e.store,data:{icon:"undo",class:"mr-1",size:"1.3em",valign:"-0.3em"}});function M(t){e.fire("confirm")}function z(t){t.stopPropagation(),e.fire("keyup",t)}return{c:function(){n=h("div"),i=h("div"),s=h("button"),k._fragment.c(),o=b("\n        "),r=h("div"),u=h("h1"),p=b(x),d=b("\n            "),f=h("p"),m=b("\n            "),y=h("div"),w=h("button"),L=b(C),U=b("\n                "),T=h("button"),A._fragment.c(),R=b("\n                    "),N=b(H),s.type="button",s.className="close svelte-1rxch9t",s.dataset.dismiss="modal",_(s,"aria-label",O("publish / unpublish-confirmation / close")),u.className="modal-title svelte-1rxch9t",f.className="svelte-1rxch9t",w.className="btn back svelte-1rxch9t",w.dataset.dismiss="modal",v(T,"click",M),T.className="btn btn-danger svelte-1rxch9t",T.dataset.dismiss="modal",y.className="actions pt-4 mt-4 svelte-1rxch9t",r.className="modal-content svelte-1rxch9t",v(i,"keyup",z),i.className="modal-body",n.className="modal hide",n.id=t.id},m:function(e,t){l(e,n,t),a(n,i),a(i,s),k._mount(s,null),a(i,o),a(i,r),a(r,u),a(u,p),a(r,d),a(r,f),f.innerHTML=S,a(r,m),a(r,y),a(y,w),a(w,L),a(y,U),a(y,T),A._mount(T,null),a(T,R),a(T,N)},p:function(e,t){e.id&&(n.id=t.id)},d:function(e){e&&c(n),k.destroy(),A.destroy(),g(T,"click",M),g(i,"keyup",z)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),R(this))}o(ke.prototype,C);var Oe={show:function(){var e=this,t=setTimeout((function(){e.set({visible:!0})}),400);this.set({t:t})},hide:function(){var e=this.get().t;clearTimeout(e),this.set({visible:!1})}};function Ae(e,t){var n,i,s,o,r,p=e._slotted.default,d="help"===t.type&&Ee(),f="upgrade-info"===t.type&&Me();return{c:function(){n=h("div"),d&&d.c(),i=b(" "),f&&f.c(),s=b("\n        "),n.className=r="content "+t.type+" svelte-1qzgns1"},m:function(e,t){l(e,n,t),d&&d.m(n,null),a(n,i),f&&f.m(n,null),a(n,s),p&&(a(n,o||(o=m())),a(n,p))},p:function(e,t){"help"===t.type?d||((d=Ee()).c(),d.m(n,i)):d&&(d.d(1),d=null),"upgrade-info"===t.type?f||((f=Me()).c(),f.m(n,s)):f&&(f.d(1),f=null),e.type&&r!==(r="content "+t.type+" svelte-1qzgns1")&&(n.className=r)},d:function(e){e&&c(n),d&&d.d(),f&&f.d(),p&&u(o,p)}}}function Ee(e,t){var n;return{c:function(){(n=h("i")).className="hat-icon im im-graduation-hat svelte-1qzgns1"},m:function(e,t){l(e,n,t)},d:function(e){e&&c(n)}}}function Me(e,t){var n,i,s=O("upgrade-available");return{c:function(){n=h("div"),i=b(s),n.className="content-header svelte-1qzgns1"},m:function(e,t){l(e,n,t),a(n,i)},d:function(e){e&&c(n)}}}function ze(e){N(this,e),this.refs={},this._state=o({visible:!1,class:"",type:"help"},e.data),this._recompute({type:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var n,i,s,o,r,u=t.visible&&Ae(e,t);function p(t){e.show()}function d(t){e.hide()}return{c:function(){n=h("div"),i=h("span"),o=b("\n    "),u&&u.c(),i.className=s="help-icon "+t.type+" svelte-1qzgns1",U(i,"visible",t.visible),v(n,"mouseenter",p),v(n,"mouseleave",d),n.className=r="help "+t.class+" "+t.type+" svelte-1qzgns1"},m:function(s,r){l(s,n,r),a(n,i),i.innerHTML=t.helpIcon,a(n,o),u&&u.m(n,null),e.refs.helpDisplay=n},p:function(t,o){t.helpIcon&&(i.innerHTML=o.helpIcon),t.type&&s!==(s="help-icon "+o.type+" svelte-1qzgns1")&&(i.className=s),(t.type||t.visible)&&U(i,"visible",o.visible),o.visible?u?u.p(t,o):((u=Ae(e,o)).c(),u.m(n,null)):u&&(u.d(1),u=null),(t.class||t.type)&&r!==(r="help "+o.class+" "+o.type+" svelte-1qzgns1")&&(n.className=r)},d:function(t){t&&c(n),u&&u.d(),g(n,"mouseenter",p),g(n,"mouseleave",d),e.refs.helpDisplay===n&&(e.refs.helpDisplay=null)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}o(ze.prototype,C),o(ze.prototype,Oe),ze.prototype._recompute=function(e,t){e.type&&this._differs(t.helpIcon,t.helpIcon="upgrade-info"===t.type?M:"?")&&(e.helpIcon=!0)};var je="100px";function De(e,t){var n,i={class:t.helpClass},s=new ze({root:e.root,store:e.store,slots:{default:d()},data:i});return{c:function(){n=h("div"),s._fragment.c()},m:function(e,i){a(s._slotted.default,n),n.innerHTML=t.help,s._mount(e,i)},p:function(e,t){e.help&&(n.innerHTML=t.help);var i={};e.helpClass&&(i.class=t.helpClass),s._set(i)},d:function(e){s.destroy(e)}}}function Ie(e,t){var n,i,s,o=t.labelHelp&&Pe(e,t);return{c:function(){n=h("label"),i=h("noscript"),s=b(" "),o&&o.c(),L(n,"width",t.labelWidth||je),n.className="control-label svelte-1ykzs2h",U(n,"disabled",t.disabled)},m:function(e,r){l(e,n,r),a(n,i),i.insertAdjacentHTML("beforebegin",t.label),a(n,s),o&&o.m(n,null)},p:function(t,s){t.label&&(!function(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}(i),i.insertAdjacentHTML("beforebegin",s.label)),s.labelHelp?o?o.p(t,s):((o=Pe(e,s)).c(),o.m(n,null)):o&&(o.d(1),o=null),t.labelWidth&&L(n,"width",s.labelWidth||je),t.disabled&&U(n,"disabled",s.disabled)},d:function(e){e&&c(n),o&&o.d()}}}function Pe(e,t){var n;return{c:function(){(n=h("p")).className="mini-help mt-1"},m:function(e,i){l(e,n,i),n.innerHTML=t.labelHelp},p:function(e,t){e.labelHelp&&(n.innerHTML=t.labelHelp)},d:function(e){e&&c(n)}}}function We(e,t){var n,i;return{c:function(){L(n=h("p"),"padding-left",t.inline?0:t.labelWidth||je),n.className=i="mt-1 mini-help "+t.type+" svelte-1ykzs2h",U(n,"mini-help-block",!t.inline)},m:function(e,i){l(e,n,i),n.innerHTML=t.miniHelp},p:function(e,t){e.miniHelp&&(n.innerHTML=t.miniHelp),(e.inline||e.labelWidth)&&L(n,"padding-left",t.inline?0:t.labelWidth||je),e.type&&i!==(i="mt-1 mini-help "+t.type+" svelte-1ykzs2h")&&(n.className=i),(e.type||e.inline)&&U(n,"mini-help-block",!t.inline)},d:function(e){e&&c(n)}}}function $e(e){var t,n,i,s,r,u,p,d,f,m,v,g;N(this,e),this._state=o({disabled:!1,help:!1,helpClass:!1,miniHelp:!1,label:!1,labelHelp:!1,inline:!1,labelWidth:!1,type:"default",valign:"baseline"},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(t=this,n=this._state,f=t._slotted.default,m=n.help&&De(t,n),v=n.label&&Ie(t,n),g=n.miniHelp&&We(0,n),{c:function(){m&&m.c(),i=b("\n\n"),s=h("div"),v&&v.c(),r=b("\n    "),u=h("div"),p=b("\n    "),g&&g.c(),u.className="controls svelte-1ykzs2h",L(u,"width","calc(100% - "+(n.labelWidth||je)+" - 32px)"),U(u,"form-inline",n.inline),s.className=d="control-group vis-option-group vis-option-group-"+n.type+" label-"+n.valign+" svelte-1ykzs2h"},m:function(e,t){m&&m.m(e,t),l(e,i,t),l(e,s,t),v&&v.m(s,null),a(s,r),a(s,u),f&&a(u,f),a(s,p),g&&g.m(s,null)},p:function(e,n){n.help?m?m.p(e,n):((m=De(t,n)).c(),m.m(i.parentNode,i)):m&&(m.d(1),m=null),n.label?v?v.p(e,n):((v=Ie(t,n)).c(),v.m(s,r)):v&&(v.d(1),v=null),e.labelWidth&&L(u,"width","calc(100% - "+(n.labelWidth||je)+" - 32px)"),e.inline&&U(u,"form-inline",n.inline),n.miniHelp?g?g.p(e,n):((g=We(0,n)).c(),g.m(s,null)):g&&(g.d(1),g=null),(e.type||e.valign)&&d!==(d="control-group vis-option-group vis-option-group-"+n.type+" label-"+n.valign+" svelte-1ykzs2h")&&(s.className=d)},d:function(e){m&&m.d(e),e&&(c(i),c(s)),v&&v.d(),f&&function(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}(u,f),g&&g.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),R(this))}function Fe(e){var t=e.changed;e.previous&&t.value&&this.set({indeterminate:!1})}function qe(e,t,n){var i=Object.create(e);return i.opt=t[n],i}function Ve(e,t){var n,i=t.opt.help;return{c:function(){(n=h("div")).className="help svelte-b3e9e4"},m:function(e,t){l(e,n,t),n.innerHTML=i},p:function(e,t){e.options&&i!==(i=t.opt.help)&&(n.innerHTML=i)},d:function(e){e&&c(n)}}}function Be(e,t){var n,i,s,o,r,u,p,d,f,m=t.opt.label;function y(){e.set({value:i.__value})}var w=t.opt.help&&Ve(0,t);return{c:function(){n=h("label"),i=h("input"),o=b("\n            "),r=h("span"),u=b("Â "),p=h("span"),d=b("\n            "),w&&w.c(),e._bindingGroups[0].push(i),v(i,"change",y),_(i,"type","radio"),i.__value=s=t.opt.value,i.value=i.__value,i.disabled=t.disabled,i.className="svelte-b3e9e4",r.className="css-ui svelte-b3e9e4",p.className="inner-label svelte-b3e9e4",n.title=f=t.opt.tooltip||"",n.className="svelte-b3e9e4",U(n,"disabled",t.disabled),U(n,"has-help",t.opt.help)},m:function(e,s){l(e,n,s),a(n,i),i.checked=i.__value===t.value,a(n,o),a(n,r),a(n,u),a(n,p),p.innerHTML=m,a(n,d),w&&w.m(n,null)},p:function(e,t){e.value&&(i.checked=i.__value===t.value),e.options&&s!==(s=t.opt.value)&&(i.__value=s),i.value=i.__value,e.disabled&&(i.disabled=t.disabled),e.options&&m!==(m=t.opt.label)&&(p.innerHTML=m),t.opt.help?w?w.p(e,t):((w=Ve(0,t)).c(),w.m(n,null)):w&&(w.d(1),w=null),e.options&&f!==(f=t.opt.tooltip||"")&&(n.title=f),e.disabled&&U(n,"disabled",t.disabled),e.options&&U(n,"has-help",t.opt.help)},d:function(t){t&&c(n),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(i),1),g(i,"change",y),w&&w.d()}}}function Ge(e,t){var n;return{c:function(){(n=h("div")).className="disabled-message svelte-b3e9e4"},m:function(e,i){l(e,n,i),n.innerHTML=t.disabledMessage},p:function(e,t){e.disabledMessage&&(n.innerHTML=t.disabledMessage)},d:function(e){e&&c(n)}}}function Je(e){var t=this;N(this,e),this._state=o({value:null,disabled:!1,disabledMessage:"",indeterminate:!1,label:"",labelWidth:"auto",help:null,miniHelp:null,valign:"top",inline:!0},e.data),this._bindingGroups=[[]],this._intro=!0,this._handlers.state=[Fe],this._slotted=e.slots||{},Fe.call(this,{changed:r({},this._state),current:this._state}),this._fragment=function(e,t){for(var n,i,s,o,r,f=e._slotted.default,v=t.options,g=[],_=0;_<v.length;_+=1)g[_]=Be(e,qe(t,v,_));var y={type:"radio",labelWidth:t.labelWidth,valign:t.valign,label:t.label,disabled:t.disabled,help:t.help,miniHelp:t.miniHelp},w=new $e({root:e.root,store:e.store,slots:{default:d()},data:y}),L=t.disabled&&t.disabledMessage&&Ge(e,t);return{c:function(){n=h("div");for(var e=0;e<g.length;e+=1)g[e].c();i=b("\n    "),w._fragment.c(),o=b("\n\n"),L&&L.c(),r=m(),n.className="svelte-b3e9e4",U(n,"inline",t.inline),U(n,"indeterminate",t.indeterminate)},m:function(e,t){a(w._slotted.default,n);for(var c=0;c<g.length;c+=1)g[c].m(n,null);a(w._slotted.default,i),f&&(a(w._slotted.default,s||(s=m())),a(w._slotted.default,f)),w._mount(e,t),l(e,o,t),L&&L.m(e,t),l(e,r,t)},p:function(t,i){if(t.options||t.disabled||t.value){v=i.options;for(var s=0;s<v.length;s+=1){var o=qe(i,v,s);g[s]?g[s].p(t,o):(g[s]=Be(e,o),g[s].c(),g[s].m(n,null))}for(;s<g.length;s+=1)g[s].d(1);g.length=v.length}t.inline&&U(n,"inline",i.inline),t.indeterminate&&U(n,"indeterminate",i.indeterminate);var a={};t.labelWidth&&(a.labelWidth=i.labelWidth),t.valign&&(a.valign=i.valign),t.label&&(a.label=i.label),t.disabled&&(a.disabled=i.disabled),t.help&&(a.help=i.help),t.miniHelp&&(a.miniHelp=i.miniHelp),w._set(a),i.disabled&&i.disabledMessage?L?L.p(t,i):((L=Ge(e,i)).c(),L.m(r.parentNode,r)):L&&(L.d(1),L=null)},d:function(e){p(g,e),f&&u(s,f),w.destroy(e),e&&c(o),L&&L.d(e),e&&c(r)}}}(this,this._state),this.root._oncreate.push((function(){t.fire("update",{changed:r({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),R(this))}o($e.prototype,C),o(Je.prototype,C);var Xe=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,Ze=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;function Ke(e,t){if(null===e)return null;if(void 0!==e){if((e=String(e)).indexOf("<")<0&&e.indexOf(">")<0)return e;if(e=function(e,t){t=(((void 0!==t?t||"":"<a><span><b><br><br/><i><strong><sup><sub><strike><u><em><tt>")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=e,i=e;for(;;)if(i=(n=i).replace(Ze,"").replace(Xe,(function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})),n===i)return i}(e,t),"undefined"==typeof document)return e;var n=document.createElement("div");n.innerHTML="<span>".concat(e,"</span>");for(var i=n.childNodes[0].querySelectorAll("*"),s=0;s<i.length;s++){"a"===i[s].nodeName.toLowerCase()&&("_self"!==i[s].getAttribute("target")&&i[s].setAttribute("target","_blank"),i[s].setAttribute("rel","nofollow noopener noreferrer"),i[s].getAttribute("href")&&i[s].getAttribute("href").trim().replace(/[^a-zA-Z0-9 -:]/g,"").startsWith("javascript:")&&i[s].setAttribute("href",""));for(var o=[],r=0;r<i[s].attributes.length;r++){var a=i[s].attributes[r];a.specified&&"on"===a.name.substr(0,2)&&o.push(a.name)}o.forEach((function(e){return i[s].removeAttribute(e)}))}return n.childNodes[0].innerHTML}}function Qe(e){var t=e.shareurlType,n=e.id,i=e.publicUrl,s=e.metadata,o=e.pluginShareurls;if("default"===t)return i;var r="";return o.forEach((function(e){e.id===t&&(r=(r=e.url.replace(/%chart_id%/g,n)).replace(/%(.*?)%/g,(function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return e;for(var i=Array.isArray(t)?t:t.split("."),s=e,o=0;o<i.length&&null!=s;o++)s=s[i[o]];return null==s?n:s}({id:n,metadata:s},t)})))})),r}var Ye={copy:function(e){var t=this;this.refs[e].select();try{if(document.execCommand("copy")){var n=this.get().copySuccess;n[e]=!0,this.set({copySuccess:n}),setTimeout((function(){n[e]=!1,t.set({copySuccess:n})}),2e3),A("Chart Editor","".concat(e,"-copy"))}}catch(e){console.error("Could not copy to clipboard.")}}};function et(e){N(this,e),this.refs={},this._state=o({embedTemplates:[],pluginShareurls:[],pending:!1,shareurlType:"default",embedType:"responsive",copySuccess:{}},e.data),this._recompute({shareurlType:1,id:1,publicUrl:1,metadata:1,pluginShareurls:1,embedType:1,embedTemplates:1},this._state),this._intro=!0,this._fragment=function(e,t){var n,i,s,o,r,u,p,d,f,m,y,w,L,T,R,N,x,S,C,H,k,A,M,z,j,D,I,P,W,$,F,q,V,B,G,J,X=O("publish / share-embed"),Z=O("publish / share-url"),K=O("publish / copy-success"),Q={},Y=O("publish / embed"),ee=O("publish / copy-success"),te={},ne=O("publish / embed / explanation"),ie=new E({root:e.root,store:e.store,data:{size:"30px",icon:"link",color:"#333333",class:"pt-5 pr-5"}}),se=new E({root:e.root,store:e.store,data:{size:"18px",icon:"copy-to-clipboard",class:"pt-1"}});function oe(t){e.copy("shareurl")}var re={options:t.shareOptions,label:""};void 0!==t.shareurlType&&(re.value=t.shareurlType,Q.value=!0);var ae=new Je({root:e.root,store:e.store,data:re,_bind:function(t,n){var i={};!Q.value&&t.value&&(i.shareurlType=n.value),e._set(i),Q={}}});e.root._beforecreate.push((function(){ae._bind({value:1},ae.get())}));var le=new E({root:e.root,store:e.store,data:{size:"30px",icon:"source-code",color:"#333333",class:"pt-5 pr-5",valign:"bottom"}});function ce(e){this.select()}var ue=new E({root:e.root,store:e.store,data:{size:"18px",icon:"copy-to-clipboard",class:"pt-1"}});function pe(t){e.copy("embedcode")}var de={options:t.embedOptions,label:""};void 0!==t.embedType&&(de.value=t.embedType,te.value=!0);var he=new Je({root:e.root,store:e.store,data:de,_bind:function(t,n){var i={};!te.value&&t.value&&(i.embedType=n.value),e._set(i),te={}}});return e.root._beforecreate.push((function(){he._bind({value:1},he.get())})),{c:function(){n=h("div"),i=h("h2"),s=b("\n    "),o=h("div"),ie._fragment.c(),r=b("\n        "),u=h("div"),p=h("label"),d=b("\n            "),f=h("div"),m=h("div"),y=h("input"),w=b("\n                    "),L=h("a"),T=b("\n                "),R=h("button"),se._fragment.c(),N=b("\n                "),x=h("span"),S=b(K),C=b("\n            "),ae._fragment.c(),H=b("\n\n    "),k=h("div"),le._fragment.c(),A=b("\n        "),M=h("div"),z=h("label"),j=b("\n            "),D=h("div"),I=h("div"),P=h("input"),W=b("\n                "),$=h("button"),ue._fragment.c(),F=b("\n                "),q=h("span"),V=b(ee),B=b("\n\n            "),he._fragment.c(),G=b("\n\n            "),J=h("p"),p.htmlFor="share-url",p.className="svelte-ohpgf6",_(y,"type","text"),y.id="share-url",y.className="passive-input svelte-ohpgf6",y.value=t.shareUrl,y.readOnly=!0,L.target="_blank",L.className="share-url-link svelte-ohpgf6",L.href=t.shareUrl,m.className="copy-preview share-url svelte-ohpgf6",v(R,"click",oe),R.className="btn copy-button svelte-ohpgf6",R.title=O("publish / copy"),x.className="copy-success svelte-ohpgf6",U(x,"show",t.copySuccess.shareurl),f.className="copy-group svelte-ohpgf6",u.className="share-embed-item svelte-ohpgf6",o.className="share-embed-block svelte-ohpgf6",z.htmlFor="embed-code",z.className="svelte-ohpgf6",v(P,"click",ce),_(P,"type","text"),P.className="passive-input svelte-ohpgf6",P.value=t.embedCode,P.id="embed-code",P.readOnly=!0,I.className="copy-preview embed-code svelte-ohpgf6",v($,"click",pe),$.className="btn copy-button svelte-ohpgf6",$.title=O("publish / copy"),q.className="copy-success svelte-ohpgf6",U(q,"show",t.copySuccess.embedcode),D.className="copy-group svelte-ohpgf6",J.className="embed-explanation svelte-ohpgf6",M.className="share-embed-item svelte-ohpgf6",k.className="share-embed-block svelte-ohpgf6",n.className="share-embed svelte-ohpgf6",U(n,"pending",t.pending)},m:function(t,c){l(t,n,c),a(n,i),i.innerHTML=X,a(n,s),a(n,o),ie._mount(o,null),a(o,r),a(o,u),a(u,p),p.innerHTML=Z,a(u,d),a(u,f),a(f,m),a(m,y),e.refs.shareurl=y,a(m,w),a(m,L),a(f,T),a(f,R),se._mount(R,null),a(f,N),a(f,x),a(x,S),a(u,C),ae._mount(u,null),a(n,H),a(n,k),le._mount(k,null),a(k,A),a(k,M),a(M,z),z.innerHTML=Y,a(M,j),a(M,D),a(D,I),a(I,P),e.refs.embedcode=P,a(D,W),a(D,$),ue._mount($,null),a(D,F),a(D,q),a(q,V),a(M,B),he._mount(M,null),a(M,G),a(M,J),J.innerHTML=ne},p:function(e,i){t=i,e.shareUrl&&(y.value=t.shareUrl,L.href=t.shareUrl),e.copySuccess&&U(x,"show",t.copySuccess.shareurl);var s={};e.shareOptions&&(s.options=t.shareOptions),!Q.value&&e.shareurlType&&(s.value=t.shareurlType,Q.value=void 0!==t.shareurlType),ae._set(s),Q={},e.embedCode&&(P.value=t.embedCode),e.copySuccess&&U(q,"show",t.copySuccess.embedcode);var o={};e.embedOptions&&(o.options=t.embedOptions),!te.value&&e.embedType&&(o.value=t.embedType,te.value=void 0!==t.embedType),he._set(o),te={},e.pending&&U(n,"pending",t.pending)},d:function(t){t&&c(n),ie.destroy(),e.refs.shareurl===y&&(e.refs.shareurl=null),se.destroy(),g(R,"click",oe),ae.destroy(),le.destroy(),g(P,"click",ce),e.refs.embedcode===P&&(e.refs.embedcode=null),ue.destroy(),g($,"click",pe),he.destroy()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),R(this))}function tt(e,t){var n;return{c:function(){(n=h("p")).innerHTML='<i class="fa fa-spinner fa-pulse fa-fw"></i> loading...',n.className="mini-help"},m:function(e,t){l(e,n,t)},d:function(e){e&&c(n)}}}function nt(e){var t,n,i;N(this,e),this._state=o({loading:!1},e.data),this._intro=!0,this._fragment=(t=this._state,i=t.loading&&tt(),{c:function(){i&&i.c(),n=m()},m:function(e,t){i&&i.m(e,t),l(e,n,t)},p:function(e,t){t.loading?i||((i=tt()).c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d:function(e){i&&i.d(e),e&&c(n)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}o(et.prototype,C),o(et.prototype,Ye),et.prototype._recompute=function(e,t){var i,s,o,r,a,l,c;(e.shareurlType||e.id||e.publicUrl||e.metadata||e.pluginShareurls)&&this._differs(t.shareUrl,t.shareUrl=Qe(t))&&(e.shareUrl=!0),(e.embedType||e.publicUrl||e.metadata)&&this._differs(t.embedCode,t.embedCode=(s=(i=t).embedType,o=i.publicUrl,(r=i.metadata)?r.publish&&!r.publish["embed-codes"]?'<iframe src="'.concat(o,'" width="100%" height="').concat(r.publish["embed-height"],'" scrolling="no" frameborder="0" allowtransparency="true"></iframe>'):r.publish["embed-codes"]["embed-method-"+s]?r.publish["embed-codes"]["embed-method-"+s]:"":""))&&(e.embedCode=!0),e.pluginShareurls&&this._differs(t.shareOptions,t.shareOptions=(a=t.pluginShareurls,l={label:O("publish / share-url / fullscreen"),value:"default",help:O("publish / help / share-url / fullscreen")},c=a.map((function(e){var t=e.name,n=e.id;return{label:t,value:n,help:O("publish / help / share-url / ".concat(n))}})),[l].concat(n(c))))&&(e.shareOptions=!0),e.embedTemplates&&this._differs(t.embedOptions,t.embedOptions=t.embedTemplates.map((function(e,t){var n=e.title,i=e.id,s=e.text;return{label:Ke(n),value:Ke(i),help:Ke(s)}})))&&(e.embedOptions=!0)},o(nt.prototype,C);var it=!0;var st={publish:function(){var e=this;this.set({publishing:!0,publishStarted:(new Date).getTime(),now:(new Date).getTime(),progress:[],unpublished:!1,publish_error:!1});var t=this.store;A("Chart Editor","publish");var n=t.get().id;t.store((function(){e.set({statusUrl:"/v3/charts/".concat(n,"/publish/status/").concat(t.get().publicVersion)}),Se.post("/v3/charts/".concat(n,"/publish")).then((function(t){e.set({published:!0,progress:["done"]}),Se.get("/v3/charts/".concat(n)).then((function(t){A("Chart Editor","publish-success"),e.publishFinished(t)}))})).catch((function(t){e.set({publish_error:t.message,publishing:!1,progress:[]}),A("Chart Editor","publish-error",t.message)})),setTimeout((function(){e.get().publishing&&e.updateStatus()}),1e3)}))},unpublish:function(){var e=this,t=this.store.get().id;this.set({progress:[],unpublishing:!0,needs_republish:!1}),Se.post("/v3/charts/".concat(t,"/unpublish")).then((function(n){Se.get("/v3/charts/".concat(t)).then((function(t){e.store.set(t),A("Chart Editor","unpublish-success"),setTimeout((function(){e.set({published:!1,unpublishing:!1,unpublished:!0})}),1e3)}))})).catch((function(t){e.set({publish_error:t.message,unpublishing:!1}),A("Chart Editor","unpublish-error",t.message)}))},requestUnpublishConfirmation:function(){this.set({publish_error:null}),$("#modalConfirmation").modal()},updateStatus:function(){var e=this,t=this.get().statusUrl;t&&Se.get(t).then((function(t){e.set({progress:t.progress||[],now:(new Date).getTime()}),e.get().publishing&&setTimeout((function(){e.updateStatus()}),500)}))},publishFinished:function(e){this.set({progress:["done"],published:!0,publishStarted:0,needs_republish:!1,publishing:!1}),this.store.set({lastEditStep:5}),window.parent.postMessage({source:"datawrapper",type:"chart-publish",chartId:e.id},"*"),this.store.set(e)},select:function(e){var t=this;window.location.hash=e.id;var n=this.get().active_action;if(e.id===n)return this.refs.action.set({show:!1}),this.set({active_action:"",Action:nt});this.set({active_action:e.id}),e.mod?e.mod.App?(this.refs.action.set({show:!1}),e.mod.data&&this.refs.action.set(e.mod.data),this.set({Action:e.mod.App,actionData:e.mod.data,store:this.store}),this.refs.action.set({show:!0})):(this.set({Action:nt}),this.refs.action.set({loading:!0}),e.mod.css&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"string"==typeof e&&(e={src:e}),e.parentElement&&"function"==typeof e.parentElement.appendChild||(e.parentElement=document.head),new Promise((function(n,i){var s=document.createElement("link");s.rel="stylesheet",s.href=e.src,s.onload=function(){t&&t(),n()},s.onerror=i,e.parentElement.appendChild(s)}))}(e.mod.css),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;new Promise((function(n,i){var s=document.createElement("script");s.src=e,s.onload=function(){t&&t(),n()},s.onerror=i,document.body.appendChild(s)}))}(e.mod.src,(function(){setTimeout((function(){require([e.mod.id],(function(n){Object.assign(e.mod,n),t.set({Action:e.mod.App,actionData:e.mod.data,store:t.store}),t.refs.action.set({show:!0}),n.init&&n.init(t.refs.action),e.mod.data&&t.refs.action.set(e.mod.data)}))}),200)}))):e.action&&this[e.action]?(this.set({Action:nt}),this[e.action]()):"function"==typeof e.action&&(this.set({Action:nt}),e.action())},duplicate:function(){var e=this.store.get().id;A("Chart Editor","duplicate"),Se.post("/v3/charts/".concat(e,"/copy")).then((function(e){window.location.href="/edit/".concat(e.id,"/visualize")}))}};function ot(){var e=this.store.get().lastEditStep;this.set({published:e>4}),window.dw.backend.fire("edit.publish.oncreate",this);var t=window.location.hash.slice(1);if(t){var n=this.get(),i=n.chartActions,s=n.$actions,o=i.concat(s).find((function(e){return e.id===t}));o&&this.select(o)}}function rt(e){var t=e.changed,n=e.current,i=window.dw&&window.dw.backend&&window.dw.backend.setUserData;if(t.embedType&&i){var s=window.dw.backend.__userData;if(!n.embedType||!s)return;s.embedType=n.embedType,window.dw.backend.setUserData(s)}if(t.shareurlType&&i){var o=window.dw.backend.__userData;if(!n.shareurlType||!o)return;o.shareurlType=n.shareurlType,window.dw.backend.setUserData(o)}if(t.published){var r=window.document.querySelector(".dw-create-publish .publish-step");r&&r.classList[n.published?"add":"remove"]("is-published")}t.auto_publish&&n.auto_publish&&it&&(this.publish(),it=!1,window.history.replaceState("","",window.location.pathname))}function at(e){e.preventDefault();var t=this._svelte,n=t.component,i=t.ctx;n.select(i.action)}function lt(e,t,n){var i=Object.create(e);return i.action=t[n],i}function ct(e,t){var n={pluginShareurls:t.pluginShareurls,embedTemplates:t.embedTemplates,pending:t.publishing||t.unpublishing,shareurlType:t.shareurlType,embedType:t.embedType,metadata:t.$metadata,id:t.$id,publicUrl:t.$publicUrl},i=new et({root:e.root,store:e.store,data:n});return{c:function(){i._fragment.c()},m:function(e,t){i._mount(e,t)},p:function(e,t){var n={};e.pluginShareurls&&(n.pluginShareurls=t.pluginShareurls),e.embedTemplates&&(n.embedTemplates=t.embedTemplates),(e.publishing||e.unpublishing)&&(n.pending=t.publishing||t.unpublishing),e.shareurlType&&(n.shareurlType=t.shareurlType),e.embedType&&(n.embedType=t.embedType),e.$metadata&&(n.metadata=t.$metadata),e.$id&&(n.id=t.$id),e.$publicUrl&&(n.publicUrl=t.$publicUrl),i._set(n)},d:function(e){i.destroy(e)}}}function ut(e,t){var n;return{c:function(){n=h("p")},m:function(e,i){l(e,n,i),n.innerHTML=t.exportIntro},p:function(e,t){e.exportIntro&&(n.innerHTML=t.exportIntro)},d:function(e){e&&c(n)}}}function pt(e,t){var n,i,s,o,r,u,p,d,f=t.action.title,m=t.action.banner&&"FALSE"!=t.action.banner.text&&"-"!=t.action.banner.text&&dt(e,t);return{c:function(){n=h("li"),i=h("a"),s=h("i"),r=h("span"),p=b("\n                "),m&&m.c(),s.className=o="fa fa-"+t.action.icon,r.className="title",i._svelte={component:e,ctx:t},v(i,"click",at),_(i,"role","button"),i.href=u=t.action.url?t.action.url:"#"+t.action.id,n.className=d="action action-"+t.action.id+" "+(t.action.class||"")+" "+(t.action.id==t.active_action?"active":"")},m:function(e,t){l(e,n,t),a(n,i),a(i,s),a(i,r),r.innerHTML=f,a(n,p),m&&m.m(n,null)},p:function(a,l){t=l,a.sortedChartActions&&o!==(o="fa fa-"+t.action.icon)&&(s.className=o),a.sortedChartActions&&f!==(f=t.action.title)&&(r.innerHTML=f),i._svelte.ctx=t,a.sortedChartActions&&u!==(u=t.action.url?t.action.url:"#"+t.action.id)&&(i.href=u),t.action.banner&&"FALSE"!=t.action.banner.text&&"-"!=t.action.banner.text?m?m.p(a,t):((m=dt(e,t)).c(),m.m(n,null)):m&&(m.d(1),m=null),(a.sortedChartActions||a.active_action)&&d!==(d="action action-"+t.action.id+" "+(t.action.class||"")+" "+(t.action.id==t.active_action?"active":""))&&(n.className=d)},d:function(e){e&&c(n),g(i,"click",at),m&&m.d()}}}function dt(e,t){var n,i,s,o=t.action.banner.text;return{c:function(){n=h("div"),i=b(o),n.className="banner",n.style.cssText=s=t.action.banner.style},m:function(e,t){l(e,n,t),a(n,i)},p:function(e,t){e.sortedChartActions&&o!==(o=t.action.banner.text)&&w(i,o),e.sortedChartActions&&s!==(s=t.action.banner.style)&&(n.style.cssText=s)},d:function(e){e&&c(n)}}}function ht(e,t){var n,i=t.action&&pt(e,t);return{c:function(){i&&i.c(),n=m()},m:function(e,t){i&&i.m(e,t),l(e,n,t)},p:function(t,s){s.action?i?i.p(t,s):((i=pt(e,s)).c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d:function(e){i&&i.d(e),e&&c(n)}}}function ft(e){var t=this;N(this,e),this.refs={},this._state=o(o(this.store._init(["actions","publicVersion","metadata","id","publicUrl"]),{active_action:"",embedTemplates:[],pluginShareurls:[],published:!1,publishing:!1,publishStarted:0,unpublished:!1,unpublishing:!1,needs_republish:!1,publish_error:!1,auto_publish:!1,progress:[],redirectDisabled:!1,shareurlType:"default",embedType:"responsive",Action:nt,actionData:null,store:null,chartActions:[{id:"duplicate",icon:"code-fork",title:O("Duplicate"),order:500,action:"duplicate"}],publishHed:"",publishIntro:"",beforeExport:null,exportHed:O("publish / export-duplicate"),exportIntro:O("publish / export-duplicate / intro"),embedCode:"",statusUrl:!1}),e.data),this.store._add(this,["actions","publicVersion","metadata","id","publicUrl"]),this._recompute({chartActions:1,$actions:1,publishStarted:1,now:1},this._state),this._intro=!0,this._handlers.state=[rt],this._handlers.destroy=[S],rt.call(this,{changed:r({},this._state),current:this._state}),this._fragment=function(e,t){var n,i,s,o,r,u,d,f,m,v,g,_,y,w,L=O("publish / title"),U={published:t.published,publishing:t.publishing,publishStarted:t.publishStarted,now:t.now,progress:t.progress,unpublished:t.unpublished,unpublishing:t.unpublishing,redirectDisabled:t.redirectDisabled,needsRepublish:t.needs_republish,publishError:t.publish_error,publicVersion:t.$publicVersion},T=new fe({root:e.root,store:e.store,data:U});T.on("publish",(function(t){e.publish()})),T.on("unpublish",(function(t){e.requestUnpublishConfirmation()}));var R=t.published&&ct(e,t),N=t.beforeExport;function x(t){return{root:e.root,store:e.store}}if(N)var S=new N(x());for(var C=t.exportIntro&&ut(e,t),H=t.sortedChartActions,k=[],A=0;A<H.length;A+=1)k[A]=ht(e,lt(t,H,A));var E=t.Action;function M(t){var n={visible:!0,show:!1,data:t.actionData,store:t.store};return{root:e.root,store:e.store,data:n}}if(E)var z=new E(M(t));var j=new ke({root:e.root,store:e.store,data:{id:"modalConfirmation"}});return j.on("confirm",(function(t){e.unpublish()})),{c:function(){n=h("h2"),i=b("\n\n"),s=h("div"),T._fragment.c(),o=b("\n\n    "),R&&R.c(),r=b("\n\n    \n    "),S&&S._fragment.c(),u=b("\n\n    \n    "),d=h("div"),f=h("div"),m=h("h2"),v=b("\n            "),C&&C.c(),g=b("\n\n        "),_=h("ul");for(var e=0;e<k.length;e+=1)k[e].c();y=b("\n\n        "),z&&z._fragment.c(),w=b("\n\n"),j._fragment.c(),m.className="pad-top",_.className="chart-actions",d.className="export-and-duplicate"},m:function(c,p){l(c,n,p),n.innerHTML=L,l(c,i,p),l(c,s,p),T._mount(s,null),a(s,o),R&&R.m(s,null),a(s,r),S&&S._mount(s,null),a(s,u),a(s,d),a(d,f),a(f,m),m.innerHTML=t.exportHed,a(f,v),C&&C.m(f,null),a(d,g),a(d,_);for(var h=0;h<k.length;h+=1)k[h].m(_,null);a(d,y),z&&(z._mount(d,null),e.refs.action=z),l(c,w,p),j._mount(c,p)},p:function(t,n){var i={};if(t.published&&(i.published=n.published),t.publishing&&(i.publishing=n.publishing),t.publishStarted&&(i.publishStarted=n.publishStarted),t.now&&(i.now=n.now),t.progress&&(i.progress=n.progress),t.unpublished&&(i.unpublished=n.unpublished),t.unpublishing&&(i.unpublishing=n.unpublishing),t.redirectDisabled&&(i.redirectDisabled=n.redirectDisabled),t.needs_republish&&(i.needsRepublish=n.needs_republish),t.publish_error&&(i.publishError=n.publish_error),t.$publicVersion&&(i.publicVersion=n.$publicVersion),T._set(i),n.published?R?R.p(t,n):((R=ct(e,n)).c(),R.m(s,r)):R&&(R.d(1),R=null),N!==(N=n.beforeExport)&&(S&&S.destroy(),N?((S=new N(x()))._fragment.c(),S._mount(s,u)):S=null),t.exportHed&&(m.innerHTML=n.exportHed),n.exportIntro?C?C.p(t,n):((C=ut(e,n)).c(),C.m(f,null)):C&&(C.d(1),C=null),t.sortedChartActions||t.active_action){H=n.sortedChartActions;for(var o=0;o<H.length;o+=1){var a=lt(n,H,o);k[o]?k[o].p(t,a):(k[o]=ht(e,a),k[o].c(),k[o].m(_,null))}for(;o<k.length;o+=1)k[o].d(1);k.length=H.length}var l={};t.actionData&&(l.data=n.actionData),t.store&&(l.store=n.store),E!==(E=n.Action)?(z&&z.destroy(),E?((z=new E(M(n)))._fragment.c(),z._mount(d,null),e.refs.action=z):(z=null,e.refs.action===z&&(e.refs.action=null))):E&&z._set(l)},d:function(e){e&&(c(n),c(i),c(s)),T.destroy(),R&&R.d(),S&&S.destroy(),C&&C.d(),p(k,e),z&&z.destroy(),e&&c(w),j.destroy(e)}}}(this,this._state),this.root._oncreate.push((function(){ot.call(t),t.fire("update",{changed:r({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),R(this))}return o(ft.prototype,C),o(ft.prototype,st),ft.prototype._recompute=function(e,t){var n,i,s,o,r,a;(e.chartActions||e.$actions)&&this._differs(t.sortedChartActions,t.sortedChartActions=(i=(n=t).chartActions,s=n.$actions,i.concat(s).filter((function(e){return"publish-s3"!==e.id})).sort((function(e,t){return e.order-t.order}))))&&(e.sortedChartActions=!0),(e.publishStarted||e.now)&&this._differs(t.publishWait,t.publishWait=(r=(o=t).publishStarted,a=o.now,r>0?a-r:0))&&(e.publishWait=!0)},{Publish:ft}}));
