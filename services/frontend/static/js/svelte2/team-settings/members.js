!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/team-settings/members",t):(e="undefined"!=typeof globalThis?globalThis:e||self)["team-settings/members"]=t()}(this,(function(){"use strict";function e(){}function t(e,t){for(var s in t)e[s]=t[s];return e}function s(e,t){for(var s in t)e[s]=1;return e}function n(e,t){e.appendChild(t)}function i(e,t,s){e.insertBefore(t,s)}function r(e){e.parentNode.removeChild(e)}function a(e,t){for(;e.nextSibling&&e.nextSibling!==t;)e.parentNode.removeChild(e.nextSibling)}function o(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function l(e,t,s){for(;e.nextSibling&&e.nextSibling!==t;)s.appendChild(e.parentNode.removeChild(e.nextSibling))}function c(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function d(e,t){for(var s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}function u(){return document.createDocumentFragment()}function m(e){return document.createElement(e)}function h(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function p(e){return document.createTextNode(e)}function f(){return document.createComment("")}function v(e,t,s,n){e.addEventListener(t,s,n)}function g(e,t,s,n){e.removeEventListener(t,s,n)}function _(e,t,s){null==s?e.removeAttribute(t):e.setAttribute(t,s)}function b(e,t,s){e.setAttributeNS("http://www.w3.org/1999/xlink",t,s)}function w(e,t){e.data=""+t}function k(e,t,s){e.style.setProperty(t,s)}function y(e,t){for(var s=0;s<e.options.length;s+=1){var n=e.options[s];if(n.__value===t)return void(n.selected=!0)}}function N(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function T(e,t,s){e.classList[s?"add":"remove"](t)}function x(e,s){var n,i=s.token={};function r(e,n,r,a){if(s.token!==i)return;s.resolved=r&&{[r]:a};const o=t(t({},s.ctx),s.resolved),l=e&&(s.current=e)(s.component,o);s.block&&(s.blocks?s.blocks.forEach((e,t)=>{t!==n&&e&&e.o(()=>{e.d(1),s.blocks[t]=null})}):s.block.d(1),l.c(),l[l.i?"i":"m"](s.mount(),s.anchor),s.component.root.set({})),s.block=l,s.blocks&&(s.blocks[n]=l)}if((n=e)&&"function"==typeof n.then){if(e.then(e=>{r(s.then,1,s.value,e)},e=>{r(s.catch,2,s.error,e)}),s.current!==s.pending)return r(s.pending,0),!0}else{if(s.current!==s.then)return r(s.then,1,s.value,e),!0;s.resolved={[s.value]:e}}}function U(){return Object.create(null)}function C(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function L(e,t){return e!=e?t==t:e!==t}function A(e,t){var s=e in this._handlers&&this._handlers[e].slice();if(s)for(var n=0;n<s.length;n+=1){var i=s[n];if(!i.__calling)try{i.__calling=!0,i.call(this,t)}finally{i.__calling=!1}}}function E(e){e._lock=!0,O(e._beforecreate),O(e._oncreate),O(e._aftercreate),e._lock=!1}function M(){return this._state}function H(e,t){e._handlers=U(),e._slots=U(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function I(e,t){var s=this._handlers[e]||(this._handlers[e]=[]);return s.push(t),{cancel:function(){var e=s.indexOf(t);~e&&s.splice(e,1)}}}function O(e){for(;e&&e.length;)e.shift()()}function $(){this.store._remove(this)}var S={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:M,fire:A,on:I,set:function(e){this._set(t({},e)),this.root._lock||E(this.root)},_recompute:e,_set:function(e){var s=this._state,n={},i=!1;for(var r in e=t(this._staged,e),this._staged={},e)this._differs(e[r],s[r])&&(n[r]=i=!0);i&&(this._state=t(t({},s),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:s}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:s})))},_stage:function(e){t(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:C};const j=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,B=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;function R(e,t){if(null===e)return null;if(void 0!==e){if((e=String(e)).indexOf("<")<0&&e.indexOf(">")<0)return e;if(e=q(e,t),"undefined"==typeof document)return e;var s=document.createElement("div");s.innerHTML=`<span>${e}</span>`,s.innerHTML=q(s.innerHTML,t&&!t.includes("<span>")?t+"<span>":t||void 0);for(var n=s.childNodes[0].querySelectorAll("*"),i=0;i<n.length;i++){if("a"===n[i].nodeName.toLowerCase()){"_self"!==n[i].getAttribute("target")&&n[i].setAttribute("target","_blank"),n[i].setAttribute("rel","nofollow noopener noreferrer");const e=(n[i].getAttribute("href")||"").toLowerCase().replace(/[^a-z0-9 -/:?=]/g,"").trim();(e.startsWith("javascript:")||e.startsWith("vbscript:")||e.startsWith("data:"))&&n[i].setAttribute("href","")}const e=[];for(var r=0;r<n[i].attributes.length;r++){var a=n[i].attributes[r];a.specified&&"on"===a.name.substr(0,2)&&e.push(a.name)}e.forEach(e=>n[i].removeAttribute(e))}return s.childNodes[0].innerHTML}}function q(e,t){t=(((void 0!==t?t||"":"<a><span><b><br><br/><i><strong><sup><sub><strike><u><em><tt>")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");for(var s=e,n=e;;)if(n=(s=n).replace(B,"").replace(j,(function(e,s){return t.indexOf("<"+s.toLowerCase()+">")>-1?e:""})),s===n)return n}const z={};function D(e,t="core",s,...n){let i=function(e,t,s){try{return s[t][e]||e}catch(t){return e}}(e,t,s);return i="string"==typeof n[0]?function(e,t=[]){return e.replace(/\$(\d)/g,(e,s)=>void 0===t[+s]?e:R(t[+s],""))}(i,n):function(e,t={}){return Object.entries(t).forEach(([t,s])=>{e=e.replace(new RegExp(`%${t}%|%${t}(?!\\w)`,"g"),s)}),e}(i,n[0]),R(i,"<p><h1><h2><h3><h4><h5><h6><blockquote><ol><ul><li><pre><hr><br><a><em><i><strong><b><code><img><table><tr><th><td><small><span><div><sup><sub><tt>")}function P(e,t="core",...s){return e=e.trim(),z[t]||function(e="core"){"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(z[e]=window.__dw.vis.meta.locale||{}):z[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}(t),z[t][e]?D(e,t,z,...s):"MISSING:"+e}const V={true:"ASC",false:"DESC"},F=V.true;var W={sort(e,t){e.preventDefault();const s=(n=this.get(),t===n.orderBy?V[n.order!==F]:F);var n;this.set({orderBy:t,order:s}),this.fire("sort",{orderBy:t,order:s})}};function G(e){const{component:t,ctx:s}=this._svelte;t.sort(e,s.item.orderBy)}function J(e,t,s){const n=Object.create(e);return n.item=t[s],n}function Z(e,t,s){const n=Object.create(e);return n.item=t[s],n}function K(e,t){var s;return{c(){k(s=m("col"),"width",t.item.width)},m(e,t){i(e,s,t)},p(e,t){e.columnHeaders&&k(s,"width",t.item.width)},d(e){e&&r(s)}}}function X(e,t){var s,a,o=t.item.title;return{c(){s=m("span"),a=p(o),s.className="col"},m(e,t){i(e,s,t),n(s,a)},p(e,t){e.columnHeaders&&o!==(o=t.item.title)&&w(a,o)},d(e){e&&r(s)}}}function Q(e,t){var s,a,o,l,c=t.item.title;return{c(){s=m("a"),a=p(c),s._svelte={component:e,ctx:t},v(s,"click",G),s.className=o="\n                            sortable\n                            "+(t.isActive(t.item)?t.isAscending?"sortable-asc":"sortable-desc":"")+"\n                         svelte-l1s1ms",s.href=l="?orderBy="+t.item.orderBy},m(e,t){i(e,s,t),n(s,a)},p(e,n){t=n,e.columnHeaders&&c!==(c=t.item.title)&&w(a,c),s._svelte.ctx=t,(e.isActive||e.columnHeaders||e.isAscending)&&o!==(o="\n                            sortable\n                            "+(t.isActive(t.item)?t.isAscending?"sortable-asc":"sortable-desc":"")+"\n                         svelte-l1s1ms")&&(s.className=o),e.columnHeaders&&l!==(l="?orderBy="+t.item.orderBy)&&(s.href=l)},d(e){e&&r(s),g(s,"click",G)}}}function Y(e,t){var s,n;function a(e){return e.item.orderBy?Q:X}var o=a(t),l=o(e,t);return{c(){s=m("th"),l.c(),s.className=n=(t.item.className?t.item.className:"")+" svelte-l1s1ms"},m(e,t){i(e,s,t),l.m(s,null)},p(t,i){o===(o=a(i))&&l?l.p(t,i):(l.d(1),(l=o(e,i)).c(),l.m(s,null)),t.columnHeaders&&n!==(n=(i.item.className?i.item.className:"")+" svelte-l1s1ms")&&(s.className=n)},d(e){e&&r(s),l.d()}}}function ee(e){H(this,e),this._state=t({order:F,orderBy:"",uid:""},e.data),this._recompute({orderBy:1,order:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){for(var s,a,o,l,u,h,f,v,g=e._slotted.default,_=t.columnHeaders,b=[],w=0;w<_.length;w+=1)b[w]=K(e,Z(t,_,w));var k=t.columnHeaders,y=[];for(w=0;w<k.length;w+=1)y[w]=Y(e,J(t,k,w));return{c(){s=m("div"),a=m("table"),o=m("colgroup");for(var e=0;e<b.length;e+=1)b[e].c();l=p("\n\n        "),u=m("thead"),h=m("tr");for(e=0;e<y.length;e+=1)y[e].c();f=p("\n\n        "),v=m("tbody"),a.className="table svelte-l1s1ms",s.className="table-container svelte-l1s1ms",s.dataset.uid=t.uid},m(e,t){i(e,s,t),n(s,a),n(a,o);for(var r=0;r<b.length;r+=1)b[r].m(o,null);n(a,l),n(a,u),n(u,h);for(r=0;r<y.length;r+=1)y[r].m(h,null);n(a,f),n(a,v),g&&n(v,g)},p(t,n){if(t.columnHeaders){_=n.columnHeaders;for(var i=0;i<_.length;i+=1){const s=Z(n,_,i);b[i]?b[i].p(t,s):(b[i]=K(e,s),b[i].c(),b[i].m(o,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=_.length}if(t.columnHeaders||t.isActive||t.isAscending){k=n.columnHeaders;for(i=0;i<k.length;i+=1){const s=J(n,k,i);y[i]?y[i].p(t,s):(y[i]=Y(e,s),y[i].c(),y[i].m(h,null))}for(;i<y.length;i+=1)y[i].d(1);y.length=k.length}t.uid&&(s.dataset.uid=n.uid)},d(e){e&&r(s),d(b,e),d(y,e),g&&c(v,g)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function te(e,t,s){const n=Object.create(e);return n.opt=t[s],n}function se(e,t,s){const n=Object.create(e);return n.optgroup=t[s],n}function ne(e,t,s){const n=Object.create(e);return n.opt=t[s],n}function ie(e,t){for(var s,n=t.options,a=[],o=0;o<n.length;o+=1)a[o]=re(e,ne(t,n,o));return{c(){for(var e=0;e<a.length;e+=1)a[e].c();s=f()},m(e,t){for(var n=0;n<a.length;n+=1)a[n].m(e,t);i(e,s,t)},p(t,i){if(t.options||t.value){n=i.options;for(var r=0;r<n.length;r+=1){const o=ne(i,n,r);a[r]?a[r].p(t,o):(a[r]=re(e,o),a[r].c(),a[r].m(s.parentNode,s))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},d(e){d(a,e),e&&r(s)}}}function re(e,t){var s,a,o,l,c=t.opt.label;return{c(){s=m("option"),a=p(c),s.__value=o=t.opt.value,s.value=s.__value,s.selected=l=t.opt.value===t.value},m(e,t){i(e,s,t),n(s,a)},p(e,t){e.options&&c!==(c=t.opt.label)&&w(a,c),e.options&&o!==(o=t.opt.value)&&(s.__value=o),s.value=s.__value,(e.options||e.value)&&l!==(l=t.opt.value===t.value)&&(s.selected=l)},d(e){e&&r(s)}}}function ae(e,t){for(var s,n=t.optgroups,a=[],o=0;o<n.length;o+=1)a[o]=le(e,se(t,n,o));return{c(){for(var e=0;e<a.length;e+=1)a[e].c();s=f()},m(e,t){for(var n=0;n<a.length;n+=1)a[n].m(e,t);i(e,s,t)},p(t,i){if(t.optgroups||t.value){n=i.optgroups;for(var r=0;r<n.length;r+=1){const o=se(i,n,r);a[r]?a[r].p(t,o):(a[r]=le(e,o),a[r].c(),a[r].m(s.parentNode,s))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},d(e){d(a,e),e&&r(s)}}}function oe(e,t){var s,a,o,l,c=t.opt.label;return{c(){s=m("option"),a=p(c),s.__value=o=t.opt.value,s.value=s.__value,s.selected=l=t.opt.value===t.value},m(e,t){i(e,s,t),n(s,a)},p(e,t){e.optgroups&&c!==(c=t.opt.label)&&w(a,c),e.optgroups&&o!==(o=t.opt.value)&&(s.__value=o),s.value=s.__value,(e.optgroups||e.value)&&l!==(l=t.opt.value===t.value)&&(s.selected=l)},d(e){e&&r(s)}}}function le(e,t){for(var s,n,a=t.optgroup.options,o=[],l=0;l<a.length;l+=1)o[l]=oe(0,te(t,a,l));return{c(){s=m("optgroup");for(var e=0;e<o.length;e+=1)o[e].c();_(s,"label",n=t.optgroup.label)},m(e,t){i(e,s,t);for(var n=0;n<o.length;n+=1)o[n].m(s,null)},p(e,t){if(e.optgroups||e.value){a=t.optgroup.options;for(var i=0;i<a.length;i+=1){const n=te(t,a,i);o[i]?o[i].p(e,n):(o[i]=oe(0,n),o[i].c(),o[i].m(s,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=a.length}e.optgroups&&n!==(n=t.optgroup.label)&&_(s,"label",n)},d(e){e&&r(s),d(o,e)}}}function ce(e){H(this,e),this._state=t({disabled:!1,width:"auto",options:[],optgroups:[],value:null,class:"",uid:""},e.data),this._intro=!0,this._fragment=function(e,t){var s,a,o,l=!1,c=t.options.length&&ie(e,t),d=t.optgroups.length&&ae(e,t);function u(){l=!0,e.set({value:N(s)}),l=!1}function h(t){e.fire("change",t)}return{c(){s=m("select"),c&&c.c(),a=f(),d&&d.c(),v(s,"change",u),"value"in t||e.root._beforecreate.push(u),v(s,"change",h),s.className=o="select-css "+t.class+" svelte-v0oq4b",s.disabled=t.disabled,k(s,"width",t.width),s.dataset.uid=t.uid},m(e,r){i(e,s,r),c&&c.m(s,null),n(s,a),d&&d.m(s,null),y(s,t.value)},p(t,n){n.options.length?c?c.p(t,n):((c=ie(e,n)).c(),c.m(s,a)):c&&(c.d(1),c=null),n.optgroups.length?d?d.p(t,n):((d=ae(e,n)).c(),d.m(s,null)):d&&(d.d(1),d=null),!l&&t.value&&y(s,n.value),t.class&&o!==(o="select-css "+n.class+" svelte-v0oq4b")&&(s.className=o),t.disabled&&(s.disabled=n.disabled),t.width&&k(s,"width",n.width),t.uid&&(s.dataset.uid=n.uid)},d(e){e&&r(s),c&&c.d(),d&&d.d(),g(s,"change",u),g(s,"change",h)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),E(this))}t(ee.prototype,S),t(ee.prototype,W),ee.prototype._recompute=function(e,t){e.orderBy&&this._differs(t.isActive,t.isActive=function({orderBy:e}){return t=>e===t.orderBy}(t))&&(e.isActive=!0),e.order&&this._differs(t.isAscending,t.isAscending=function({order:e}){return e===F}(t))&&(e.isAscending=!0)},t(ce.prototype,S);function de(e){var s,a,o,l,c;H(this,e),this._state=t({icon:"api",size:"1em",color:"inherit",valign:"baseline",class:"",style:"",assetURL:null,spin:!1,timing:"linear",duration:"2s",uid:""},e.data),this._recompute({icon:1,assetURL:1},this._state),this._intro=!0,this._fragment=(s=this._state,{c(){a=m("span"),o=h("svg"),k(l=h("use"),"fill",s.color),b(l,"xlink:href",s.iconURL),k(o,"height",s.size),k(o,"width",s.size),_(o,"class","svelte-1th5ah8"),a.className=c="svg-icon "+s.class+" svelte-1th5ah8",a.dataset.uid=s.uid,k(a,"animation-timing-function",s.timing),k(a,"animation-duration",s.duration),k(a,"height",s.size),k(a,"width",s.size),k(a,"vertical-align",s.valign),T(a,"spin",s.spin)},m(e,t){i(e,a,t),n(a,o),n(o,l)},p(e,t){e.color&&k(l,"fill",t.color),e.iconURL&&b(l,"xlink:href",t.iconURL),e.size&&(k(o,"height",t.size),k(o,"width",t.size)),e.class&&c!==(c="svg-icon "+t.class+" svelte-1th5ah8")&&(a.className=c),e.uid&&(a.dataset.uid=t.uid),e.timing&&k(a,"animation-timing-function",t.timing),e.duration&&k(a,"animation-duration",t.duration),e.size&&(k(a,"height",t.size),k(a,"width",t.size)),e.valign&&k(a,"vertical-align",t.valign),(e.class||e.spin)&&T(a,"spin",t.spin)},d(e){e&&r(a)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(de.prototype,S),de.prototype._recompute=function(e,t){(e.icon||e.assetURL)&&this._differs(t.iconURL,t.iconURL=function({icon:e,assetURL:t}){return`${t||"/lib/icons/symbol/svg/sprite.symbol.svg"}#${e}`}(t))&&(e.iconURL=!0)};var ue={open(){this.set({open:!0})},dismiss(){this.set({open:!1}),this.fire("dismiss")},confirm(){this.set({open:!1}),this.fire("confirm")},handleKeystroke(e){const{open:t}=this.get();t&&"Escape"===e&&this.dismiss()}};function me(e,t){var s,a,c,d,u,h,b,w,k,y,N,T,x,U,C,L,A,E,M=e._slotted.default,H=new de({root:e.root,store:e.store,data:{icon:"close",size:"20px"}});function I(t){e.dismiss()}function O(t){e.dismiss()}var $=t.confirmButtonIcon&&he(e,t);function S(t){e.confirm()}function j(t){t.stopPropagation(),e.fire("keyup",t)}function B(t){e.dismiss()}return{c(){s=m("div"),a=m("div"),c=m("button"),H._fragment.c(),d=p("\n        "),u=m("div"),h=m("h1"),b=p("\n            "),y=p("\n            "),N=m("div"),T=m("button"),x=p("\n                "),U=m("button"),$&&$.c(),C=p(" "),L=m("noscript"),A=p("\n"),E=m("div"),v(c,"click",I),c.type="button",c.className="close svelte-1f9lfqa",_(c,"aria-label",t.backButtonText),h.className="modal-title mb-4 svelte-1f9lfqa",v(T,"click",O),T.className="btn back svelte-1f9lfqa",v(U,"click",S),U.className="btn btn-danger svelte-1f9lfqa",N.className="actions pt-4 mt-4 svelte-1f9lfqa",u.className="modal-content svelte-1f9lfqa",v(a,"keyup",j),a.className="modal-body",s.className="modal",v(E,"click",B),E.className="modal-backdrop"},m(e,r){i(e,s,r),n(s,a),n(a,c),H._mount(c,null),n(a,d),n(a,u),n(u,h),h.innerHTML=t.title,n(u,b),M&&(n(u,w||(w=f())),n(u,M),n(u,k||(k=f()))),n(u,y),n(u,N),n(N,T),T.innerHTML=t.backButtonText,n(N,x),n(N,U),$&&$.m(U,null),n(U,C),n(U,L),L.insertAdjacentHTML("afterend",t.confirmButtonText),i(e,A,r),i(e,E,r)},p(t,s){t.backButtonText&&_(c,"aria-label",s.backButtonText),t.title&&(h.innerHTML=s.title),t.backButtonText&&(T.innerHTML=s.backButtonText),s.confirmButtonIcon?$?$.p(t,s):(($=he(e,s)).c(),$.m(U,C)):$&&($.d(1),$=null),t.confirmButtonText&&(o(L),L.insertAdjacentHTML("afterend",s.confirmButtonText))},d(e){e&&r(s),H.destroy(),g(c,"click",I),M&&(l(w,k,M),r(w),r(k)),g(T,"click",O),$&&$.d(),g(U,"click",S),g(a,"keyup",j),e&&(r(A),r(E)),g(E,"click",B)}}}function he(e,t){var s={icon:t.confirmButtonIcon,class:"mr-1",size:"1.3em",valign:"-0.3em"},n=new de({root:e.root,store:e.store,data:s});return{c(){n._fragment.c()},m(e,t){n._mount(e,t)},p(e,t){var s={};e.confirmButtonIcon&&(s.icon=t.confirmButtonIcon),n._set(s)},d(e){n.destroy(e)}}}function pe(e){H(this,e),this._state=t({title:"Title",confirmButtonText:"Confirm",confirmButtonIcon:!1,backButtonText:"Back",open:!1},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var s;function n(t){e.handleKeystroke(t.key)}window.addEventListener("keydown",n);var a=t.open&&me(e,t);return{c(){a&&a.c(),s=f()},m(e,t){a&&a.m(e,t),i(e,s,t)},p(t,n){n.open?a?a.p(t,n):((a=me(e,n)).c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(e){window.removeEventListener("keydown",n),a&&a.d(e),e&&r(s)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),E(this))}t(pe.prototype,S),t(pe.prototype,ue);const fe={};function ve(e="core"){"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(fe[e]=window.__dw.vis.meta.locale||{}):fe[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function ge(e,t="core"){if(e=e.trim(),fe[t]||ve(t),!fe[t][e])return"MISSING:"+e;var s=fe[t][e];return"string"==typeof s&&arguments.length>2&&(s=s.replace(/\$(\d)/g,(e,t)=>(t=2+Number(t),void 0===arguments[t]?e:arguments[t]))),s}var _e={close(){const{closeFunc:e}=this.get();e?e():(this.set({visible:!1}),this.fire("close"))}};function be(e,t){var s,n;function a(e){return"upgrade-info"===e.type?ke:we}var o=a(t),l=o(e,t);return{c(){s=m("div"),l.c(),s.className=n="alert "+t.class+" svelte-1h26igv",s.dataset.uid=t.uid,T(s,"alert-intro","intro"===t.type),T(s,"alert-success","success"===t.type),T(s,"alert-warning","warning"===t.type),T(s,"alert-error","error"===t.type),T(s,"alert-info","info"===t.type),T(s,"alert-upgrade-info","upgrade-info"===t.type),T(s,"has-header",!!t.title)},m(e,t){i(e,s,t),l.m(s,null)},p(t,i){o===(o=a(i))&&l?l.p(t,i):(l.d(1),(l=o(e,i)).c(),l.m(s,null)),t.class&&n!==(n="alert "+i.class+" svelte-1h26igv")&&(s.className=n),t.uid&&(s.dataset.uid=i.uid),(t.class||t.type)&&(T(s,"alert-intro","intro"===i.type),T(s,"alert-success","success"===i.type),T(s,"alert-warning","warning"===i.type),T(s,"alert-error","error"===i.type),T(s,"alert-info","info"===i.type),T(s,"alert-upgrade-info","upgrade-info"===i.type)),(t.class||t.title)&&T(s,"has-header",!!i.title)},d(e){e&&r(s),l.d()}}}function we(e,t){var s,n,a,o,c=e._slotted.default,d=(t.closeable||t.title)&&ye(e,t);return{c(){d&&d.c(),s=p("\n    "),c||(o=p("content"))},m(e,t){d&&d.m(e,t),i(e,s,t),c?(i(e,n||(n=f()),t),i(e,c,t),i(e,a||(a=f()),t)):i(e,o,t)},p(t,n){n.closeable||n.title?d?d.p(t,n):((d=ye(e,n)).c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},d(e){d&&d.d(e),e?(r(s),c||r(o)):(l(n,a,c),r(n),r(a))}}}function ke(t,s){var a,o,l,c,d,u,h,f,v=ge("upgrade-available"),g=ge("upgrade-info");return{c(){a=m("div"),o=m("span"),l=p("\n    "),c=m("div"),d=m("span"),u=p(v),h=p(" "),f=m("noscript"),o.className="upgrade-icon svelte-1h26igv",a.className="icon",d.className="title svelte-1h26igv"},m(e,t){i(e,a,t),n(a,o),o.innerHTML='<svg width="18" height="18" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15.035 1.963c-.256 0-.511.1-.707.295l-7.07 7.07a1 1 0 00.707 1.707h4.07v15a2 2 0 002 2h2a2 2 0 002-2v-15h4.07a.999.999 0 00.707-1.707l-7.07-7.07a.999.999 0 00-.707-.295z"/></svg>',i(e,l,t),i(e,c,t),n(c,d),n(d,u),n(c,h),n(c,f),f.insertAdjacentHTML("afterend",g)},p:e,d(e){e&&(r(a),r(l),r(c))}}}function ye(e,t){var s,a,o,l,c=t.title&&Ne(e,t),d=t.closeable&&Te(e),u=t.title&&xe();return{c(){s=m("div"),c&&c.c(),a=p(" "),d&&d.c(),o=p("\n    "),u&&u.c(),l=f(),s.className="svelte-1h26igv",T(s,"header",!!t.title)},m(e,t){i(e,s,t),c&&c.m(s,null),n(s,a),d&&d.m(s,null),i(e,o,t),u&&u.m(e,t),i(e,l,t)},p(t,n){n.title?c?c.p(t,n):((c=Ne(e,n)).c(),c.m(s,a)):c&&(c.d(1),c=null),n.closeable?d||((d=Te(e)).c(),d.m(s,null)):d&&(d.d(1),d=null),t.title&&T(s,"header",!!n.title),n.title?u||((u=xe()).c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},d(e){e&&r(s),c&&c.d(),d&&d.d(),e&&r(o),u&&u.d(e),e&&r(l)}}}function Ne(e,t){var s,a;return{c(){s=m("div"),a=p(t.title),s.className="title svelte-1h26igv"},m(e,t){i(e,s,t),n(s,a)},p(e,t){e.title&&w(a,t.title)},d(e){e&&r(s)}}}function Te(e,t){var s;function n(t){e.close()}return{c(){(s=m("button")).textContent="×",v(s,"click",n),s.type="button",_(s,"aria-label","close"),s.className="close svelte-1h26igv"},m(e,t){i(e,s,t)},d(e){e&&r(s),g(s,"click",n)}}}function xe(e,t){var s;return{c(){(s=m("hr")).className="svelte-1h26igv"},m(e,t){i(e,s,t)},d(e){e&&r(s)}}}function Ue(e){var s,n,a,o;H(this,e),this._state=t({visible:!1,type:"",closeable:!0,class:"",closeFunc:!1,uid:"",title:""},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(s=this,n=this._state,o=n.visible&&be(s,n),{c(){o&&o.c(),a=f()},m(e,t){o&&o.m(e,t),i(e,a,t)},p(e,t){t.visible?o?o.p(e,t):((o=be(s,t)).c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&r(a)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(Ue.prototype,S),t(Ue.prototype,_e);var Ce={exports:{}};
/*!
	 * JavaScript Cookie v2.2.1
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */!function(e,t){var s;s=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var s=arguments[e];for(var n in s)t[n]=s[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function s(n){function i(){}function r(t,s,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},i.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(s);/^[\{\[]/.test(a)&&(s=a)}catch(e){}s=n.write?n.write(s,t):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var l in r)r[l]&&(o+="; "+l,!0!==r[l]&&(o+="="+r[l].split(";")[0]));return document.cookie=t+"="+s+o}}function a(e,s){if("undefined"!=typeof document){for(var i={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var o=r[a].split("="),l=o.slice(1).join("=");s||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(o[0]);if(l=(n.read||n)(l,c)||t(l),s)try{l=JSON.parse(l)}catch(e){}if(i[c]=l,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=r,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,s){r(t,"",e(s,{expires:-1}))},i.defaults={},i.withConverter=s,i}((function(){}))},e.exports=s()}(Ce);var Le=Ce.exports;const Ae=new Set(["get","head","options","trace"]);function Ee(e,t={}){if(!t.fetch)try{t.fetch=window.fetch}catch(e){throw new Error("Neither options.fetch nor window.fetch is defined.")}if(!t.baseUrl)try{t.baseUrl=window.dw.backend.__api_domain.startsWith("http")?window.dw.backend.__api_domain:"//"+window.dw.backend.__api_domain}catch(e){throw new Error("Neither options.baseUrl nor window.dw is defined.")}const{payload:s,baseUrl:n,fetch:i,raw:r,...a}={payload:null,raw:!1,method:"GET",mode:"cors",credentials:"include",...t,headers:{"Content-Type":"application/json",...t.headers}},o=`${n.replace(/\/$/,"")}/${e.replace(/^\//,"")}`;let l;if(s&&(a.body=JSON.stringify(s)),a.headers["Content-Type"].startsWith("multipart/")&&delete a.headers["Content-Type"],a.disableCSFR||Ae.has(a.method.toLowerCase()))l=i(o,a);else{const e=Le.get("crumb");e?(a.headers["X-CSRF-Token"]=e,l=i(o,a)):l=Ee("/v3/me",{fetch:i,baseUrl:n}).then(()=>{const e=Le.get("crumb");e&&(a.headers["X-CSRF-Token"]=e)}).catch(()=>{}).then(()=>i(o,a))}return l.then(e=>{if(r)return e;if(!e.ok)throw new Oe(e);if(204===e.status||!e.headers.get("content-type"))return e;const t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()})}const Me=Ee.get=Ie("GET");Ee.patch=Ie("PATCH"),Ee.put=Ie("PUT");const He=Ee.post=Ie("POST");function Ie(e){return(t,s)=>{if(s&&s.method)throw new Error(`Setting option.method is not allowed in httpReq.${e.toLowerCase()}()`);return Ee(t,{...s,method:e})}}Ee.head=Ie("HEAD"),Ee.delete=Ie("DELETE");class Oe extends Error{constructor(e){super(),this.name="HttpReqError",this.status=e.status,this.statusText=e.statusText,this.message=`[${e.status}] ${e.statusText}`,this.response=e}}const $e=[{value:"owner",label:P("teams / role / owner").replace("&shy;","")},{value:"admin",label:P("teams / role / admin").replace("&shy;","")},{value:"member",label:P("teams / role / member").replace("&shy;","")}];async function Se(e){if("HttpReqError"===e.name)try{return(await e.response.json()).message}catch(e){}return e.message}function je(e){return{member:P("teams / role / member"),admin:P("teams / role / admin"),owner:P("teams / role / owner")}[e]}var Be={toggleEdit(e){this.get().editId===e?this.requestUpdateRole(e):this.set({editId:e})},async removeUser(e){if(window.confirm(P("teams / remove / alert"))){try{this.set({error:null}),await Ee.delete(`/v3/teams/${this.get().team.id}/members/${e.id}`)}catch(e){return void this.set({error:await Se(e)})}var{users:t}=this.get();t=t.filter(t=>t.id!==e.id),this.set({users:t})}},async requestUpdateRole(e){var{users:t}=this.get();"owner"!==t.filter(t=>t.id===e)[0].role?await this.updateRole(e):this.refs.confirmationModal.open()},async updateRole(e){var{updating:t,users:s}=this.get();const n=s.filter(t=>t.id===e)[0];t[n.id]=!0,this.set({updating:t});try{this.set({error:null}),await Ee.put(`/v3/teams/${this.get().team.id}/members/${n.id}/status`,{payload:{status:n.role}})}catch(e){this.set({error:await Se(e),updating:!1})}(t=this.get().updating)[n.id]=!1,this.set({updating:t,editId:!1}),this.fire("updateUsers")}};function Re(e){const{component:t,ctx:s}=this._svelte;t.removeUser(s.user)}function qe(e){const{component:t,ctx:s}=this._svelte;t.toggleEdit(s.user.id)}function ze(e){const{component:t,ctx:s}=this._svelte;t.toggleEdit(s.user.id)}function De(e,t,s){const n=Object.create(e);return n.user=t[s],n.each_value=t,n.i=s,n}function Pe(e,t){var s,n=P("teams / total","core",{i:t.numUsers});return{c(){s=p(n)},m(e,t){i(e,s,t)},p(e,t){e.numUsers&&n!==(n=P("teams / total","core",{i:t.numUsers}))&&w(s,n)},d(e){e&&r(s)}}}function Ve(t,s){var n,a=P("teams / total / 1");return{c(){n=p(a)},m(e,t){i(e,n,t)},p:e,d(e){e&&r(n)}}}function Fe(e,t){for(var s,i=t.sortedUsers,r=[],a=0;a<i.length;a+=1)r[a]=st(e,De(t,i,a));var o={columnHeaders:t.userHeaders},l=new ee({root:e.root,store:e.store,slots:{default:u()},data:o});return{c(){for(var e=0;e<r.length;e+=1)r[e].c();s=f(),l._fragment.c()},m(e,t){for(var i=0;i<r.length;i+=1)r[i].m(l._slotted.default,null);n(l._slotted.default,s),l._mount(e,t)},p(t,n){if(t.error||t.isAdmin||t.isTeamOwner||t.sortedUsers||t.userId||t.editId||t.updating||t.roles){i=n.sortedUsers;for(var a=0;a<i.length;a+=1){const o=De(n,i,a);r[a]?r[a].p(t,o):(r[a]=st(e,o),r[a].c(),r[a].m(s.parentNode,s))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}var o={};t.userHeaders&&(o.columnHeaders=n.userHeaders),l._set(o)},d(e){d(r,e),l.destroy(e)}}}function We(e,t){var s,a,o,l,c=t.user.id;return{c(){s=m("td"),a=m("a"),o=p(c),a.href=l="/admin/chart/by/user/"+t.user.id},m(e,t){i(e,s,t),n(s,a),n(a,o)},p(e,t){e.sortedUsers&&c!==(c=t.user.id)&&w(o,c),e.sortedUsers&&l!==(l="/admin/chart/by/user/"+t.user.id)&&(a.href=l)},d(e){e&&r(s)}}}function Ge(e,t){var s,n,o,l,c=je(t.user.role),d=t.user.token&&Ze();return{c(){s=m("noscript"),n=m("noscript"),o=p(" "),d&&d.c(),l=f()},m(e,t){i(e,s,t),s.insertAdjacentHTML("afterend",c),i(e,n,t),i(e,o,t),d&&d.m(e,t),i(e,l,t)},p(e,t){e.sortedUsers&&c!==(c=je(t.user.role))&&(a(s,n),s.insertAdjacentHTML("afterend",c)),t.user.token?d||((d=Ze()).c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},d(e){e&&(a(s,n),r(s),r(n),r(o)),d&&d.d(e),e&&r(l)}}}function Je(e,t){var s,a,o,l={},c=P("teams / role / p"),d={width:"200px",options:t.roles};void 0!==t.user.role&&(d.value=t.user.role,l.value=!0);var u=new ce({root:e.root,store:e.store,data:d,_bind(s,n){var i={};!l.value&&s.value&&(t.user.role=n.value,i.sortedUsers=t.sortedUsers),e._set(i),l={}}});return e.root._beforecreate.push(()=>{u._bind({value:1},u.get())}),{c(){u._fragment.c(),s=p("\n            "),a=m("p"),o=p(c),a.className="mini-help"},m(e,t){u._mount(e,t),i(e,s,t),i(e,a,t),n(a,o)},p(e,s){t=s;var n={};e.roles&&(n.options=t.roles),!l.value&&e.sortedUsers&&(n.value=t.user.role,l.value=void 0!==t.user.role),u._set(n),l={}},d(e){u.destroy(e),e&&(r(s),r(a))}}}function Ze(e,t){var s,a,o=P("teams / invite-pending");return{c(){s=m("i"),a=p(o)},m(e,t){i(e,s,t),n(s,a)},d(e){e&&r(s)}}}function Ke(t,s){var a,o,l=P("teams / edit-role / owner / info");return{c(){a=m("p"),o=p(l),a.className="mini-help"},m(e,t){i(e,a,t),n(a,o)},p:e,d(e){e&&r(a)}}}function Xe(e,t){var s;function n(e){return e.editId===e.user.id?et:e.updating[e.user.id]?Ye:Qe}var a=n(t),o=a(e,t);return{c(){o.c(),s=f()},m(e,t){o.m(e,t),i(e,s,t)},p(t,i){a===(a=n(i))&&o?o.p(t,i):(o.d(1),(o=a(e,i)).c(),o.m(s.parentNode,s))},d(e){o.d(e),e&&r(s)}}}function Qe(e,t){var s,a,o,l,c,d,u,h,f,_=P("teams / edit"),b=P("teams / remove");return{c(){s=m("button"),a=m("i"),o=p("  "),l=p(_),c=p("\n\n            "),d=m("button"),u=m("i"),h=p("  "),f=p(b),a.className="fa fa-edit",s._svelte={component:e,ctx:t},v(s,"click",qe),s.className="btn",u.className="fa fa-times",d._svelte={component:e,ctx:t},v(d,"click",Re),d.className="btn"},m(e,t){i(e,s,t),n(s,a),n(s,o),n(s,l),i(e,c,t),i(e,d,t),n(d,u),n(d,h),n(d,f)},p(e,n){t=n,s._svelte.ctx=t,d._svelte.ctx=t},d(e){e&&r(s),g(s,"click",qe),e&&(r(c),r(d)),g(d,"click",Re)}}}function Ye(t,s){var a,o,l,c,d=P("teams / save");return{c(){a=m("button"),o=m("i"),l=p("  "),c=p(d),o.className="fa fa-spin fa-circle-o-notch",a.disabled=!0,a.className="btn btn-primary"},m(e,t){i(e,a,t),n(a,o),n(a,l),n(a,c)},p:e,d(e){e&&r(a)}}}function et(e,t){var s,a,o,l,c=P("teams / save");return{c(){s=m("button"),a=m("i"),o=p("  "),l=p(c),a.className="fa fa-check",s._svelte={component:e,ctx:t},v(s,"click",ze),s.className="btn btn-primary"},m(e,t){i(e,s,t),n(s,a),n(s,o),n(s,l)},p(e,n){t=n,s._svelte.ctx=t},d(e){e&&r(s),g(s,"click",ze)}}}function tt(e,t){var s,i=new Ue({root:e.root,store:e.store,slots:{default:u()},data:{type:"error",visible:!0}});return{c(){s=p(t.error),i._fragment.c()},m(e,t){n(i._slotted.default,s),i._mount(e,t)},p(e,t){e.error&&w(s,t.error)},d(e){i.destroy(e)}}}function st(e,t){var s,a,o,l,c,d,u,h,f,v,g,_,b=t.user.email,k=t.user.charts,y=t.isAdmin&&We(0,t);function N(e){return e.editId===e.user.id?Je:Ge}var T=N(t),x=T(e,t);function U(e){return e.isAdmin&&!e.isTeamOwner||e.isTeamOwner&&e.user.id!==e.userId||"owner"!==e.user.role?Xe:e.isTeamOwner&&"owner"===e.user.role?Ke:void 0}var C=U(t),L=C&&C(e,t),A=t.error&&tt(e,t);return{c(){s=m("tr"),a=m("td"),o=p(b),l=p("\n        "),y&&y.c(),c=p("\n        "),d=m("td"),u=p(k),h=p("\n        "),f=m("td"),x.c(),v=p("\n        "),g=m("td"),L&&L.c(),_=p(" "),A&&A.c()},m(e,t){i(e,s,t),n(s,a),n(a,o),n(s,l),y&&y.m(s,null),n(s,c),n(s,d),n(d,u),n(s,h),n(s,f),x.m(f,null),n(s,v),n(s,g),L&&L.m(g,null),n(g,_),A&&A.m(g,null)},p(t,n){t.sortedUsers&&b!==(b=n.user.email)&&w(o,b),n.isAdmin?y?y.p(t,n):((y=We(0,n)).c(),y.m(s,c)):y&&(y.d(1),y=null),t.sortedUsers&&k!==(k=n.user.charts)&&w(u,k),T===(T=N(n))&&x?x.p(t,n):(x.d(1),(x=T(e,n)).c(),x.m(f,null)),C===(C=U(n))&&L?L.p(t,n):(L&&L.d(1),(L=C&&C(e,n))&&L.c(),L&&L.m(g,_)),n.error?A?A.p(t,n):((A=tt(e,n)).c(),A.m(g,null)):A&&(A.d(1),A=null)},d(e){e&&r(s),y&&y.d(),x.d(),L&&L.d(),A&&A.d()}}}function nt(e,t){var s,i=P("teams / change-owner-confirmation / warning"),r=new Ue({root:e.root,store:e.store,slots:{default:u()},data:{type:"'warning'",closeable:!1,visible:!0,class:"spacing-helper"}});return{c(){s=m("div"),r._fragment.c(),s.className="confirmation-warning svelte-1aw136m"},m(e,t){n(r._slotted.default,s),s.innerHTML=i,r._mount(e,t)},d(e){r.destroy(e)}}}function it(e){H(this,e),this.refs={},this._state=t({editId:!1,error:null,updating:{},users:[],products:[]},e.data),this._recompute({isAdmin:1,isTeamOwner:1,users:1,sortedUsers:1,numCharts:1,team:1,editId:1},this._state),this._intro=!0,this._fragment=function(e,t){var s,a,l,c,d,h,v,g;function _(e){return 1===e.numUsers?Ve:e.numUsers>1?Pe:void 0}var b=_(t),w=b&&b(e,t),k=t.sortedUsers.length&&Fe(e,t),y=t.products.length&&nt(e),N={confirmButtonText:P("teams / change-owner-confirmation / confirm"),backButtonText:P("teams / change-owner-confirmation / back"),title:t.ownerChangeTitle},T=new pe({root:e.root,store:e.store,slots:{default:u()},data:N});return T.on("confirm",(function(s){e.updateRole(t.editId)})),e.refs.confirmationModal=T,{c(){s=m("p"),w&&w.c(),a=p(" "),l=m("noscript"),c=p("\n\n"),k&&k.c(),d=p("\n\n"),h=m("p"),v=p("\n    "),y&&y.c(),g=f(),T._fragment.c()},m(e,r){i(e,s,r),w&&w.m(s,null),n(s,a),n(s,l),l.insertAdjacentHTML("afterend",t.numChartsCaption),i(e,c,r),k&&k.m(e,r),i(e,d,r),n(T._slotted.default,h),h.innerHTML=t.ownerChangeMessage,n(T._slotted.default,v),y&&y.m(T._slotted.default,null),n(T._slotted.default,g),T._mount(e,r)},p(n,i){b===(b=_(t=i))&&w?w.p(n,t):(w&&w.d(1),(w=b&&b(e,t))&&w.c(),w&&w.m(s,a)),n.numChartsCaption&&(o(l),l.insertAdjacentHTML("afterend",t.numChartsCaption)),t.sortedUsers.length?k?k.p(n,t):((k=Fe(e,t)).c(),k.m(d.parentNode,d)):k&&(k.d(1),k=null),n.ownerChangeMessage&&(h.innerHTML=t.ownerChangeMessage),t.products.length?y||((y=nt(e)).c(),y.m(g.parentNode,g)):y&&(y.d(1),y=null);var r={};n.ownerChangeTitle&&(r.title=t.ownerChangeTitle),T._set(r)},d(t){t&&r(s),w&&w.d(),t&&r(c),k&&k.d(t),t&&r(d),y&&y.d(),T.destroy(t),e.refs.confirmationModal===T&&(e.refs.confirmationModal=null)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),E(this))}t(it.prototype,S),t(it.prototype,Be),it.prototype._recompute=function(e,t){(e.isAdmin||e.isTeamOwner)&&this._differs(t.roles,t.roles=function({isAdmin:e,isTeamOwner:t}){return e||t?$e:$e.slice(1)}(t))&&(e.roles=!0),(e.users||e.isAdmin)&&this._differs(t.sortedUsers,t.sortedUsers=function({users:e,isAdmin:t}){return e.sort((e,t)=>{const s=["owner","admin","member"];return s.indexOf(e.role)>s.indexOf(t.role)?1:s.indexOf(e.role)<s.indexOf(t.role)?-1:e.email>t.email?1:e.email<t.email?-1:0}).filter(e=>t||!e.isAdmin)}(t))&&(e.sortedUsers=!0),e.isAdmin&&this._differs(t.userHeaders,t.userHeaders=function({isAdmin:e}){const t=[{title:P("teams / user"),width:"25%"},{title:"ID",width:"10%"},{title:"Charts",width:"15%"},{title:P("teams / status"),width:"15%"},{title:P("teams / actions"),width:"30%"}];return e||t.splice(1,1),t}(t))&&(e.userHeaders=!0),e.sortedUsers&&this._differs(t.numUsers,t.numUsers=function({sortedUsers:e}){return e.length}(t))&&(e.numUsers=!0),e.users&&this._differs(t.numCharts,t.numCharts=function({users:e}){let t=0;return e.forEach(e=>{t+=e.charts}),t}(t))&&(e.numCharts=!0),(e.numCharts||e.isAdmin||e.team)&&this._differs(t.numChartsCaption,t.numChartsCaption=function({numCharts:e,isAdmin:t,team:s}){return 1===e?P("teams / charts-total / 1"):e>1?t?P("teams / charts-total-admin","core",{i:e,link:"/admin/chart/by/team/"+s.id}):P("teams / charts-total","core",{i:e}):""}(t))&&(e.numChartsCaption=!0),(e.users||e.editId||e.team||e.isTeamOwner)&&this._differs(t.ownerChangeMessage,t.ownerChangeMessage=function({users:e,editId:t,team:s,isTeamOwner:n}){const i=e.find(e=>e.id===t),r=e.find(e=>e.id!==t&&"owner"===e.role),a=i?i.name||i.email||i.id:"non-existent",o=r?r.name||r.email||r.id:"non-existent";return P("teams / change-owner-confirmation / message","core",{member:`<b>${R(a,"")}</b>`,team:`<b>${s.name}</b>`,message:n?P("teams / change-owner-confirmation / owner-message"):P("teams / change-owner-confirmation / non-owner-message","core",{member:`<b>${o}</b>`})})}(t))&&(e.ownerChangeMessage=!0),(e.users||e.editId)&&this._differs(t.ownerChangeTitle,t.ownerChangeTitle=function({users:e,editId:t}){const s=e.find(e=>e.id===t);return P("teams / change-owner-confirmation / title","core",{member:s?s.name||s.email||s.id:"non-existent"})}(t))&&(e.ownerChangeTitle=!0)};var rt={toggle(e){e.preventDefault();const{visible:t,disabled:s}=this.get();s||this.set({visible:!t})},windowClick(e){if(!e.target)return;const t="SVELTE2-WRAPPER"===e.target.tagName;if(t&&!e.composedPath().length)return;const s=t?e.composedPath()[0]:e.target,n=this.refs&&this.refs.button;n&&n===s||e.target.classList.contains("hex")||this.set({visible:!1})}};function at(e,t){var s,a,o=e._slotted.content;return{c(){s=m("div"),o||((a=m("div")).textContent="DropdownControl content"),o||(a.className="base-dropdown-inner svelte-1jdtmzv"),k(s,"width",t.width),s.className="dropdown-menu base-dropdown-content svelte-1jdtmzv"},m(e,t){i(e,s,t),n(s,o||a)},p(e,t){e.width&&k(s,"width",t.width)},d(e){e&&r(s),o&&c(s,o)}}}function ot(e){H(this,e),this.refs={},this._state=t({visible:!1,disabled:!1,width:"auto",uid:""},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var s,a,o,l,d,u,h=e._slotted.button;function f(t){e.windowClick(t)}function _(t){e.toggle(t)}window.addEventListener("click",f);var b=t.visible&&at(e,t);return{c(){s=m("div"),a=m("a"),h||(o=m("button"),l=m("i")),u=p("\n    "),b&&b.c(),h||(l.className=d="fa fa-chevron-"+(t.visible?"up":"down")+" svelte-1jdtmzv",o.className="btn btn-small"),v(a,"click",_),a.href="#dropdown-btn",a.className="base-drop-btn svelte-1jdtmzv",k(s,"position","relative"),k(s,"display","inline-block"),s.dataset.uid=t.uid},m(t,r){i(t,s,r),n(s,a),h?n(a,h):(n(a,o),n(o,l)),e.refs.button=a,n(s,u),b&&b.m(s,null)},p(t,n){h||t.visible&&d!==(d="fa fa-chevron-"+(n.visible?"up":"down")+" svelte-1jdtmzv")&&(l.className=d),n.visible?b?b.p(t,n):((b=at(e,n)).c(),b.m(s,null)):b&&(b.d(1),b=null),t.uid&&(s.dataset.uid=n.uid)},d(t){window.removeEventListener("click",f),t&&r(s),h&&c(a,h),g(a,"click",_),e.refs.button===a&&(e.refs.button=null),b&&b.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(ot.prototype,S),t(ot.prototype,rt);var lt={fireClick(){this.fire("click")},action(e){e.disabled||e.action(this)}};function ct(e){e.preventDefault();const{component:t,ctx:s}=this._svelte;t.action(s.item)}function dt(e,t,s){const n=Object.create(e);return n.item=t[s],n}function ut(e,t){var s,a,l,c,d=t.icon&&mt(e,t);function u(t){t.preventDefault(),t.stopPropagation(),e.fireClick()}return{c(){s=m("button"),d&&d.c(),a=p(" "),l=m("noscript"),v(s,"click",u),s.disabled=t.disabled,s.className=c="split-button-label "+t.btnClass+" svelte-1qu0vk"},m(e,r){i(e,s,r),d&&d.m(s,null),n(s,a),n(s,l),l.insertAdjacentHTML("afterend",t.label)},p(t,n){n.icon?d?d.p(t,n):((d=mt(e,n)).c(),d.m(s,a)):d&&(d.d(1),d=null),t.label&&(o(l),l.insertAdjacentHTML("afterend",n.label)),t.disabled&&(s.disabled=n.disabled),t.btnClass&&c!==(c="split-button-label "+n.btnClass+" svelte-1qu0vk")&&(s.className=c)},d(e){e&&r(s),d&&d.d(),g(s,"click",u)}}}function mt(e,t){var s;return{c(){(s=m("i")).className=t.icon+" svelte-1qu0vk"},m(e,t){i(e,s,t)},p(e,t){e.icon&&(s.className=t.icon+" svelte-1qu0vk")},d(e){e&&r(s)}}}function ht(e,t){var s,n,a=t.icon&&ft(e,t);function o(e){return e.label?gt:vt}var l=o(t),c=l(e,t);return{c(){a&&a.c(),s=p(" "),c.c(),n=f()},m(e,t){a&&a.m(e,t),i(e,s,t),c.m(e,t),i(e,n,t)},p(t,i){i.icon?a?a.p(t,i):((a=ft(e,i)).c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),l===(l=o(i))&&c?c.p(t,i):(c.d(1),(c=l(e,i)).c(),c.m(n.parentNode,n))},d(e){a&&a.d(e),e&&r(s),c.d(e),e&&r(n)}}}function pt(t,s){var n;return{c(){(n=m("span")).className="caret"},m(e,t){i(e,n,t)},p:e,d(e){e&&r(n)}}}function ft(e,t){var s;return{c(){(s=m("i")).className=t.icon+" svelte-1qu0vk"},m(e,t){i(e,s,t)},p(e,t){e.icon&&(s.className=t.icon+" svelte-1qu0vk")},d(e){e&&r(s)}}}function vt(t,s){var n;return{c(){(n=m("i")).className="im im-menu-dot-h svelte-1qu0vk"},m(e,t){i(e,n,t)},p:e,d(e){e&&r(n)}}}function gt(e,t){var s,n,o,l;return{c(){s=m("noscript"),n=m("noscript"),o=p("\n            "),(l=m("span")).className="caret"},m(e,r){i(e,s,r),s.insertAdjacentHTML("afterend",t.label),i(e,n,r),i(e,o,r),i(e,l,r)},p(e,t){e.label&&(a(s,n),s.insertAdjacentHTML("afterend",t.label))},d(e){e&&(a(s,n),r(s),r(n),r(o),r(l))}}}function _t(e,t){var s,a,o,l=t.item.label;return{c(){s=m("li"),a=m("a"),o=p("\n        "),a._svelte={component:e,ctx:t},v(a,"click",ct),a.href="#/action",a.className="svelte-1qu0vk",T(a,"disabled",t.item.disabled),s.className="svelte-1qu0vk"},m(e,t){i(e,s,t),n(s,a),a.innerHTML=l,n(s,o)},p(e,s){t=s,e.items&&l!==(l=t.item.label)&&(a.innerHTML=l),a._svelte.ctx=t,e.items&&T(a,"disabled",t.item.disabled)},d(e){e&&r(s),g(a,"click",ct)}}}function bt(e){H(this,e),this._state=t({label:"",icon:!1,split:!1,items:[],btnClass:"btn",uid:""},e.data),this._intro=!0,this._fragment=function(e,t){var s,i,r,a,o,l=t.split&&ut(e,t);function c(e){return e.split?pt:ht}for(var h=c(t),f=h(e,t),v=t.items,g=[],b=0;b<v.length;b+=1)g[b]=_t(e,dt(t,v,b));var w={disabled:t.disabled,uid:t.uid},k=new ot({root:e.root,store:e.store,slots:{default:u(),content:u(),button:u()},data:w});return{c(){s=m("div"),l&&l.c(),i=p("\n        "),r=m("button"),f.c(),a=p("\n\n    "),o=m("ul");for(var e=0;e<g.length;e+=1)g[e].c();k._fragment.c(),r.disabled=t.disabled,r.className=t.btnClass+" svelte-1qu0vk",_(s,"slot","button"),s.className="btn-group",_(o,"slot","content"),o.className="svelte-1qu0vk"},m(e,t){n(k._slotted.button,s),l&&l.m(s,null),n(s,i),n(s,r),f.m(r,null),n(k._slotted.default,a),n(k._slotted.content,o);for(var c=0;c<g.length;c+=1)g[c].m(o,null);k._mount(e,t)},p(t,n){if(n.split?l?l.p(t,n):((l=ut(e,n)).c(),l.m(s,i)):l&&(l.d(1),l=null),h===(h=c(n))&&f?f.p(t,n):(f.d(1),(f=h(e,n)).c(),f.m(r,null)),t.disabled&&(r.disabled=n.disabled),t.btnClass&&(r.className=n.btnClass+" svelte-1qu0vk"),t.items){v=n.items;for(var a=0;a<v.length;a+=1){const s=dt(n,v,a);g[a]?g[a].p(t,s):(g[a]=_t(e,s),g[a].c(),g[a].m(o,null))}for(;a<g.length;a+=1)g[a].d(1);g.length=v.length}var d={};t.disabled&&(d.disabled=n.disabled),t.uid&&(d.uid=n.uid),k._set(d)},d(e){l&&l.d(),f.d(),d(g,e),k.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),E(this))}function wt(e,t){var s,a,o,l=e._slotted.labelExtra;return{c(){s=m("label"),a=m("noscript"),s.className="control-label svelte-150khnx"},m(e,r){i(e,s,r),n(s,a),a.insertAdjacentHTML("beforebegin",t.label),l&&(n(s,o||(o=f())),n(s,l))},p(e,t){e.label&&(!function(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}(a),a.insertAdjacentHTML("beforebegin",t.label))},d(e){e&&r(s),l&&function(e,t){for(;e.nextSibling;)t.appendChild(e.nextSibling)}(o,l)}}}function kt(e,t){var s;return{c(){(s=m("div")).className="help success svelte-150khnx"},m(e,n){i(e,s,n),s.innerHTML=t.success},p(e,t){e.success&&(s.innerHTML=t.success)},d(e){e&&r(s)}}}function yt(e,t){var s;return{c(){(s=m("div")).className="help error svelte-150khnx"},m(e,n){i(e,s,n),s.innerHTML=t.error},p(e,t){e.error&&(s.innerHTML=t.error)},d(e){e&&r(s)}}}function Nt(e,t){var s;return{c(){(s=m("div")).className="help svelte-150khnx"},m(e,n){i(e,s,n),s.innerHTML=t.help},p(e,t){e.help&&(s.innerHTML=t.help)},d(e){e&&r(s)}}}function Tt(e){var s,a,o,l,d,u,h,f,v,g,_,b,w,y;H(this,e),this._state=t({label:"",help:"",compact:!1,class:"",error:!1,success:!1,width:"auto",uid:""},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(s=this,a=this._state,g=s._slotted.default,_=a.label&&wt(s,a),b=a.success&&kt(0,a),w=a.error&&yt(0,a),y=!a.success&&!a.error&&a.help&&Nt(0,a),{c(){o=m("div"),_&&_.c(),l=p("\n    "),d=m("div"),u=p("\n    "),b&&b.c(),h=p(" "),w&&w.c(),f=p(" "),y&&y.c(),d.className="form-controls svelte-150khnx",o.className=v="form-block "+a.class+" svelte-150khnx",k(o,"width",a.width),o.dataset.uid=a.uid,T(o,"compact",a.compact),T(o,"success",a.success),T(o,"error",a.error)},m(e,t){i(e,o,t),_&&_.m(o,null),n(o,l),n(o,d),g&&n(d,g),n(o,u),b&&b.m(o,null),n(o,h),w&&w.m(o,null),n(o,f),y&&y.m(o,null)},p(e,t){t.label?_?_.p(e,t):((_=wt(s,t)).c(),_.m(o,l)):_&&(_.d(1),_=null),t.success?b?b.p(e,t):((b=kt(0,t)).c(),b.m(o,h)):b&&(b.d(1),b=null),t.error?w?w.p(e,t):((w=yt(0,t)).c(),w.m(o,f)):w&&(w.d(1),w=null),t.success||t.error||!t.help?y&&(y.d(1),y=null):y?y.p(e,t):((y=Nt(0,t)).c(),y.m(o,null)),e.class&&v!==(v="form-block "+t.class+" svelte-150khnx")&&(o.className=v),e.width&&k(o,"width",t.width),e.uid&&(o.dataset.uid=t.uid),(e.class||e.compact)&&T(o,"compact",t.compact),(e.class||e.success)&&T(o,"success",t.success),(e.class||e.error)&&T(o,"error",t.error)},d(e){e&&r(o),_&&_.d(),g&&c(d,g),b&&b.d(),w&&w.d(),y&&y.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(bt.prototype,S),t(bt.prototype,lt),t(Tt.prototype,S);var xt={async addUser(e){const{inviteeExists:t,inviteeUserId:s}=this.get();if(!t)return;this.set({currentAction:{updatingUsers:!0,isComplete:!1}});const n=await He(`/v3/teams/${this.get().team.id}/members`,{raw:!0,payload:{userId:s,role:e}}),i=n.ok?null:await n.json(),r={updatingUsers:!1,isComplete:!0,isError:!n.ok,errorCode:n.ok?null:n.status,responseData:i&&i.data?i.data:null,type:"add",role:e};this.set({invitedEmail:this.get().inviteeEmail,currentAction:r}),this.fire("updateUsers")},async inviteUser(e){const{inviteeEmail:t}=this.get();this.set({currentAction:{updatingUsers:!0,isComplete:!1}});const s=await He(`/v3/teams/${this.get().team.id}/invites`,{raw:!0,payload:{email:t,role:e}}),n=s.ok?null:await s.json(),i={updatingUsers:!1,isComplete:!0,isError:!s.ok,errorCode:s.ok?null:s.status,responseData:n&&n.data?n.data:null,type:"invite",role:e};this.set({invitedEmail:this.get().inviteeEmail,currentAction:i}),this.fire("updateUsers")},async debounceCheckUser(){this.get().isAdmin&&(window.clearTimeout(window.checkUser),this.set({inviteeExistsLoading:!0}),window.checkUser=setTimeout(()=>{this.checkUser()},200))},async checkUser(){let{inviteeEmail:e}=this.get();const{isValidEmail:t}=this.get();if(!t)return void this.set({inviteeExistsLoading:!1});const s=await Me("/v3/users?search="+encodeURIComponent(e));this.set({inviteeExistsLoading:!1,inviteeExists:!1}),s.list.length>0&&(e=this.get().inviteeEmail,s.list.forEach(t=>{t.email.toLowerCase()===e.toLowerCase()&&this.set({inviteeExists:!0,inviteeUserId:t.id})}))}};function Ut(){window.teamSettingsInvite=this}function Ct({changed:e}){e.inviteeEmail&&(this.set({inviteeExists:!1}),this.debounceCheckUser())}function Lt(e){H(this,e),this._state=t({inviteeEmail:"",invitedEmail:"",currentAction:{updatingUsers:!1,isComplete:!1,isError:!1,errorCode:null,responseData:null,type:"",role:""}},e.data),this._recompute({invitedEmail:1,currentAction:1,inviteeEmail:1,isAdmin:1,isTeamOwner:1,isValidEmail:1,inviteeExistsLoading:1,inviteeExists:1},this._state),this._intro=!0,this._handlers.state=[Ct],Ct.call(this,{changed:s({},this._state),current:this._state}),this._fragment=function(e,t){var s,i,r,a=!1;function o(){a=!0,e.set({inviteeEmail:i.value}),a=!1}var l={disabled:!t.isValidEmail,label:"<i class='fa "+(t.currentAction.updatingUsers?"fa-spin fa-circle-o-notch":"fa-envelope")+"'></i>  "+P("teams / invite"),items:t.inviteOptions},c=new bt({root:e.root,store:e.store,data:l}),d={label:P("teams / invite-user"),help:P("teams / invite-user / help"),success:t.successMessage,error:t.errorMessage},h=new Tt({root:e.root,store:e.store,slots:{default:u()},data:d});return{c(){s=m("div"),i=m("input"),r=p(" \n        "),c._fragment.c(),h._fragment.c(),v(i,"input",o),_(i,"type","text"),i.width="1px",i.placeholder=P("teams / invite-user / eg"),i.className="svelte-m6ws61",s.className="flex svelte-m6ws61"},m(e,a){n(h._slotted.default,s),n(s,i),i.value=t.inviteeEmail,n(s,r),c._mount(s,null),h._mount(e,a)},p(e,t){!a&&e.inviteeEmail&&(i.value=t.inviteeEmail);var s={};e.isValidEmail&&(s.disabled=!t.isValidEmail),e.currentAction&&(s.label="<i class='fa "+(t.currentAction.updatingUsers?"fa-spin fa-circle-o-notch":"fa-envelope")+"'></i>  "+P("teams / invite")),e.inviteOptions&&(s.items=t.inviteOptions),c._set(s);var n={};e.successMessage&&(n.success=t.successMessage),e.errorMessage&&(n.error=t.errorMessage),h._set(n)},d(e){g(i,"input",o),c.destroy(),h.destroy(e)}}}(this,this._state),this.root._oncreate.push(()=>{Ut.call(this),this.fire("update",{changed:s({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),E(this))}t(Lt.prototype,S),t(Lt.prototype,xt),Lt.prototype._recompute=function(e,t){(e.invitedEmail||e.currentAction)&&(this._differs(t.successMessage,t.successMessage=function({invitedEmail:e,currentAction:t}){const{isComplete:s,isError:n,type:i,role:r}=t;if(!s||n)return;return P(`teams / invite-user / ${i} / success`).replace("$1",(a=e,a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"))).replace("$2",P("teams / role / "+r));var a}(t))&&(e.successMessage=!0),this._differs(t.errorMessage,t.errorMessage=function({invitedEmail:e,currentAction:t}){const{isComplete:s,isError:n,errorCode:i,responseData:r,type:a}=t;if(!s||!n)return;const o=[400,401,406].includes(i)?i:"other",l=406===i&&r&&r.maxTeamInvites?r.maxTeamInvites:null;return P(`teams / invite-user / ${a} / error / ${o}`).replace("$1",e).replace("$2",l)}(t))&&(e.errorMessage=!0)),e.inviteeEmail&&this._differs(t.isValidEmail,t.isValidEmail=function({inviteeEmail:e}){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(t))&&(e.isValidEmail=!0),(e.isAdmin||e.isTeamOwner||e.isValidEmail||e.inviteeExistsLoading||e.inviteeExists)&&this._differs(t.inviteOptions,t.inviteOptions=function({isAdmin:e,isTeamOwner:t,isValidEmail:s,inviteeExistsLoading:n,inviteeExists:i}){const r=[{label:'<i class="fa fa-envelope"></i> &nbsp;...'+P("teams / role / member"),disabled:!s,action(){teamSettingsInvite.inviteUser("member")}},{label:'<i class="fa fa-envelope"></i> &nbsp;...'+P("teams / role / admin"),disabled:!s,action(){teamSettingsInvite.inviteUser("admin")}}];return(e||t)&&r.push({label:'<i class="fa fa-envelope"></i> &nbsp;...'+P("teams / role / owner"),disabled:!s,action(){teamSettingsInvite.inviteUser("owner")}}),e&&r.push({label:`<span class="red"><i class="fa ${n?"fa-spin fa-circle-o-notch":"fa-plus"}"></i> &nbsp;${P("teams / add-as").replace("%s",P("teams / role / member"))}</span>`,disabled:!i,action(){teamSettingsInvite.addUser("member")}},{label:`<span class="red"><i class="fa ${n?"fa-spin fa-circle-o-notch":"fa-plus"}"></i> &nbsp;${P("teams / add-as").replace("%s",P("teams / role / admin"))}</span>`,disabled:!i,action(){teamSettingsInvite.addUser("admin")}},{label:`<span class="red"><i class="fa ${n?"fa-spin fa-circle-o-notch":"fa-plus"}"></i> &nbsp;${P("teams / add-as").replace("%s",P("teams / role / owner"))}</span>`,disabled:!i,action(){teamSettingsInvite.addUser("owner")}}),r}(t))&&(e.inviteOptions=!0)};var At={updateUsers(){const{team:e}=this.get();this.set({awaitLoadingUsers:Ee.get(`/v3/teams/${e.id}/members?limit=1000`).then(e=>{this.set({users:e.list})}),awaitLoadingProducts:Ee.get(`/v3/teams/${e.id}/products`).then(e=>{this.set({products:e.list})})})}};function Et(){this.updateUsers()}function Mt({changed:e,current:t}){e.newRole&&t.newRole&&this.store.set({role:t.newRole})}function Ht(e,s){var n,a;let o={component:e,ctx:s,current:null,pending:$t,then:Ot,catch:It,value:"null",error:"null"};return x(a=s.awaitLoadingUsers,o),{c(){n=f(),o.block.c()},m(e,t){i(e,n,t),o.block.m(e,o.anchor=t),o.mount=()=>n.parentNode,o.anchor=n},p(e,n){s=n,o.ctx=s,"awaitLoadingUsers"in e&&a!==(a=s.awaitLoadingUsers)&&x(a,o)||o.block.p(e,t(t({},s),o.resolved))},d(e){e&&r(n),o.block.d(e),o=null}}}function It(t,s){var n;return{c(){n=p("error!")},m(e,t){i(e,n,t)},p:e,d(e){e&&r(n)}}}function Ot(e,t){var s={},n={isAdmin:t.isAdmin,isTeamOwner:t.isTeamOwner,isTeamAdmin:t.isTeamAdmin,team:t.team};void 0!==t.userId&&(n.userId=t.userId,s.userId=!0),void 0!==t.users&&(n.users=t.users,s.users=!0),void 0!==t.products&&(n.products=t.products,s.products=!0),void 0!==t.editIndex&&(n.editIndex=t.editIndex,s.editIndex=!0),void 0!==t.updating&&(n.updating=t.updating,s.updating=!0);var i=new it({root:e.root,store:e.store,data:n,_bind(t,n){var i={};!s.userId&&t.userId&&(i.userId=n.userId),!s.users&&t.users&&(i.users=n.users),!s.products&&t.products&&(i.products=n.products),!s.editIndex&&t.editIndex&&(i.editIndex=n.editIndex),!s.updating&&t.updating&&(i.updating=n.updating),e._set(i),s={}}});return e.root._beforecreate.push(()=>{i._bind({userId:1,users:1,products:1,editIndex:1,updating:1},i.get())}),i.on("updateUsers",(function(t){e.updateUsers()})),{c(){i._fragment.c()},m(e,t){i._mount(e,t)},p(e,n){t=n;var r={};e.isAdmin&&(r.isAdmin=t.isAdmin),e.isTeamOwner&&(r.isTeamOwner=t.isTeamOwner),e.isTeamAdmin&&(r.isTeamAdmin=t.isTeamAdmin),e.team&&(r.team=t.team),!s.userId&&e.userId&&(r.userId=t.userId,s.userId=void 0!==t.userId),!s.users&&e.users&&(r.users=t.users,s.users=void 0!==t.users),!s.products&&e.products&&(r.products=t.products,s.products=void 0!==t.products),!s.editIndex&&e.editIndex&&(r.editIndex=t.editIndex,s.editIndex=void 0!==t.editIndex),!s.updating&&e.updating&&(r.updating=t.updating,s.updating=void 0!==t.updating),i._set(r),s={}},d(e){i.destroy(e)}}}function $t(t,s){var a,o,l,c,d=P("teams / loading");return{c(){a=m("p"),o=m("i"),l=p("   "),c=m("noscript"),o.className="fa fa-circle-o-notch fa-spin"},m(e,t){i(e,a,t),n(a,o),n(a,l),n(a,c),c.insertAdjacentHTML("afterend",d)},p:e,d(e){e&&r(a)}}}function St(e){H(this,e),this._state=t(t(this.store._init(["role"]),{editIndex:0,updating:{},updatingUsers:!1,awaitLoadingUsers:!1,products:[]}),e.data),this.store._add(this,["role"]),this._recompute({users:1,userId:1,$role:1},this._state),this._intro=!0,this._handlers.state=[Mt],this._handlers.destroy=[$],Mt.call(this,{changed:s({},this._state),current:this._state}),this._fragment=function(e,t){var s,a,o,l,c,d,u,h,v,g,_,b,w,y,N,T,x,U,C,L,A,E,M,H,I,O,$,S,j,B,R,q,z,D,V,F,W,G,J,Z,K,X,Q,Y,ee,te,se,ne,ie,re,ae,oe,le,ce,de,ue,me,he,pe,fe,ve,ge,_e,be,we,ke,ye,Ne,Te,xe,Ue,Ce,Le,Ae=P("teams / p"),Ee={},Me=P("teams / role / member"),He=P("teams / role / admin"),Ie=P("teams / role / owner"),Oe=P("teams / roles / edit-charts"),$e=P("teams / roles / edit-folders"),Se=P("teams / roles / access-settings"),je=P("teams / roles / invite-users"),Be=P("teams / roles / subscription-options"),Re=P("teams / roles / remove-team"),qe={isTeamOwner:t.isTeamOwner,isAdmin:t.isAdmin};void 0!==t.team&&(qe.team=t.team,Ee.team=!0),void 0!==t.updatingUsers&&(qe.updatingUsers=t.updatingUsers,Ee.updatingUsers=!0);var ze=new Lt({root:e.root,store:e.store,data:qe,_bind(t,s){var n={};!Ee.team&&t.team&&(n.team=s.team),!Ee.updatingUsers&&t.updatingUsers&&(n.updatingUsers=s.updatingUsers),e._set(n),Ee={}}});e.root._beforecreate.push(()=>{ze._bind({team:1,updatingUsers:1},ze.get())}),ze.on("updateUsers",(function(t){e.updateUsers()}));var De=t.awaitLoadingUsers&&Ht(e,t);return{c(){s=m("p"),a=p("\n\n"),o=m("div"),l=m("div"),ze._fragment.c(),c=p("\n    "),d=m("div"),u=m("table"),h=m("thead"),v=m("tr"),g=m("td"),_=p("\n                    "),b=m("th"),w=p("\n                    "),y=m("th"),N=p("\n                    "),T=m("th"),x=p("\n            "),U=m("tbody"),C=m("tr"),L=m("td"),A=p("\n                    "),(E=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',M=p("\n                    "),(H=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',I=p("\n                    "),(O=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',$=p("\n\n                "),S=m("tr"),j=m("td"),B=p("\n                    "),(R=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',q=p("\n                    "),(z=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',D=p("\n                    "),(V=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',F=p("\n\n                "),W=m("tr"),G=m("td"),J=p("\n                    "),(Z=m("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',K=p("\n                    "),(X=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',Q=p("\n                    "),(Y=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',ee=p("\n\n                "),te=m("tr"),se=m("td"),ne=p("\n                    "),(ie=m("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',re=p("\n                    "),(ae=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',oe=p("\n                    "),(le=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',ce=p("\n\n                "),de=m("tr"),ue=m("td"),me=p("\n                    "),(he=m("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',pe=p("\n                    "),(fe=m("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',ve=p("\n                    "),(ge=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',_e=p("\n\n                "),be=m("tr"),we=m("td"),ke=p("\n                    "),(ye=m("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',Ne=p("\n                    "),(Te=m("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',xe=p("\n                    "),(Ue=m("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',Ce=p("\n\n"),De&&De.c(),Le=f(),k(s,"margin-bottom","10px"),l.className="span4",g.className="svelte-hgmegl",b.className="svelte-hgmegl",y.className="svelte-hgmegl",T.className="svelte-hgmegl",L.className="svelte-hgmegl",E.className="svelte-hgmegl",H.className="svelte-hgmegl",O.className="svelte-hgmegl",j.className="svelte-hgmegl",R.className="svelte-hgmegl",z.className="svelte-hgmegl",V.className="svelte-hgmegl",G.className="svelte-hgmegl",Z.className="svelte-hgmegl",X.className="svelte-hgmegl",Y.className="svelte-hgmegl",se.className="svelte-hgmegl",ie.className="svelte-hgmegl",ae.className="svelte-hgmegl",le.className="svelte-hgmegl",ue.className="svelte-hgmegl",he.className="svelte-hgmegl",fe.className="svelte-hgmegl",ge.className="svelte-hgmegl",we.className="svelte-hgmegl",ye.className="svelte-hgmegl",Te.className="svelte-hgmegl",Ue.className="svelte-hgmegl",U.className="svelte-hgmegl",u.className="role-descriptions svelte-hgmegl",k(u,"margin-left","3em"),d.className="span6",o.className="row",k(o,"margin-bottom","2em")},m(e,t){i(e,s,t),s.innerHTML=Ae,i(e,a,t),i(e,o,t),n(o,l),ze._mount(l,null),n(o,c),n(o,d),n(d,u),n(u,h),n(h,v),n(v,g),n(v,_),n(v,b),b.innerHTML=Me,n(v,w),n(v,y),y.innerHTML=He,n(v,N),n(v,T),T.innerHTML=Ie,n(u,x),n(u,U),n(U,C),n(C,L),L.innerHTML=Oe,n(C,A),n(C,E),n(C,M),n(C,H),n(C,I),n(C,O),n(U,$),n(U,S),n(S,j),j.innerHTML=$e,n(S,B),n(S,R),n(S,q),n(S,z),n(S,D),n(S,V),n(U,F),n(U,W),n(W,G),G.innerHTML=Se,n(W,J),n(W,Z),n(W,K),n(W,X),n(W,Q),n(W,Y),n(U,ee),n(U,te),n(te,se),se.innerHTML=je,n(te,ne),n(te,ie),n(te,re),n(te,ae),n(te,oe),n(te,le),n(U,ce),n(U,de),n(de,ue),ue.innerHTML=Be,n(de,me),n(de,he),n(de,pe),n(de,fe),n(de,ve),n(de,ge),n(U,_e),n(U,be),n(be,we),we.innerHTML=Re,n(be,ke),n(be,ye),n(be,Ne),n(be,Te),n(be,xe),n(be,Ue),i(e,Ce,t),De&&De.m(e,t),i(e,Le,t)},p(s,n){t=n;var i={};s.isTeamOwner&&(i.isTeamOwner=t.isTeamOwner),s.isAdmin&&(i.isAdmin=t.isAdmin),!Ee.team&&s.team&&(i.team=t.team,Ee.team=void 0!==t.team),!Ee.updatingUsers&&s.updatingUsers&&(i.updatingUsers=t.updatingUsers,Ee.updatingUsers=void 0!==t.updatingUsers),ze._set(i),Ee={},t.awaitLoadingUsers?De?De.p(s,t):((De=Ht(e,t)).c(),De.m(Le.parentNode,Le)):De&&(De.d(1),De=null)},d(e){e&&(r(s),r(a),r(o)),ze.destroy(),e&&r(Ce),De&&De.d(e),e&&r(Le)}}}(this,this._state),this.root._oncreate.push(()=>{Et.call(this),this.fire("update",{changed:s({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),E(this))}function jt(e,s){this._handlers={},this._dependents=[],this._computed=U(),this._sortedComputedProperties=[],this._state=t({},e),this._differs=s&&s.immutable?L:C}t(St.prototype,S),t(St.prototype,At),St.prototype._recompute=function(e,t){(e.users||e.userId)&&this._differs(t.newRole,t.newRole=function({users:e,userId:t}){if(!e||!e.length||!t)return!1;const s=e.find(e=>e.id===t);return s?s.role:"admin"}(t))&&(e.newRole=!0),e.$role&&(this._differs(t.isTeamOwner,t.isTeamOwner=function({$role:e}){return"owner"===e}(t))&&(e.isTeamOwner=!0),this._differs(t.isTeamAdmin,t.isTeamAdmin=function({$role:e}){return"admin"===e}(t))&&(e.isTeamAdmin=!0))},t(jt.prototype,{_add(e,t){this._dependents.push({component:e,props:t})},_init(e){const t={};for(let s=0;s<e.length;s+=1){const n=e[s];t["$"+n]=this._state[n]}return t},_remove(e){let t=this._dependents.length;for(;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set(e,s){const n=this._state;this._state=t(t({},n),e);for(let e=0;e<this._sortedComputedProperties.length;e+=1)this._sortedComputedProperties[e].update(this._state,s);this.fire("state",{changed:s,previous:n,current:this._state}),this._dependents.filter(e=>{const t={};let n=!1;for(let i=0;i<e.props.length;i+=1){const r=e.props[i];r in s&&(t["$"+r]=this._state[r],n=!0)}if(n)return e.component._stage(t),!0}).forEach(e=>{e.component.set({})}),this.fire("update",{changed:s,previous:n,current:this._state})},_sortComputedProperties(){const e=this._computed,t=this._sortedComputedProperties=[],s=U();let n;function i(r){const a=e[r];a&&(a.deps.forEach(e=>{if(e===n)throw new Error(`Cyclical dependency detected between ${e} <-> ${r}`);i(e)}),s[r]||(s[r]=!0,t.push(a)))}for(const e in this._computed)i(n=e)},compute(e,s,n){let i;const r={deps:s,update:(t,r,a)=>{const o=s.map(e=>(e in r&&(a=!0),t[e]));if(a){const s=n.apply(null,o);this._differs(s,i)&&(i=s,r[e]=!0,t[e]=i)}}};this._computed[e]=r,this._sortComputedProperties();const a=t({},this._state),o={};r.update(a,o,!0),this._set(a,o)},fire:A,get:M,on:I,set(e){const t=this._state,s=this._changed={};let n=!1;for(const i in e){if(this._computed[i])throw new Error(`'${i}' is a read-only computed property`);this._differs(e[i],t[i])&&(s[i]=n=!0)}n&&this._set(e,s)}});return{App:St,store:new jt({})}}));
