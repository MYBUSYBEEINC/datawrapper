!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("cm/lib/codemirror"),require("cm/mode/javascript/javascript"),require("cm/addon/mode/simple"),require("cm/addon/hint/show-hint"),require("cm/addon/edit/matchbrackets"),require("cm/addon/display/placeholder"),require("@datawrapper/controls/HelpDisplay.html"),require("@datawrapper/controls/CheckboxControl.html"),require("@datawrapper/controls/SelectControl.html"),require("Handsontable"),require("dayjs"),require("@datawrapper/controls/DropdownInput.html"),require("@datawrapper/controls/editor/LocaleSelectInput.html")):"function"==typeof define&&define.amd?define("svelte/describe",["cm/lib/codemirror","cm/mode/javascript/javascript","cm/addon/mode/simple","cm/addon/hint/show-hint","cm/addon/edit/matchbrackets","cm/addon/display/placeholder","@datawrapper/controls/HelpDisplay.html","@datawrapper/controls/CheckboxControl.html","@datawrapper/controls/SelectControl.html","Handsontable","dayjs","@datawrapper/controls/DropdownInput.html","@datawrapper/controls/editor/LocaleSelectInput.html"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).describe=e(t.CodeMirror,null,null,null,null,null,t.HelpDisplay,t.CheckboxControl,t.SelectControl,t.HOT,t.dayjs,t.DropdownInput,t.LocaleSelectInput)}(this,(function(t,e,n,r,o,a,i,s,u,c,l,f,h){"use strict";function p(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=p(t),m=p(i),v=p(s),g=p(u),y=p(c),b=p(l),w=p(f),_=p(h);function x(){}function N(t,e){for(var n in e)t[n]=e[n];return t}function E(t,e){for(var n in e)t[n]=1;return t}function M(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n)}function C(t){t.parentNode.removeChild(t)}function k(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(){return document.createDocumentFragment()}function T(t){return document.createElement(t)}function S(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function R(t){return document.createTextNode(t)}function D(){return document.createComment("")}function I(t,e,n,r){t.addEventListener(e,n,r)}function L(t,e,n,r){t.removeEventListener(e,n,r)}function j(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function F(t,e){t.data=""+e}function P(t,e,n){t.style.setProperty(e,n)}function H(t,e,n){t.classList[n?"add":"remove"](e)}function $(){return Object.create(null)}function U(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function B(t,e){return t!=t?e==e:t!==e}function z(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var o=n[r];if(!o.__calling)try{o.__calling=!0,o.call(this,e)}finally{o.__calling=!1}}}function V(t){t._lock=!0,G(t._beforecreate),G(t._oncreate),G(t._aftercreate),t._lock=!1}function Y(){return this._state}function q(t,e){t._handlers=$(),t._slots=$(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function W(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function G(t){for(;t&&t.length;)t.shift()()}function K(){this.store._remove(this)}var X={destroy:function(t){this.destroy=x,this.fire("destroy"),this.set=x,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:Y,fire:z,on:W,set:function(t){this._set(N({},t)),this.root._lock||V(this.root)},_recompute:x,_set:function(t){var e=this._state,n={},r=!1;for(var o in t=N(this._staged,t),this._staged={},t)this._differs(t[o],e[o])&&(n[o]=r=!0);r&&(this._state=N(N({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_stage:function(t){N(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:U},J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Z(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var Q=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},tt="object"==typeof J&&J&&J.Object===Object&&J,et=tt,nt="object"==typeof self&&self&&self.Object===Object&&self,rt=et||nt||Function("return this")(),ot=rt,at=function(){return ot.Date.now()},it=/\s/;var st=function(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e},ut=/^\s+/;var ct=function(t){return t?t.slice(0,st(t)+1).replace(ut,""):t},lt=rt.Symbol,ft=lt,ht=Object.prototype,pt=ht.hasOwnProperty,dt=ht.toString,mt=ft?ft.toStringTag:void 0;var vt=function(t){var e=pt.call(t,mt),n=t[mt];try{t[mt]=void 0;var r=!0}catch(t){}var o=dt.call(t);return r&&(e?t[mt]=n:delete t[mt]),o},gt=Object.prototype.toString;var yt=vt,bt=function(t){return gt.call(t)},wt=lt?lt.toStringTag:void 0;var _t=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":wt&&wt in Object(t)?yt(t):bt(t)};var xt=function(t){return null!=t&&"object"==typeof t},Nt=_t,Et=xt;var Mt=function(t){return"symbol"==typeof t||Et(t)&&"[object Symbol]"==Nt(t)},At=ct,Ct=Q,kt=Mt,Ot=/^[-+]0x[0-9a-f]+$/i,Tt=/^0b[01]+$/i,St=/^0o[0-7]+$/i,Rt=parseInt;var Dt=function(t){if("number"==typeof t)return t;if(kt(t))return NaN;if(Ct(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ct(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=At(t);var n=Tt.test(t);return n||St.test(t)?Rt(t.slice(2),n?2:8):Ot.test(t)?NaN:+t},It=Q,Lt=at,jt=Dt,Ft=Math.max,Pt=Math.min;var Ht=function(t,e,n){var r,o,a,i,s,u,c=0,l=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,a=o;return r=o=void 0,c=e,i=t.apply(a,n)}function d(t){return c=t,s=setTimeout(v,e),l?p(t):i}function m(t){var n=t-u;return void 0===u||n>=e||n<0||f&&t-c>=a}function v(){var t=Lt();if(m(t))return g(t);s=setTimeout(v,function(t){var n=e-(t-u);return f?Pt(n,a-(t-c)):n}(t))}function g(t){return s=void 0,h&&r?p(t):(r=o=void 0,i)}function y(){var t=Lt(),n=m(t);if(r=arguments,o=this,u=t,n){if(void 0===s)return d(u);if(f)return clearTimeout(s),s=setTimeout(v,e),p(u)}return void 0===s&&(s=setTimeout(v,e)),i}return e=jt(e)||0,It(n)&&(l=!!n.leading,a=(f="maxWait"in n)?Ft(jt(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},y.flush=function(){return void 0===s?i:g(Lt())},y},$t=_t,Ut=Q;var Bt,zt=function(t){if(!Ut(t))return!1;var e=$t(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Vt=rt["__core-js_shared__"],Yt=(Bt=/[^.]+$/.exec(Vt&&Vt.keys&&Vt.keys.IE_PROTO||""))?"Symbol(src)_1."+Bt:"";var qt=function(t){return!!Yt&&Yt in t},Wt=Function.prototype.toString;var Gt=function(t){if(null!=t){try{return Wt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Kt=zt,Xt=qt,Jt=Q,Zt=Gt,Qt=/^\[object .+?Constructor\]$/,te=Function.prototype,ee=Object.prototype,ne=te.toString,re=ee.hasOwnProperty,oe=RegExp("^"+ne.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ae=function(t){return!(!Jt(t)||Xt(t))&&(Kt(t)?oe:Qt).test(Zt(t))},ie=function(t,e){return null==t?void 0:t[e]};var se=function(t,e){var n=ie(t,e);return ae(n)?n:void 0},ue=se,ce=function(){try{var t=ue(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var le=function(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var fe=function(t,e,n,r){for(var o=-1,a=null==t?0:t.length;++o<a;){var i=t[o];e(r,i,n(i),t)}return r};var he=function(t){return function(e,n,r){for(var o=-1,a=Object(e),i=r(e),s=i.length;s--;){var u=i[t?s:++o];if(!1===n(a[u],u,a))break}return e}}();var pe=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},de=_t,me=xt;var ve=function(t){return me(t)&&"[object Arguments]"==de(t)},ge=xt,ye=Object.prototype,be=ye.hasOwnProperty,we=ye.propertyIsEnumerable,_e=ve(function(){return arguments}())?ve:function(t){return ge(t)&&be.call(t,"callee")&&!we.call(t,"callee")},xe=Array.isArray,Ne={exports:{}};var Ee=function(){return!1};!function(t,e){var n=rt,r=Ee,o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,i=a&&a.exports===o?n.Buffer:void 0,s=(i?i.isBuffer:void 0)||r;t.exports=s}(Ne,Ne.exports);var Me=/^(?:0|[1-9]\d*)$/;var Ae=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Me.test(t))&&t>-1&&t%1==0&&t<e};var Ce=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ke=_t,Oe=Ce,Te=xt,Se={};Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se["[object Arguments]"]=Se["[object Array]"]=Se["[object ArrayBuffer]"]=Se["[object Boolean]"]=Se["[object DataView]"]=Se["[object Date]"]=Se["[object Error]"]=Se["[object Function]"]=Se["[object Map]"]=Se["[object Number]"]=Se["[object Object]"]=Se["[object RegExp]"]=Se["[object Set]"]=Se["[object String]"]=Se["[object WeakMap]"]=!1;var Re=function(t){return Te(t)&&Oe(t.length)&&!!Se[ke(t)]};var De=function(t){return function(e){return t(e)}},Ie={exports:{}};!function(t,e){var n=tt,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,a=o&&o.exports===r&&n.process,i=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=i}(Ie,Ie.exports);var Le=Re,je=De,Fe=Ie.exports,Pe=Fe&&Fe.isTypedArray,He=Pe?je(Pe):Le,$e=pe,Ue=_e,Be=xe,ze=Ne.exports,Ve=Ae,Ye=He,qe=Object.prototype.hasOwnProperty;var We=function(t,e){var n=Be(t),r=!n&&Ue(t),o=!n&&!r&&ze(t),a=!n&&!r&&!o&&Ye(t),i=n||r||o||a,s=i?$e(t.length,String):[],u=s.length;for(var c in t)!e&&!qe.call(t,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ve(c,u))||s.push(c);return s},Ge=Object.prototype;var Ke=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ge)};var Xe=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Je=Ke,Ze=Xe,Qe=Object.prototype.hasOwnProperty;var tn=zt,en=Ce;var nn=function(t){return null!=t&&en(t.length)&&!tn(t)},rn=We,on=function(t){if(!Je(t))return Ze(t);var e=[];for(var n in Object(t))Qe.call(t,n)&&"constructor"!=n&&e.push(n);return e},an=nn;var sn=function(t){return an(t)?rn(t):on(t)},un=he,cn=sn;var ln=nn;var fn=function(t,e){return function(n,r){if(null==n)return n;if(!ln(n))return t(n,r);for(var o=n.length,a=e?o:-1,i=Object(n);(e?a--:++a<o)&&!1!==r(i[a],a,i););return n}}((function(t,e){return t&&un(t,e,cn)}));var hn=function(t,e,n,r){return fn(t,(function(t,o,a){e(r,t,n(t),a)})),r};var pn=function(){this.__data__=[],this.size=0};var dn=function(t,e){return t===e||t!=t&&e!=e},mn=dn;var vn=function(t,e){for(var n=t.length;n--;)if(mn(t[n][0],e))return n;return-1},gn=vn,yn=Array.prototype.splice;var bn=vn;var wn=vn;var _n=vn;var xn=pn,Nn=function(t){var e=this.__data__,n=gn(e,t);return!(n<0)&&(n==e.length-1?e.pop():yn.call(e,n,1),--this.size,!0)},En=function(t){var e=this.__data__,n=bn(e,t);return n<0?void 0:e[n][1]},Mn=function(t){return wn(this.__data__,t)>-1},An=function(t,e){var n=this.__data__,r=_n(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Cn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Cn.prototype.clear=xn,Cn.prototype.delete=Nn,Cn.prototype.get=En,Cn.prototype.has=Mn,Cn.prototype.set=An;var kn=Cn,On=kn;var Tn=function(){this.__data__=new On,this.size=0};var Sn=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Rn=function(t){return this.__data__.get(t)};var Dn=function(t){return this.__data__.has(t)},In=se(rt,"Map"),Ln=se(Object,"create"),jn=Ln;var Fn=function(){this.__data__=jn?jn(null):{},this.size=0};var Pn=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn=Ln,$n=Object.prototype.hasOwnProperty;var Un=function(t){var e=this.__data__;if(Hn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return $n.call(e,t)?e[t]:void 0},Bn=Ln,zn=Object.prototype.hasOwnProperty;var Vn=Ln;var Yn=Fn,qn=Pn,Wn=Un,Gn=function(t){var e=this.__data__;return Bn?void 0!==e[t]:zn.call(e,t)},Kn=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Vn&&void 0===e?"__lodash_hash_undefined__":e,this};function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xn.prototype.clear=Yn,Xn.prototype.delete=qn,Xn.prototype.get=Wn,Xn.prototype.has=Gn,Xn.prototype.set=Kn;var Jn=Xn,Zn=kn,Qn=In;var tr=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var er=function(t,e){var n=t.__data__;return tr(e)?n["string"==typeof e?"string":"hash"]:n.map},nr=er;var rr=er;var or=er;var ar=er;var ir=function(){this.size=0,this.__data__={hash:new Jn,map:new(Qn||Zn),string:new Jn}},sr=function(t){var e=nr(this,t).delete(t);return this.size-=e?1:0,e},ur=function(t){return rr(this,t).get(t)},cr=function(t){return or(this,t).has(t)},lr=function(t,e){var n=ar(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function fr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fr.prototype.clear=ir,fr.prototype.delete=sr,fr.prototype.get=ur,fr.prototype.has=cr,fr.prototype.set=lr;var hr=fr,pr=kn,dr=In,mr=hr;var vr=kn,gr=Tn,yr=Sn,br=Rn,wr=Dn,_r=function(t,e){var n=this.__data__;if(n instanceof pr){var r=n.__data__;if(!dr||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mr(r)}return n.set(t,e),this.size=n.size,this};function xr(t){var e=this.__data__=new vr(t);this.size=e.size}xr.prototype.clear=gr,xr.prototype.delete=yr,xr.prototype.get=br,xr.prototype.has=wr,xr.prototype.set=_r;var Nr=xr;var Er=hr,Mr=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ar=function(t){return this.__data__.has(t)};function Cr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Er;++e<n;)this.add(t[e])}Cr.prototype.add=Cr.prototype.push=Mr,Cr.prototype.has=Ar;var kr=Cr,Or=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Tr=function(t,e){return t.has(e)};var Sr=function(t,e,n,r,o,a){var i=1&n,s=t.length,u=e.length;if(s!=u&&!(i&&u>s))return!1;var c=a.get(t),l=a.get(e);if(c&&l)return c==e&&l==t;var f=-1,h=!0,p=2&n?new kr:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var d=t[f],m=e[f];if(r)var v=i?r(m,d,f,e,t,a):r(d,m,f,t,e,a);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!Or(e,(function(t,e){if(!Tr(p,e)&&(d===t||o(d,t,n,r,a)))return p.push(e)}))){h=!1;break}}else if(d!==m&&!o(d,m,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h};var Rr=rt.Uint8Array,Dr=dn,Ir=Sr,Lr=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},jr=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Fr=lt?lt.prototype:void 0,Pr=Fr?Fr.valueOf:void 0;var Hr=function(t,e,n,r,o,a,i){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new Rr(t),new Rr(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Dr(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Lr;case"[object Set]":var u=1&r;if(s||(s=jr),t.size!=e.size&&!u)return!1;var c=i.get(t);if(c)return c==e;r|=2,i.set(t,e);var l=Ir(s(t),s(e),r,o,a,i);return i.delete(t),l;case"[object Symbol]":if(Pr)return Pr.call(t)==Pr.call(e)}return!1};var $r=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},Ur=xe;var Br=function(t,e,n){var r=e(t);return Ur(t)?r:$r(r,n(t))};var zr=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,a=[];++n<r;){var i=t[n];e(i,n,t)&&(a[o++]=i)}return a},Vr=function(){return[]},Yr=Object.prototype.propertyIsEnumerable,qr=Object.getOwnPropertySymbols,Wr=Br,Gr=qr?function(t){return null==t?[]:(t=Object(t),zr(qr(t),(function(e){return Yr.call(t,e)})))}:Vr,Kr=sn;var Xr=function(t){return Wr(t,Kr,Gr)},Jr=Object.prototype.hasOwnProperty;var Zr=function(t,e,n,r,o,a){var i=1&n,s=Xr(t),u=s.length;if(u!=Xr(e).length&&!i)return!1;for(var c=u;c--;){var l=s[c];if(!(i?l in e:Jr.call(e,l)))return!1}var f=a.get(t),h=a.get(e);if(f&&h)return f==e&&h==t;var p=!0;a.set(t,e),a.set(e,t);for(var d=i;++c<u;){var m=t[l=s[c]],v=e[l];if(r)var g=i?r(v,m,l,e,t,a):r(m,v,l,t,e,a);if(!(void 0===g?m===v||o(m,v,n,r,a):g)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(t),a.delete(e),p},Qr=se(rt,"DataView"),to=In,eo=se(rt,"Promise"),no=se(rt,"Set"),ro=se(rt,"WeakMap"),oo=_t,ao=Gt,io=ao(Qr),so=ao(to),uo=ao(eo),co=ao(no),lo=ao(ro),fo=oo;(Qr&&"[object DataView]"!=fo(new Qr(new ArrayBuffer(1)))||to&&"[object Map]"!=fo(new to)||eo&&"[object Promise]"!=fo(eo.resolve())||no&&"[object Set]"!=fo(new no)||ro&&"[object WeakMap]"!=fo(new ro))&&(fo=function(t){var e=oo(t),n="[object Object]"==e?t.constructor:void 0,r=n?ao(n):"";if(r)switch(r){case io:return"[object DataView]";case so:return"[object Map]";case uo:return"[object Promise]";case co:return"[object Set]";case lo:return"[object WeakMap]"}return e});var ho=Nr,po=Sr,mo=Hr,vo=Zr,go=fo,yo=xe,bo=Ne.exports,wo=He,_o="[object Object]",xo=Object.prototype.hasOwnProperty;var No=function(t,e,n,r,o,a){var i=yo(t),s=yo(e),u=i?"[object Array]":go(t),c=s?"[object Array]":go(e),l=(u="[object Arguments]"==u?_o:u)==_o,f=(c="[object Arguments]"==c?_o:c)==_o,h=u==c;if(h&&bo(t)){if(!bo(e))return!1;i=!0,l=!1}if(h&&!l)return a||(a=new ho),i||wo(t)?po(t,e,n,r,o,a):mo(t,e,u,n,r,o,a);if(!(1&n)){var p=l&&xo.call(t,"__wrapped__"),d=f&&xo.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,v=d?e.value():e;return a||(a=new ho),o(m,v,n,r,a)}}return!!h&&(a||(a=new ho),vo(t,e,n,r,o,a))},Eo=xt;var Mo=function t(e,n,r,o,a){return e===n||(null==e||null==n||!Eo(e)&&!Eo(n)?e!=e&&n!=n:No(e,n,r,o,t,a))},Ao=Nr,Co=Mo;var ko=Q;var Oo=function(t){return t==t&&!ko(t)},To=Oo,So=sn;var Ro=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}},Do=function(t,e,n,r){var o=n.length,a=o,i=!r;if(null==t)return!a;for(t=Object(t);o--;){var s=n[o];if(i&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<a;){var u=(s=n[o])[0],c=t[u],l=s[1];if(i&&s[2]){if(void 0===c&&!(u in t))return!1}else{var f=new Ao;if(r)var h=r(c,l,u,t,e,f);if(!(void 0===h?Co(l,c,3,r,f):h))return!1}}return!0},Io=function(t){for(var e=So(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,To(o)]}return e},Lo=Ro;var jo=function(t){var e=Io(t);return 1==e.length&&e[0][2]?Lo(e[0][0],e[0][1]):function(n){return n===t||Do(n,t,e)}},Fo=xe,Po=Mt,Ho=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$o=/^\w*$/;var Uo=function(t,e){if(Fo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Po(t))||($o.test(t)||!Ho.test(t)||null!=e&&t in Object(e))},Bo=hr;function zo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=t.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(zo.Cache||Bo),n}zo.Cache=Bo;var Vo=zo;var Yo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qo=/\\(\\)?/g,Wo=function(t){var e=Vo(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Yo,(function(t,n,r,o){e.push(r?o.replace(qo,"$1"):n||t)})),e}));var Go=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o},Ko=xe,Xo=Mt,Jo=lt?lt.prototype:void 0,Zo=Jo?Jo.toString:void 0;var Qo=function t(e){if("string"==typeof e)return e;if(Ko(e))return Go(e,t)+"";if(Xo(e))return Zo?Zo.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};var ta=xe,ea=Uo,na=Wo,ra=function(t){return null==t?"":Qo(t)};var oa=function(t,e){return ta(t)?t:ea(t,e)?[t]:na(ra(t))},aa=Mt;var ia=function(t){if("string"==typeof t||aa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},sa=oa,ua=ia;var ca=function(t,e){for(var n=0,r=(e=sa(e,t)).length;null!=t&&n<r;)t=t[ua(e[n++])];return n&&n==r?t:void 0},la=ca;var fa=oa,ha=_e,pa=xe,da=Ae,ma=Ce,va=ia;var ga=function(t,e){return null!=t&&e in Object(t)},ya=function(t,e,n){for(var r=-1,o=(e=fa(e,t)).length,a=!1;++r<o;){var i=va(e[r]);if(!(a=null!=t&&n(t,i)))break;t=t[i]}return a||++r!=o?a:!!(o=null==t?0:t.length)&&ma(o)&&da(i,o)&&(pa(t)||ha(t))};var ba=Mo,wa=function(t,e,n){var r=null==t?void 0:la(t,e);return void 0===r?n:r},_a=function(t,e){return null!=t&&ya(t,e,ga)},xa=Uo,Na=Oo,Ea=Ro,Ma=ia;var Aa=ca;var Ca=function(t){return function(e){return null==e?void 0:e[t]}},ka=function(t){return function(e){return Aa(e,t)}},Oa=Uo,Ta=ia;var Sa=jo,Ra=function(t,e){return xa(t)&&Na(e)?Ea(Ma(t),e):function(n){var r=wa(n,t);return void 0===r&&r===e?_a(n,t):ba(e,r,3)}},Da=function(t){return t},Ia=xe,La=function(t){return Oa(t)?Ca(Ta(t)):ka(t)};var ja=fe,Fa=hn,Pa=function(t){return"function"==typeof t?t:null==t?Da:"object"==typeof t?Ia(t)?Ra(t[0],t[1]):Sa(t):La(t)},Ha=xe;var $a=function(t,e){return function(n,r){var o=Ha(n)?ja:Fa,a=e?e():{};return o(n,t,Pa(r),a)}},Ua=le,Ba=$a,za=Object.prototype.hasOwnProperty,Va=Ba((function(t,e,n){za.call(t,n)?t[n].push(e):Ua(t,n,[e])}));var Ya=function(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}},qa={};
/*! @license DOMPurify 2.4.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.0/LICENSE */
function Wa(t){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ga(t,e){return(Ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ka(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Xa(t,e,n){return(Xa=Ka()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Ga(o,n.prototype),o}).apply(null,arguments)}function Ja(t){return function(t){if(Array.isArray(t))return Za(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Za(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Za(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qa=Object.hasOwnProperty,ti=Object.setPrototypeOf,ei=Object.isFrozen,ni=Object.getPrototypeOf,ri=Object.getOwnPropertyDescriptor,oi=Object.freeze,ai=Object.seal,ii=Object.create,si="undefined"!=typeof Reflect&&Reflect,ui=si.apply,ci=si.construct;ui||(ui=function(t,e,n){return t.apply(e,n)}),oi||(oi=function(t){return t}),ai||(ai=function(t){return t}),ci||(ci=function(t,e){return Xa(t,Ja(e))});var li,fi=_i(Array.prototype.forEach),hi=_i(Array.prototype.pop),pi=_i(Array.prototype.push),di=_i(String.prototype.toLowerCase),mi=_i(String.prototype.match),vi=_i(String.prototype.replace),gi=_i(String.prototype.indexOf),yi=_i(String.prototype.trim),bi=_i(RegExp.prototype.test),wi=(li=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ci(li,e)});function _i(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return ui(t,e,r)}}function xi(t,e,n){n=n||di,ti&&ti(t,null);for(var r=e.length;r--;){var o=e[r];if("string"==typeof o){var a=n(o);a!==o&&(ei(e)||(e[r]=a),o=a)}t[o]=!0}return t}function Ni(t){var e,n=ii(null);for(e in t)ui(Qa,t,[e])&&(n[e]=t[e]);return n}function Ei(t,e){for(;null!==t;){var n=ri(t,e);if(n){if(n.get)return _i(n.get);if("function"==typeof n.value)return _i(n.value)}t=ni(t)}return function(t){return console.warn("fallback value for",t),null}}var Mi=oi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ai=oi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ci=oi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ki=oi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Oi=oi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ti=oi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Si=oi(["#text"]),Ri=oi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Di=oi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ii=oi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Li=oi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ji=ai(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Fi=ai(/<%[\w\W]*|[\w\W]*%>/gm),Pi=ai(/^data-[\-\w.\u00B7-\uFFFF]/),Hi=ai(/^aria-[\-\w]+$/),$i=ai(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ui=ai(/^(?:\w+script|data):/i),Bi=ai(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zi=ai(/^html$/i),Vi=function(){return"undefined"==typeof window?null:window},Yi=function(t,e){if("object"!==Wa(t)||"function"!=typeof t.createPolicy)return null;var n=null;e.currentScript&&e.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=e.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};var qi=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi(),n=function(e){return t(e)};if(n.version="2.4.0",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,a=e.DocumentFragment,i=e.HTMLTemplateElement,s=e.Node,u=e.Element,c=e.NodeFilter,l=e.NamedNodeMap,f=void 0===l?e.NamedNodeMap||e.MozNamedAttrMap:l,h=e.HTMLFormElement,p=e.DOMParser,d=e.trustedTypes,m=u.prototype,v=Ei(m,"cloneNode"),g=Ei(m,"nextSibling"),y=Ei(m,"childNodes"),b=Ei(m,"parentNode");if("function"==typeof i){var w=o.createElement("template");w.content&&w.content.ownerDocument&&(o=w.content.ownerDocument)}var _=Yi(d,r),x=_?_.createHTML(""):"",N=o,E=N.implementation,M=N.createNodeIterator,A=N.createDocumentFragment,C=N.getElementsByTagName,k=r.importNode,O={};try{O=Ni(o).documentMode?o.documentMode:{}}catch(t){}var T={};n.isSupported="function"==typeof b&&E&&void 0!==E.createHTMLDocument&&9!==O;var S,R,D=ji,I=Fi,L=Pi,j=Hi,F=Ui,P=Bi,H=$i,$=null,U=xi({},[].concat(Ja(Mi),Ja(Ai),Ja(Ci),Ja(Oi),Ja(Si))),B=null,z=xi({},[].concat(Ja(Ri),Ja(Di),Ja(Ii),Ja(Li))),V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,q=null,W=!0,G=!0,K=!1,X=!1,J=!1,Z=!1,Q=!1,tt=!1,et=!1,nt=!1,rt=!0,ot=!1,at="user-content-",it=!0,st=!1,ut={},ct=null,lt=xi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ft=null,ht=xi({},["audio","video","img","source","image","track"]),pt=null,dt=xi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mt="http://www.w3.org/1998/Math/MathML",vt="http://www.w3.org/2000/svg",gt="http://www.w3.org/1999/xhtml",yt=gt,bt=!1,wt=["application/xhtml+xml","text/html"],_t="text/html",xt=null,Nt=o.createElement("form"),Et=function(t){return t instanceof RegExp||t instanceof Function},Mt=function(t){xt&&xt===t||(t&&"object"===Wa(t)||(t={}),t=Ni(t),S=S=-1===wt.indexOf(t.PARSER_MEDIA_TYPE)?_t:t.PARSER_MEDIA_TYPE,R="application/xhtml+xml"===S?function(t){return t}:di,$="ALLOWED_TAGS"in t?xi({},t.ALLOWED_TAGS,R):U,B="ALLOWED_ATTR"in t?xi({},t.ALLOWED_ATTR,R):z,pt="ADD_URI_SAFE_ATTR"in t?xi(Ni(dt),t.ADD_URI_SAFE_ATTR,R):dt,ft="ADD_DATA_URI_TAGS"in t?xi(Ni(ht),t.ADD_DATA_URI_TAGS,R):ht,ct="FORBID_CONTENTS"in t?xi({},t.FORBID_CONTENTS,R):lt,Y="FORBID_TAGS"in t?xi({},t.FORBID_TAGS,R):{},q="FORBID_ATTR"in t?xi({},t.FORBID_ATTR,R):{},ut="USE_PROFILES"in t&&t.USE_PROFILES,W=!1!==t.ALLOW_ARIA_ATTR,G=!1!==t.ALLOW_DATA_ATTR,K=t.ALLOW_UNKNOWN_PROTOCOLS||!1,X=t.SAFE_FOR_TEMPLATES||!1,J=t.WHOLE_DOCUMENT||!1,tt=t.RETURN_DOM||!1,et=t.RETURN_DOM_FRAGMENT||!1,nt=t.RETURN_TRUSTED_TYPE||!1,Q=t.FORCE_BODY||!1,rt=!1!==t.SANITIZE_DOM,ot=t.SANITIZE_NAMED_PROPS||!1,it=!1!==t.KEEP_CONTENT,st=t.IN_PLACE||!1,H=t.ALLOWED_URI_REGEXP||H,yt=t.NAMESPACE||gt,t.CUSTOM_ELEMENT_HANDLING&&Et(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Et(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(G=!1),et&&(tt=!0),ut&&($=xi({},Ja(Si)),B=[],!0===ut.html&&(xi($,Mi),xi(B,Ri)),!0===ut.svg&&(xi($,Ai),xi(B,Di),xi(B,Li)),!0===ut.svgFilters&&(xi($,Ci),xi(B,Di),xi(B,Li)),!0===ut.mathMl&&(xi($,Oi),xi(B,Ii),xi(B,Li))),t.ADD_TAGS&&($===U&&($=Ni($)),xi($,t.ADD_TAGS,R)),t.ADD_ATTR&&(B===z&&(B=Ni(B)),xi(B,t.ADD_ATTR,R)),t.ADD_URI_SAFE_ATTR&&xi(pt,t.ADD_URI_SAFE_ATTR,R),t.FORBID_CONTENTS&&(ct===lt&&(ct=Ni(ct)),xi(ct,t.FORBID_CONTENTS,R)),it&&($["#text"]=!0),J&&xi($,["html","head","body"]),$.table&&(xi($,["tbody"]),delete Y.tbody),oi&&oi(t),xt=t)},At=xi({},["mi","mo","mn","ms","mtext"]),Ct=xi({},["foreignobject","desc","title","annotation-xml"]),kt=xi({},["title","style","font","a","script"]),Ot=xi({},Ai);xi(Ot,Ci),xi(Ot,ki);var Tt=xi({},Oi);xi(Tt,Ti);var St=function(t){var e=b(t);e&&e.tagName||(e={namespaceURI:gt,tagName:"template"});var n=di(t.tagName),r=di(e.tagName);return t.namespaceURI===vt?e.namespaceURI===gt?"svg"===n:e.namespaceURI===mt?"svg"===n&&("annotation-xml"===r||At[r]):Boolean(Ot[n]):t.namespaceURI===mt?e.namespaceURI===gt?"math"===n:e.namespaceURI===vt?"math"===n&&Ct[r]:Boolean(Tt[n]):t.namespaceURI===gt&&(!(e.namespaceURI===vt&&!Ct[r])&&(!(e.namespaceURI===mt&&!At[r])&&(!Tt[n]&&(kt[n]||!Ot[n]))))},Rt=function(t){pi(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=x}catch(e){t.remove()}}},Dt=function(t,e){try{pi(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){pi(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!B[t])if(tt||et)try{Rt(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},It=function(t){var e,n;if(Q)t="<remove></remove>"+t;else{var r=mi(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===S&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var a=_?_.createHTML(t):t;if(yt===gt)try{e=(new p).parseFromString(a,S)}catch(t){}if(!e||!e.documentElement){e=E.createDocument(yt,"template",null);try{e.documentElement.innerHTML=bt?"":a}catch(t){}}var i=e.body||e.documentElement;return t&&n&&i.insertBefore(o.createTextNode(n),i.childNodes[0]||null),yt===gt?C.call(e,J?"html":"body")[0]:J?e.documentElement:i},Lt=function(t){return M.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},jt=function(t){return t instanceof h&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof f)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)},Ft=function(t){return"object"===Wa(s)?t instanceof s:t&&"object"===Wa(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Pt=function(t,e,r){T[t]&&fi(T[t],(function(t){t.call(n,e,r,xt)}))},Ht=function(t){var e;if(Pt("beforeSanitizeElements",t,null),jt(t))return Rt(t),!0;if(bi(/[\u0080-\uFFFF]/,t.nodeName))return Rt(t),!0;var r=R(t.nodeName);if(Pt("uponSanitizeElement",t,{tagName:r,allowedTags:$}),t.hasChildNodes()&&!Ft(t.firstElementChild)&&(!Ft(t.content)||!Ft(t.content.firstElementChild))&&bi(/<[/\w]/g,t.innerHTML)&&bi(/<[/\w]/g,t.textContent))return Rt(t),!0;if("select"===r&&bi(/<template/i,t.innerHTML))return Rt(t),!0;if(!$[r]||Y[r]){if(!Y[r]&&Ut(r)){if(V.tagNameCheck instanceof RegExp&&bi(V.tagNameCheck,r))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(r))return!1}if(it&&!ct[r]){var o=b(t)||t.parentNode,a=y(t)||t.childNodes;if(a&&o)for(var i=a.length-1;i>=0;--i)o.insertBefore(v(a[i],!0),g(t))}return Rt(t),!0}return t instanceof u&&!St(t)?(Rt(t),!0):"noscript"!==r&&"noembed"!==r||!bi(/<\/no(script|embed)/i,t.innerHTML)?(X&&3===t.nodeType&&(e=t.textContent,e=vi(e,D," "),e=vi(e,I," "),t.textContent!==e&&(pi(n.removed,{element:t.cloneNode()}),t.textContent=e)),Pt("afterSanitizeElements",t,null),!1):(Rt(t),!0)},$t=function(t,e,n){if(rt&&("id"===e||"name"===e)&&(n in o||n in Nt))return!1;if(G&&!q[e]&&bi(L,e));else if(W&&bi(j,e));else if(!B[e]||q[e]){if(!(Ut(t)&&(V.tagNameCheck instanceof RegExp&&bi(V.tagNameCheck,t)||V.tagNameCheck instanceof Function&&V.tagNameCheck(t))&&(V.attributeNameCheck instanceof RegExp&&bi(V.attributeNameCheck,e)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(e))||"is"===e&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&bi(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(pt[e]);else if(bi(H,vi(n,P,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==gi(n,"data:")||!ft[t]){if(K&&!bi(F,vi(n,P,"")));else if(n)return!1}else;return!0},Ut=function(t){return t.indexOf("-")>0},Bt=function(t){var e,r,o,a;Pt("beforeSanitizeAttributes",t,null);var i=t.attributes;if(i){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B};for(a=i.length;a--;){var u=e=i[a],c=u.name,l=u.namespaceURI;if(r="value"===c?e.value:yi(e.value),o=R(c),s.attrName=o,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,Pt("uponSanitizeAttribute",t,s),r=s.attrValue,!s.forceKeepAttr&&(Dt(c,t),s.keepAttr))if(bi(/\/>/i,r))Dt(c,t);else{X&&(r=vi(r,D," "),r=vi(r,I," "));var f=R(t.nodeName);if($t(f,o,r)){if(!ot||"id"!==o&&"name"!==o||(Dt(c,t),r=at+r),_&&"object"===Wa(d)&&"function"==typeof d.getAttributeType)if(l);else switch(d.getAttributeType(f,o)){case"TrustedHTML":r=_.createHTML(r);break;case"TrustedScriptURL":r=_.createScriptURL(r)}try{l?t.setAttributeNS(l,c,r):t.setAttribute(c,r),hi(n.removed)}catch(t){}}}}Pt("afterSanitizeAttributes",t,null)}},zt=function t(e){var n,r=Lt(e);for(Pt("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)Pt("uponSanitizeShadowNode",n,null),Ht(n)||(n.content instanceof a&&t(n.content),Bt(n));Pt("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){var o,i,u,c,l,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((bt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Ft(t)){if("function"!=typeof t.toString)throw wi("toString is not a function");if("string"!=typeof(t=t.toString()))throw wi("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Wa(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof t)return e.toStaticHTML(t);if(Ft(t))return e.toStaticHTML(t.outerHTML)}return t}if(Z||Mt(f),n.removed=[],"string"==typeof t&&(st=!1),st){if(t.nodeName){var h=R(t.nodeName);if(!$[h]||Y[h])throw wi("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof s)1===(i=(o=It("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?o=i:o.appendChild(i);else{if(!tt&&!X&&!J&&-1===t.indexOf("<"))return _&&nt?_.createHTML(t):t;if(!(o=It(t)))return tt?null:nt?x:""}o&&Q&&Rt(o.firstChild);for(var p=Lt(st?t:o);u=p.nextNode();)3===u.nodeType&&u===c||Ht(u)||(u.content instanceof a&&zt(u.content),Bt(u),c=u);if(c=null,st)return t;if(tt){if(et)for(l=A.call(o.ownerDocument);o.firstChild;)l.appendChild(o.firstChild);else l=o;return B.shadowroot&&(l=k.call(r,l,!0)),l}var d=J?o.outerHTML:o.innerHTML;return J&&$["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&bi(zi,o.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+d),X&&(d=vi(d,D," "),d=vi(d,I," ")),_&&nt?_.createHTML(d):d},n.setConfig=function(t){Mt(t),Z=!0},n.clearConfig=function(){xt=null,Z=!1},n.isValidAttribute=function(t,e,n){xt||Mt({});var r=R(t),o=R(e);return $t(r,o,n)},n.addHook=function(t,e){"function"==typeof e&&(T[t]=T[t]||[],pi(T[t],e))},n.removeHook=function(t){if(T[t])return hi(T[t])},n.removeHooks=function(t){T[t]&&(T[t]=[])},n.removeAllHooks=function(){T={}},n}(),Wi=Z(Object.freeze({__proto__:null,default:qi})),Gi={};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.createPermanentMemoizer=void 0;Gi.createPermanentMemoizer=(t,e,{maxsize:n}={})=>{let r=new Map;return{get:o=>{const a=t(o);if(r.has(a))return r.get(a);const i=e(o);return n&&r.size>=n&&(r=new Map),r.set(a,i),i}}};const Ki=(J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(Wi),Xi=Gi,Ji=["a","span","b","br","i","strong","sup","sub","strike","u","em","tt"].sort();Ki.default.addHook("afterSanitizeElements",(function(t){"a"===t.nodeName.toLowerCase()&&("_self"!==t.getAttribute("target")&&t.setAttribute("target","_blank"),t.setAttribute("rel","nofollow noopener noreferrer"))}));const Zi=(0,Xi.createPermanentMemoizer)(t=>String(t),t=>{const e={ALLOWED_TAGS:void 0===t?Ji:"string"==typeof t?t.toLowerCase().slice(1,-1).split("><"):t,ADD_ATTR:["target"],FORCE_BODY:!0};return(0,Xi.createPermanentMemoizer)(t=>t,t=>Ki.default.sanitize(t,e),{maxsize:1e5})},{maxsize:1e5});var Qi=function(t,e){return t?Zi.get(e).get(t):t},ts=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qa,"__esModule",{value:!0}),qa.keyExists=as=qa.__=qa.translate=void 0;const es=ts(Qi),ns={};function rs(t="core"){"chart"===t?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(ns[t]=window.__dw.vis.meta.locale||{}):dw.backend.__messages&&(ns[t]="core"===t?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[t]))}function os(t,e="core",n,...r){let o=function(t,e,n){try{return n[e][t]||t}catch(e){return t}}(t,e,n);if((t=>"string"==typeof t[0])(r)){o=function(t,e=[]){return t.replace(/\$(\d)/g,(t,n)=>void 0===e[+n]?t:(0,es.default)(e[+n],""))}(o,r)}else o=function(t,e={}){return Object.entries(e).forEach(([e,n])=>{t=t.replace(new RegExp(`%${e}%|%${e}(?!\\w)`,"g"),""+n)}),t}(o,r[0]);return(0,es.default)(o,"<p><h1><h2><h3><h4><h5><h6><blockquote><ol><ul><li><pre><hr><br><a><em><i><strong><b><code><img><table><tr><th><td><small><span><div><sup><sub><tt>")}qa.translate=os;var as=qa.__=function(t,e="core",...n){return t=t.trim(),ns[e]||rs(e),ns[e][t]?os(t,e,ns,...n):"MISSING:"+t};qa.keyExists=function(t,e="core"){return ns[e]||rs(e),!!ns[e][t]};var is="TOP",ss="TPAREN";function us(t,e,n){this.type=t,this.value=e,this.index=n}function cs(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}us.prototype.toString=function(){return this.type+": "+this.value},cs.prototype.newToken=function(t,e,n){return new us(t,e,null!=n?n:this.pos)},cs.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},cs.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},cs.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},cs.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var o=this.expression.substring(e+1,r);this.current=this.newToken("TSTRING",this.unescape(o),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},cs.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(ss,t),this.pos++,!0)},cs.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("["))&&(this.current=this.newToken("TBRACKET",t),this.pos++,!0)},cs.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},cs.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},cs.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken("TNUMBER",this.consts[r]),this.pos+=r.length,!0}return!1},cs.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(is,r),this.pos+=r.length,!0}return!1},cs.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var o=this.expression.substring(t,e);return this.current=this.newToken("TNAME",o),this.pos+=o.length,!0}return!1},cs.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var ls=/^[0-9a-f]{4}$/i;cs.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var o=t.substring(e+1,e+5);ls.test(o)||this.parseError("Illegal escape sequence: \\u"+o),n+=String.fromCharCode(parseInt(o,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var a=t.indexOf("\\",e);n+=t.substring(e,a<0?t.length:a),e=a}return n},cs.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},cs.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,o=n;n<this.expression.length;){var a=this.expression.charAt(n);if(!e.test(a))break;n++,r=!0}return r&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(o,n),t)),this.pos=n),r},cs.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,o=n,a=!1,i=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!a&&"."===t);)"."===t?a=!0:i=!0,n++,e=i;if(e&&(o=n),"e"===t||"E"===t){n++;for(var s=!0,u=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;u=!0,s=!1}else s=!1;n++}u||(n=o)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=o,e},cs.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(is,e);else if("∙"===e||"•"===e)this.current=this.newToken(is,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(is,">="),this.pos++):this.current=this.newToken(is,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(is,"<="),this.pos++):this.current=this.newToken(is,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(is,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(is,"=="),this.pos++):this.current=this.newToken(is,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(is,"!="),this.pos++):this.current=this.newToken(is,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},cs.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},cs.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},cs.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)};var fs="IEXPR";function hs(t,e){this.type=t,this.value=null!=e?e:0}function ps(t){return new hs("IOP1",t)}function ds(t){return new hs("IOP2",t)}function ms(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess,this.restrictMemberAccess=new Set(n.restrictMemberAccess||[])}hs.prototype.toString=function(){switch(this.type){case"INUMBER":case"IOP1":case"IOP2":case"IOP3":case"IVAR":case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},ms.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},ms.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}(e,t.value):"function"==typeof e?e(t):t.value===e)},ms.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},ms.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},ms.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},ms.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},ms.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(is,(function(t){return t.value in e})))t.push(new hs("IVAR",this.current.value));else if(this.accept("TNUMBER"))t.push(new hs("INUMBER",this.current.value));else if(this.accept("TSTRING"))t.push(new hs("INUMBER",this.current.value));else if(this.accept(ss,"("))this.parseExpression(t),this.expect(ss,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))t.push(new hs("IARRAY",0));else{var n=this.parseArrayList(t);t.push(new hs("IARRAY",n))}}},ms.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},ms.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},ms.prototype.parseUntilEndStatement=function(t,e){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===ss&&")"===this.nextToken.value||e.push(new hs("IENDSTATEMENT")),"TEOF"!==this.nextToken.type&&this.parseExpression(e),t.push(new hs(fs,e)),!0)},ms.prototype.parseArrayList=function(t){for(var e=0;!this.accept("TBRACKET","]");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},ms.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(is,"=");){var e=t.pop(),n=[],r=t.length-1;if("IFUNCALL"!==e.type){if("IVAR"!==e.type&&"IMEMBER"!==e.type)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new hs("IVARNAME",e.value)),t.push(new hs(fs,n)),t.push(ds("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,a=e.value+1;o<a;o++){var i=r-o;"IVAR"===t[i].type&&(t[i]=new hs("IVARNAME",t[i].value))}this.parseVariableAssignmentExpression(n),t.push(new hs(fs,n)),t.push(new hs("IFUNDEF",e.value))}}},ms.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(is,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(is,":"),this.parseConditionalExpression(n),t.push(new hs(fs,e)),t.push(new hs(fs,n)),t.push(new hs("IOP3","?"))}},ms.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(is,"or");){var e=[];this.parseAndExpression(e),t.push(new hs(fs,e)),t.push(ds("or"))}},ms.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(is,"and");){var e=[];this.parseComparison(e),t.push(new hs(fs,e)),t.push(ds("and"))}};var vs=["==","!=","<","<=",">=",">","in"];ms.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(is,vs);){var e=this.current;this.parseAddSub(t),t.push(ds(e.value))}};var gs=["+","-","||"];ms.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(is,gs);){var e=this.current;this.parseTerm(t),t.push(ds(e.value))}};var ys=["*","/","%"];function bs(t,e){return Number(t)+Number(e)}function ws(t,e){return t-e}function _s(t,e){return t*e}function xs(t,e){return t/e}function Ns(t,e){return t%e}function Es(t,e){return t===e}function Ms(t,e){return t!==e}function As(t,e){return t>e}function Cs(t,e){return t<e}function ks(t,e){return t>=e}function Os(t,e){return t<=e}function Ts(t,e){return Boolean(t&&e)}function Ss(t,e){return Boolean(t||e)}function Rs(t){return Math.log(t)*Math.LOG10E}function Ds(t){return-t}function Is(t){return!t}function Ls(t){return t<0?Math.ceil(t):Math.floor(t)}function js(t){return Math.random()*(t||1)}function Fs(t){return Array.isArray(t)?t.length:String(t).length}function Ps(t,e,n){return t?e:n}function Hs(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function $s(t,e){return t[0|e]}function Us(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))}function Bs(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)}function zs(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))}function Vs(t){return(t>0)-(t<0)||+t}function Ys(t){return Math.log(1+t)}function qs(t){return Math.log(t)/Math.LN2}function Ws(t){if(!Array.isArray(t))throw new Error("Sum argument is not an array");return t.reduce((function(t,e){return t+Number(e)}),0)}function Gs(t,e,n){var r,o,a,i,s,u,c=[];if(Xs(t))return Js(t,n);for(var l=t.length,f=0;f<l;f++){var h=t[f],p=h.type;if("INUMBER"===p||"IVARNAME"===p)c.push(h.value);else if("IOP2"===p)o=c.pop(),r=c.pop(),"and"===h.value?c.push(!!r&&!!Gs(o,e,n)):"or"===h.value?c.push(!!r||!!Gs(o,e,n)):"="===h.value?(i=e.binaryOps[h.value],c.push(i(r,Gs(o,e,n),n))):(i=e.binaryOps[h.value],c.push(i(Js(r,n),Js(o,n))));else if("IOP3"===p)a=c.pop(),o=c.pop(),r=c.pop(),"?"===h.value?c.push(Gs(r?o:a,e,n)):(i=e.ternaryOps[h.value],c.push(i(Js(r,n),Js(o,n),Js(a,n))));else if("IVAR"===p){if(/^__proto__|prototype|constructor$/.test(h.value))throw new Error("prototype access detected");if(h.value in e.functions)c.push(e.functions[h.value]);else if(h.value in e.unaryOps&&e.parser.isOperatorEnabled(h.value))c.push(e.unaryOps[h.value]);else{var d=n[h.value];if(void 0===d)throw new Error("undefined variable: "+h.value);c.push(d)}}else if("IOP1"===p)r=c.pop(),i=e.unaryOps[h.value],c.push(i(Js(r,n)));else if("IFUNCALL"===p){for(u=h.value,s=[];u-- >0;)s.unshift(Js(c.pop(),n));if(!(i=c.pop()).apply||!i.call)throw new Error(i+" is not a function");c.push(i.apply(void 0,s))}else if("IFUNDEF"===p)c.push(function(){for(var t=c.pop(),r=[],o=h.value;o-- >0;)r.unshift(c.pop());var a=c.pop(),i=function(){for(var o=Object.assign({},n),a=0,i=r.length;a<i;a++)o[r[a]]=arguments[a];return Gs(t,e,o)};return Object.defineProperty(i,"name",{value:a,writable:!1}),n[a]=i,i}());else if(p===fs)c.push(Ks(h,e));else if("IEXPREVAL"===p)c.push(h);else if("IMEMBER"===p)r=c.pop(),c.push(r[h.value]);else if("IENDSTATEMENT"===p)c.pop();else{if("IARRAY"!==p)throw new Error("invalid Expression");for(u=h.value,s=[];u-- >0;)s.unshift(c.pop());c.push(s)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:Js(c[0],n)}function Ks(t,e,n){return Xs(t)?t:{type:"IEXPREVAL",value:function(n){return Gs(t.value,e,n)}}}function Xs(t){return t&&"IEXPREVAL"===t.type}function Js(t,e){return Xs(t)?t.value(e):t}function Zs(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}function Qs(t){return t.trim()}ms.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(is,ys);){var e=this.current;this.parseFactor(t),t.push(ds(e.value))}},ms.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(is,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===ss&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===ss&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(ps(n.value))}else this.parseExponential(t)},ms.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(is,"^");)this.parseFactor(t),t.push(ds("^"))},ms.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(is,"!");)t.push(ps("!"))},ms.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(is,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(ps(n.value))}else for(this.parseMemberExpression(t);this.accept(ss,"(");)if(this.accept(ss,")"))t.push(new hs("IFUNCALL",0));else{var r=this.parseArgumentList(t);t.push(new hs("IFUNCALL",r))}},ms.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(ss,")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},ms.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(is,".")||this.accept("TBRACKET","[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');if(this.restrictMemberAccess.has(this.nextToken.value))throw new Error('access to member "'+this.nextToken.value+'" is not permitted');this.expect("TNAME"),t.push(new hs("IMEMBER",this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect("TBRACKET","]"),t.push(ds("["))}}},Zs.prototype.evaluate=function(t){return t=t||{},Gs(this.tokens,this,t)},Zs.prototype.variables=function(){return(this.tokens||[]).filter(t=>"IVAR"===t.type).map(t=>t.value)};const tu=new Set(["__proto__","prototype","constructor"]);function eu(t){this.options=t||{},this.unaryOps={SIN:Math.sin,COS:Math.cos,TAN:Math.tan,ASIN:Math.asin,ACOS:Math.acos,ATAN:Math.atan,SQRT:Math.sqrt,LOG:Math.log,LOG2:Math.log2||qs,LN:Math.log,LOG10:Math.log10||Rs,LG:Math.log10||Rs,LOG1P:Math.log1p||Ys,ABS:Math.abs,CEIL:Math.ceil,FLOOR:Math.floor,ISNULL:t=>null===t,TRUNC:Math.trunc||Ls,"-":Ds,"+":Number,EXP:Math.exp,NOT:Is,LENGTH:Fs,"!":Is,SIGN:Math.sign||Vs,TEXT:t=>e(t)?t.toISOString():String(t),NUMBER:Number},this.binaryOps={"+":bs,"-":ws,"*":_s,"/":xs,"%":Ns,"^":Math.pow,"==":Es,"!=":Ms,">":As,"<":Cs,">=":ks,"<=":Os,and:Ts,or:Ss,in:(t,e)=>Array.isArray(e)?e.includes(t):String(e).includes(t),"[":$s},this.ternaryOps={"?":Ps};const e=t=>t instanceof Date&&!isNaN(t),n=t=>{if(e(t))return t;try{const n=new Date(t);return e(n)?n:null}catch(t){return null}};function r(t){return(1===arguments.length&&Array.isArray(t)?t:Array.from(arguments)).slice(0).filter(t=>!isNaN(t)&&Number.isFinite(t))}let o=/\w*/g,a=/\w\S*/g;const i=/[\\^$*+?.()|[\]{}]/g;try{o=new RegExp("\\p{L}*","ug"),a=new RegExp("[\\p{L}\\p{N}]\\S*","ug")}catch(t){}this.functions={IF:Ps,RANDOM:js,MIN(){return function(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}(r.apply(this,arguments))},MAX(){return function(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}(r.apply(this,arguments))},SUM(){return Ws(r.apply(this,arguments))},MEAN(){const t=r.apply(this,arguments);return Ws(t)/t.length},MEDIAN(){const t=r.apply(this,arguments).sort((t,e)=>t-e),e=Math.floor(t.length/2);return t.length%2==1?t[e]:.5*(t[e-1]+t[e])},POW:Math.pow,ATAN2:Math.atan2,ROUND:Hs,CONCAT(){return Array.from(arguments).join("")},TRIM:Qs,SUBSTR:(t,e,n)=>t.substr(e,n),REPLACE:(t,e,n)=>t.replace(new RegExp(String(e).replace(i,"\\$&"),"g"),n),REPLACE_REGEX:(t,e,n)=>t.replace(new RegExp(e,"g"),n),SPLIT:(t,e)=>String(t).split(e),LOWER:t=>String(t).toLowerCase(),UPPER:t=>String(t).toUpperCase(),PROPER:t=>String(t).replace(o,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()),TITLE:t=>String(t).replace(a,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()),SORT(t,e=!0,n=null){if(tu.has(n))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to SORT is not an array");return t.slice(0).sort((t,r)=>((t="string"==typeof n?t[n]:"function"==typeof n?n(t):t)>(r="string"==typeof n?r[n]:"function"==typeof n?n(r):r)?1:t<r?-1:0)*(e?1:-1))},SLICE(t,e,n){if(!Array.isArray(t))throw new Error("First argument to SLICE is not an array");return t.slice(e,n)},JOIN(t,e,n=null){if(!Array.isArray(t))throw new Error("First argument to JOIN is not an array");return n?[t.slice(0,t.length-1).join(e),t[t.length-1]].join(n):t.join(e)},MAP:Us,FOLD:Bs,FILTER:zs,PLUCK(t,e){if(tu.has(e))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to PLUCK is not an array");return t.map(t=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:null)},INDEXOF:(t,e)=>(Array.isArray(t)||(t=String(t)),t.indexOf(e)),FIND(t,e){if(!Array.isArray(t))throw new Error("First argument to FIND is not an array");if("function"!=typeof e)throw new Error("Second argument to FIND is not a function");const n=t.length;for(let r=0;r<n;r++)if(e(t[r]))return t[r];return null},RANGE(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),a=0;a<r;a++,t+=n)o[a]=t;return o},EVERY(t,e){if(!Array.isArray(t))throw new Error("First argument to EVERY is not an array");if("function"!=typeof e)throw new Error("Second argument to EVERY is not a function");const n=t.length;let r=!0;for(let o=0;o<n;o++)if(r=r&&e(t[o]),!r)return!1;return!0},SOME(t,e){if(!Array.isArray(t))throw new Error("First argument to SOME is not an array");if("function"!=typeof e)throw new Error("Second argument to SOME is not a function");const n=t.length;let r=!1;for(let o=0;o<n;o++)if(r=r||e(t[o]),r)return!0;return!1},DATE(){return arguments.length>1&&(arguments[1]=arguments[1]-1),new Date(...arguments)},YEAR:t=>(t=n(t))?t.getFullYear():null,MONTH:t=>(t=n(t))?t.getMonth()+1:null,DAY:t=>(t=n(t))?t.getDate():null,WEEKDAY:t=>(t=n(t))?t.getDay():null,HOURS:t=>(t=n(t))?t.getHours():null,MINUTES:t=>(t=n(t))?t.getMinutes():null,SECONDS:t=>(t=n(t))?t.getSeconds():null,DATEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/864e5:null),TIMEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/1e3:null)},this.unaryOps.LOWER=this.functions.LOWER,this.unaryOps.UPPER=this.functions.UPPER,this.unaryOps.PROPER=this.functions.PROPER,this.unaryOps.TITLE=this.functions.TITLE,this.unaryOps.TRIM=this.functions.TRIM,this.unaryOps.YEAR=this.functions.YEAR,this.unaryOps.MONTH=this.functions.MONTH,this.unaryOps.DAY=this.functions.DAY,this.unaryOps.WEEKDAY=this.functions.WEEKDAY,this.unaryOps.HOURS=this.functions.HOURS,this.unaryOps.MINUTES=this.functions.MINUTES,this.unaryOps.SECONDS=this.functions.SECONDS,this.consts={E:Math.E,PI:Math.PI,TRUE:!0,FALSE:!1,NA:Number.NaN,NULL:Number.NaN}}eu.prototype.parse=function(t){var e=[],n=new ms(this,new cs(this,t),{allowMemberAccess:!0,restrictMemberAccess:tu});return n.parseExpression(e),n.expect("TEOF","EOF"),new Zs(e,this)},eu.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var nu=new eu;eu.parse=function(t){return nu.parse(t)},eu.evaluate=function(t,e){return nu.parse(t).evaluate(e)},eu.keywords=["ABS","ACOS","ACOSH","and","ASIN","ASINH","ATAN","ATAN2","ATANH","CBRT","CEIL","CONCAT","COS","COSH","DATEDIFF","DAY","E","EVERY","EXP","EXPM1","FIND","FLOOR","HOURS","IF","in","INDEXOF","ISNULL","JOIN","LENGTH","LN","LOG","LOG10","LOG1P","LOG2","LOWER","MAP","MAX","MEAN","MEDIAN","MIN","MINUTES","MONTH","NOT","NOT","or","PI","PLUCK","POW","PROPER","RANDOM","RANGE","REPLACE","REPLACE_REGEX","ROUND","SECONDS","SIGN","SIN","SINH","SLICE","SOME","SORT","SPLIT","SQRT","SUBSTR","SUM","TAN","TANH","TIMEDIFF","TITLE","TRIM","TRUNC","UPPER","WEEKDAY","YEAR"];var ru={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",AND:"logical",OR:"logical",NOT:"logical",IN:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};eu.prototype.isOperatorEnabled=function(t){var e=function(t){return Object.prototype.hasOwnProperty.call(ru,t)?ru[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};var ou=function(t){return t.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/-/g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(and|or|in|true|false)$/,"$1_")};function au(t){let e=t.get("metadata.describe.computed-columns",[]);return Array.isArray(e)||(e=Object.keys(e).reduce((t,n)=>(t.push({name:n,formula:e[n]}),t),[])),e}var iu={exports:{}};
/*!
	 * JavaScript Cookie v2.2.1
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */!function(t,e){var n;n=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function a(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=t({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,!0!==a[u]&&(s+="="+a[u].split(";")[0]));return document.cookie=e+"="+n+s}}function i(t,n){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],i=0;i<a.length;i++){var s=a[i].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(s[0]);if(u=(r.read||r)(u,c)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(o[c]=u,t===c)break}catch(t){}}return t?o[t]:o}}return o.set=a,o.get=function(t){return i(t,!1)},o.getJSON=function(t){return i(t,!0)},o.remove=function(e,n){a(e,"",t(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},t.exports=n()}(iu);var su={};Object.defineProperty(su,"__esModule",{value:!0}),su.getValueOrDefault=void 0;su.getValueOrDefault=(t,e,n)=>t&&e(t)?t:n();var uu=J&&J.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},cu=J&&J.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};const lu=(J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(iu.exports),fu=su,hu=qa,pu=new Set(["get","head","options","trace"]);function du(t,e={}){var{fetch:n,baseUrl:r}=e,o=cu(e,["fetch","baseUrl"]);const a=(0,fu.getValueOrDefault)(n,()=>!0,()=>{try{const t=window.fetch;if(!t)throw new Error;return t}catch(t){throw new Error("Neither options.fetch nor window.fetch is defined.")}}),i=(0,fu.getValueOrDefault)(r,()=>!0,()=>{const t=window.dw.backend.__api_domain;if(!t)throw new Error("Neither options.baseUrl nor window.dw is defined.");return t.startsWith("http")?t:"//"+t}),s=Object.assign(Object.assign({payload:null,raw:!1,method:"GET",mode:"cors",credentials:"include"},o),{headers:Object.assign({"Content-Type":"application/json"},o.headers)}),{payload:u,raw:c}=s,l=cu(s,["payload","raw"]),f=`${i.replace(/\/$/,"")}/${t.replace(/^\//,"")}`;let h;if(u&&(l.body=JSON.stringify(u)),l.headers["Content-Type"].startsWith("multipart/")&&delete l.headers["Content-Type"],l.disableCSRF||pu.has(l.method.toLowerCase()))h=a(f,l);else{const t=lu.default.get("crumb");t?(l.headers["X-CSRF-Token"]=t,h=a(f,l)):h=du("/v3/me",{fetch:a,baseUrl:i}).then(()=>{const t=lu.default.get("crumb");t&&(l.headers["X-CSRF-Token"]=t)}).catch(()=>{}).then(()=>uu(this,void 0,void 0,(function*(){return yield a(f,l)})))}return h.then(t=>{if(c)return t;if(!t.ok)return t.json().then(e=>{throw new vu(t,e)});if(204===t.status||!t.headers.get("content-type"))return t;const e=(t.headers.get("content-type")||"").split(";")[0];return"application/json"===e?t.json():"image/png"===e||"application/pdf"===e?t.blob():t.text()})}function mu(t){return(e,n)=>{if(n&&n.method)throw new Error(`Setting option.method is not allowed in httpReq.${t.toLowerCase()}()`);return du(e,Object.assign(Object.assign({},n),{method:t}))}}du.get=mu("GET"),du.patch=mu("PATCH"),du.put=mu("PUT"),du.post=mu("POST"),du.head=mu("HEAD"),du.delete=mu("DELETE");class vu extends Error{constructor(t,e){super(),this.name="HttpReqError",this.status=t.status,this.statusText=t.statusText,this.message=`[${t.status}] ${t.statusText}`,this.response=t,this.response.json=()=>Promise.resolve(e),e&&(this.type=e.type,this.type&&(0,hu.keyExists)(this.type)&&(this.translationKey=this.type),this.details=e.details,Array.isArray(this.details)&&this.details.forEach(t=>{if(t&&t.type){const e=[this.type,t.type].join(" / ");(0,hu.keyExists)(e)&&(t.translationKey=e)}}))}}du.HttpReqError=vu;var gu=du;var yu={insert(t){const{cm:e}=this.get();e.replaceSelection(t.key),e.focus()},unmarkErrors(){window.document.querySelectorAll("span.parser-error").forEach(t=>t.classList.remove("parser-error"))},removeColumn(){const{column:t}=this.get(),{dw_chart:e}=this.store.get(),n=e.dataset(),r=Ya(au(e)).filter(e=>e.name!==t.origName()),o=n.columnOrder()[n.indexOf(t.name())],a=e.get("metadata.data.changes",[]),i=[];a.forEach(t=>{t.column!==o&&(t.column>o&&t.column--,i.push(t))}),e.set("metadata.describe.computed-columns",r),e.set("metadata.data.changes",i),this.fire("unselect")},copyFormulaToData(){const{column:t,formula:e}=this.get(),n=dw.column("",e.split("\n")),r=`[${n.values().map((t,e)=>t instanceof Date&&!isNaN(t)||"string"==typeof t?JSON.stringify(n.raw(e)):t).join(",\n")}][ROWNUMBER]`;this.set({formula:r,parserErrors:[]}),this.setFormula(r,t.name(),t.origName())},setFormula(t,e,n){if(void 0===t)return;const{dw_chart:r,tableDataset:o}=this.store.get(),{cm:a}=this.get();this.set({formula:t});const i=[];t!==a.getValue()&&a.setValue(t),setTimeout(()=>this.unmarkErrors());const s=Ya(au(r)),u=s.find(t=>t.name===n);if(!u)return setTimeout(()=>{this.setFormula(t,e,n)},100);if(u.formula!==t)u.formula=t,r.set("metadata.describe.computed-columns",s),this.set({checking:!0});else{let t;this.set({checking:!1});try{t=o.column(e)}catch(t){console.error(`Failed to load column "${e}"`)}t&&t.errors&&t.errors.forEach(t=>i.push(t))}this.set({parserErrors:i})},async closeDidYouKnow(){try{await gu.patch("/v3/me/data",{payload:{"new-computed-columns-syntax":1}}),window.dw.backend.__userData["new-computed-columns-syntax"]=1}catch(t){console.error(t)}this.set({didYouKnow:!1})}};function bu(){const t=this,{column:e,computedColumns:n}=this.get(),{dw_chart:r}=this.store.get(),o=n.find(t=>t.name===e.origName());window.dw.backend.__userData["new-computed-columns-syntax"]&&this.set({didYouKnow:!JSON.parse(window.dw.backend.__userData["new-computed-columns-syntax"]||"false")}),this.set({formula:o.formula||"",name:e.origName()});const a=/(?:parse error) \[(\d+):(\d+)\]:/;this.on("hotRendered",()=>{const{checking:t,formula:n}=this.get();if(!t)return;const r=[];e.formula===n&&(e.errors||[]).forEach(t=>{r.push(t)}),this.unmarkErrors(),this.set({parserErrors:r,checking:!1})});const i=d.default.fromTextArea(this.refs.code,{value:this.get().formula||"",mode:"simple",indentUnit:2,tabSize:2,lineWrapping:!0,matchBrackets:!0,placeholder:"",continueComments:"Enter",extraKeys:{Tab:"autocomplete"},hintOptions:{hint:function(e){const n=e.getCursor(),r=e.getTokenAt(n);let o=[];const{keywords:a}=t.get();return"variable-x"===r.type?o=a.filter((function(t){return 0===t.toLowerCase().indexOf(r.string.toLowerCase())})):"keyword-x"===r.type&&(o=eu.keywords.filter((function(t){return 0===t.toLowerCase().indexOf(r.string.toLowerCase())}))),{list:o.sort(),from:d.default.Pos(n.line,r.start),to:d.default.Pos(n.line,r.end)}}}});let s;window.CodeMirror=d.default,this.set({cm:i});const u=t=>{clearTimeout(s);const{column:e}=this.get();s=setTimeout(()=>{let{computedColumns:n}=this.get();if(!n)return void console.error("Computed columns are not loaded");n=Ya(n);const o=n.find(t=>t.name===e.origName());if(!o)return void console.error(`Computed column "${e.origName()}" was not found`);const a=n.findIndex(e=>e.name===t);-1!==a&&n.splice(a,1),o.name=t,e.name(t),r.set("metadata.describe.computed-columns",n),this.store.set({dwChart:r})},1500)},{formula:c,keywords:l}=this.get();function f(t){const e=new RegExp(`(?:${t.join("|")})`),n=new RegExp(`(?:${eu.keywords.join("|")})`);d.default.defineSimpleMode("simplemode",{start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"string"},{regex:/'(?:[^\\]|\\.)*?(?:'|$)/,token:"string"},{regex:n,token:"keyword"},{regex:/true|false|PI|E/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:e,token:"variable-2"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/[-+/*=<>!^%]+/,token:"operator"},{regex:/[[(]/,indent:!0},{regex:/[\])]/,dedent:!0},{regex:/[a-z$][\w$]*/,token:"variable-x"},{regex:/[A-Z_][\w$]*/,token:"keyword-x"}],meta:{}}),i.setOption("mode","simplemode")}f(l),this.setFormula(c,e.name(),e.origName()),this.on("state",({changed:t,current:e,previous:n})=>{if(t.column){const t=e.column;if(t&&e.computedColumns){const n=e.computedColumns.find(e=>e.name===t.origName()),r=n?n.formula:"";this.set({formula:r,name:t.origName()}),this.setFormula(r,t.name(),t.origName()),i.setValue(r)}}if(t.name&&n.name&&u(e.name),t.metaColumns&&f(e.keywords),t.errDisplay&&e.errDisplay&&a.test(e.errDisplay)){const t=e.errDisplay.match(a),n=Number(t[1])-1,r=Number(t[2])-1;i.markText({line:n,ch:r},{line:n,ch:r+1},{className:"parser-error"})}});const h=Ht((t,e,n)=>{this.setFormula(t,e,n)},1500);i.on("change",e=>{const{column:n}=t.get();this.set({checking:!0}),h(e.getValue(),n.name(),n.origName())})}function wu(t){const{component:e,ctx:n}=this._svelte;e.insert(n.col)}function _u(t,e,n){const r=Object.create(t);return r.col=e[n],r}function xu(t,e){var n,r,o,a,i,s,u,c,l,f,h,p,d,m,v,g,y=as("cc / formula / did-you-know / title"),b=as("cc / formula / did-you-know / text"),w=as("cc / formula / did-you-know / link"),_=as("cc / formula / did-you-know / link2");function x(e){t.closeDidYouKnow()}return{c(){n=T("div"),(r=T("div")).innerHTML='<i class="im im-check-mark-circle"></i>',o=R("\n        "),a=T("h3"),i=R(y),s=R("\n\n        "),u=T("p"),c=R(b),l=R("\n\n        "),f=T("p"),h=R(w),p=R(" "),d=T("i"),m=R("\n            "),v=T("a"),g=R(_),I(r,"click",x),r.className="close",d.className="im im-graduation-hat svelte-1cx0ai0",v.href="https://academy.datawrapper.de/article/249-calculations-in-added-columns-and-tooltips",v.target="_blank",n.className="did-you-know svelte-1cx0ai0",P(n,"margin-top","10px"),P(n,"margin-bottom","1em")},m(t,e){A(t,n,e),M(n,r),M(n,o),M(n,a),M(a,i),M(n,s),M(n,u),M(u,c),M(n,l),M(n,f),M(f,h),M(f,p),M(f,d),M(f,m),M(f,v),M(v,g)},d(t){t&&C(n),L(r,"click",x)}}}function Nu(t,e){var n;return{c(){P(n=T("i"),"color","#ccc"),n.className="fa fa-cog fa-spin"},m(t,e){A(t,n,e)},d(t){t&&C(n)}}}function Eu(t,e){var n;return{c(){(n=T("p")).className="mini-help errors svelte-1cx0ai0"},m(t,r){A(t,n,r),n.innerHTML=e.errNiceDisplay},p(t,e){t.errNiceDisplay&&(n.innerHTML=e.errNiceDisplay)},d(t){t&&C(n)}}}function Mu(t,e){var n,r,o,a;return{c(){n=T("p"),r=T("i"),o=R(" "),a=T("noscript"),r.className="hat-icon im im-graduation-hat svelte-1cx0ai0",n.className="mini-help formula-hint svelte-1cx0ai0"},m(t,i){A(t,n,i),M(n,r),M(n,o),M(n,a),a.insertAdjacentHTML("afterend",e.formulaHint)},p(t,e){t.formulaHint&&(!function(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)}(a),a.insertAdjacentHTML("afterend",e.formulaHint))},d(t){t&&C(n)}}}function Au(t,e){var n,r,o,a,i,s,u,c=as("cc / formula / hint / insert-data"),l=as("cc / formula / hint / insert-data / action");function f(e){e.preventDefault(),t.copyFormulaToData()}return{c(){n=T("div"),r=T("i"),o=R("\n        "),a=R(c),i=R("\n        "),s=T("a"),u=R(l),r.className="hat-icon im im-graduation-hat svelte-1cx0ai0",I(s,"click",f),P(s,"color","white"),P(s,"font-weight","bold"),s.href="/#apply",n.className="mini-help formula-hint svelte-1cx0ai0"},m(t,e){A(t,n,e),M(n,r),M(n,o),M(n,a),M(n,i),M(n,s),M(s,u)},d(t){t&&C(n),L(s,"click",f)}}}function Cu(t,e){var n,r,o=e.col.key;return{c(){n=T("li"),r=R(o),n._svelte={component:t,ctx:e},I(n,"click",wu),n.className="svelte-1cx0ai0"},m(t,e){A(t,n,e),M(n,r)},p(t,a){e=a,t.metaColumns&&o!==(o=e.col.key)&&F(r,o),n._svelte.ctx=e},d(t){t&&C(n),L(n,"click",wu)}}}function ku(t){q(this,t),this.refs={},this._state=N(N(this.store._init(["dw_chart"]),{name:"",formula:"",parserErrors:[],checking:!1,didYouKnow:!0}),t.data),this.store._add(this,["dw_chart"]),this._recompute({name:1,columns:1,column:1,metaColumns:1,formula:1,context:1,error:1,$dw_chart:1,parserErrors:1,errDisplay:1},this._state),this._intro=!0,this._handlers.destroy=[K],this._fragment=function(t,e){var n,r,o,a,i,s,u,c,l,f,h,p,d,v,g,y,b,w,_,x,N,E,S,D,$,U,B,z,V,Y,q,W,G,K,X=as("computed columns / modal / intro"),J=as("computed columns / modal / name"),Z=!1,Q=as("computed columns / modal / formula"),tt=as("cc / formula / help"),et=as("computed columns / modal / available columns"),nt=as("computed columns / modal / remove"),rt=e.didYouKnow&&xu(t);function ot(){Z=!0,t.set({name:p.value}),Z=!1}for(var at=e.checking&&!e.error&&Nu(),it=new m.default({root:t.root,store:t.store,slots:{default:O()}}),st=e.errDisplay&&Eu(t,e),ut=e.formulaHint&&Mu(t,e),ct=e.looksLikeColumnData&&Au(t),lt=e.metaColumns,ft=[],ht=0;ht<lt.length;ht+=1)ft[ht]=Cu(t,_u(e,lt,ht));function pt(e){t.removeColumn()}return{c(){n=T("div"),rt&&rt.c(),r=R("\n\n    "),o=T("h3"),a=R(e.title),i=R("\n    "),s=T("p"),u=R(X),c=R("\n\n    "),l=T("label"),f=R(J),h=R("\n    "),p=T("input"),d=R("\n\n    "),v=T("label"),g=R(Q),y=R("\n\n        \n        "),at&&at.c(),b=R("\n\n        "),w=T("span"),it._fragment.c(),_=R("\n    "),x=T("textarea"),N=R("\n\n    \n    "),st&&st.c(),E=R("\n\n    \n    "),ut&&ut.c(),S=R("\n\n    \n    "),ct&&ct.c(),D=R("\n\n    "),$=T("p"),U=R(et),B=R(":"),z=R("\n\n    "),V=T("ul");for(var t=0;t<ft.length;t+=1)ft[t].c();Y=R("\n\n"),q=T("button"),W=T("i"),G=R(" "),K=R(nt),o.className="first",l.className="svelte-1cx0ai0",I(p,"input",ot),j(p,"type","text"),v.className="svelte-1cx0ai0",x.className="code svelte-1cx0ai0",H(x,"error",e.errDisplay),P($,"margin-top","1em"),V.className="col-select svelte-1cx0ai0",P(n,"margin-bottom","15px"),W.className="fa fa-trash",I(q,"click",pt),q.className="btn btn-danger"},m(m,C){A(m,n,C),rt&&rt.m(n,null),M(n,r),M(n,o),M(o,a),M(n,i),M(n,s),M(s,u),M(n,c),M(n,l),M(l,f),M(n,h),M(n,p),p.value=e.name,M(n,d),M(n,v),M(v,g),M(v,y),at&&at.m(v,null),M(v,b),M(it._slotted.default,w),w.innerHTML=tt,it._mount(v,null),M(n,_),M(n,x),t.refs.code=x,M(n,N),st&&st.m(n,null),M(n,E),ut&&ut.m(n,null),M(n,S),ct&&ct.m(n,null),M(n,D),M(n,$),M($,U),M($,B),M(n,z),M(n,V);for(var k=0;k<ft.length;k+=1)ft[k].m(V,null);A(m,Y,C),A(m,q,C),M(q,W),M(q,G),M(q,K)},p(e,o){if(o.didYouKnow?rt||((rt=xu(t)).c(),rt.m(n,r)):rt&&(rt.d(1),rt=null),e.title&&F(a,o.title),!Z&&e.name&&(p.value=o.name),o.checking&&!o.error?at||((at=Nu()).c(),at.m(v,b)):at&&(at.d(1),at=null),e.errDisplay&&H(x,"error",o.errDisplay),o.errDisplay?st?st.p(e,o):((st=Eu(t,o)).c(),st.m(n,E)):st&&(st.d(1),st=null),o.formulaHint?ut?ut.p(e,o):((ut=Mu(t,o)).c(),ut.m(n,S)):ut&&(ut.d(1),ut=null),o.looksLikeColumnData?ct||((ct=Au(t)).c(),ct.m(n,D)):ct&&(ct.d(1),ct=null),e.metaColumns){lt=o.metaColumns;for(var i=0;i<lt.length;i+=1){const n=_u(o,lt,i);ft[i]?ft[i].p(e,n):(ft[i]=Cu(t,n),ft[i].c(),ft[i].m(V,null))}for(;i<ft.length;i+=1)ft[i].d(1);ft.length=lt.length}},d(e){e&&C(n),rt&&rt.d(),L(p,"input",ot),at&&at.d(),it.destroy(),t.refs.code===x&&(t.refs.code=null),st&&st.d(),ut&&ut.d(),ct&&ct.d(),k(ft,e),e&&(C(Y),C(q)),L(q,"click",pt)}}}(this,this._state),this.root._oncreate.push(()=>{bu.call(this),this.fire("update",{changed:E({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),V(this))}N(ku.prototype,X),N(ku.prototype,yu),ku.prototype._recompute=function(t,e){t.name&&this._differs(e.title,e.title=function({name:t}){return as("describe / edit-column","core",{s:`"${t}"`})}(e))&&(t.title=!0),(t.columns||t.column)&&this._differs(e.metaColumns,e.metaColumns=function({columns:t,column:e}){const n=[];if(!t)return n;const r=ou(e.origName());for(const o of t){if(o.name()===e.name())continue;const t=ou(o.isComputed?o.origName():o.name());t&&(t!==r&&n.push({key:t,title:o.title(),type:o.isComputed?"computed":o.type()}))}return n}(e))&&(t.metaColumns=!0),t.metaColumns&&(this._differs(e.keywords,e.keywords=function({metaColumns:t}){const e=[];return t.forEach((function(t){"number"===t.type||"computed"===t.type?(e.push(t.key+"__sum"),e.push(t.key+"__min"),e.push(t.key+"__max"),e.push(t.key+"__mean"),e.push(t.key+"__median")):"date"===t.type&&(e.push(t.key+"__min"),e.push(t.key+"__max")),e.push(t.key)})),e.sort((t,e)=>e.length-t.length)}(e))&&(t.keywords=!0),this._differs(e.context,e.context=function({metaColumns:t}){const e={ROWNUMBER:1},n=["sum","round","min","max","median","mean"];return t.forEach((function(t){e[t.key]="number"===t.type?42:"text"===t.type?"answer":new Date,"number"!==t.type&&"computed"!==t.type||n.forEach(n=>{e[`${t.key}__${n}`]=42})})),e}(e))&&(t.context=!0)),(t.formula||t.context)&&this._differs(e.error,e.error=function({formula:t,context:e}){try{return""!==t.trim()&&eu.evaluate(t,e),null}catch(t){return t.message}}(e))&&(t.error=!0),(t.formula||t.error)&&this._differs(e.looksLikeColumnData,e.looksLikeColumnData=function({formula:t,error:e}){return!!(t.split("\n").length>4&&!t.includes("(")&&e)}(e))&&(t.looksLikeColumnData=!0),t.$dw_chart&&this._differs(e.computedColumns,e.computedColumns=function({$dw_chart:t}){return au(t)}(e))&&(t.computedColumns=!0),(t.error||t.parserErrors)&&this._differs(e.errDisplay,e.errDisplay=function({error:t,parserErrors:e}){return e.length?Object.entries(Va(e,t=>t.message)).map(([t,e])=>t+("all"!==e[0].row?` (rows ${function(t){let e=0;const n=[];for(let r=1;r<t.length;r++)t[r]-t[e]>r-e&&(n.push(r>e+1?`${t[e]}-${t[r-1]}`:t[e]),e=r);return n.push(t.length>e+1?`${t[e]}-${t[t.length-1]}`:t[e]),n.join(", ")}(e.map(t=>t.row+2))})`:"")).join("<br />"):t||!1}(e))&&(t.errDisplay=!0),t.errDisplay&&this._differs(e.errNiceDisplay,e.errNiceDisplay=function({errDisplay:t}){return t?t.replace("unexpected TOP",as("cc / formula / error / unexpected top")).replace(": Expected EOF","").replace("unexpected TPAREN",as("cc / formula / error / unexpected tparen")).replace("unexpected TBRACKET",as("cc / formula / error / unexpected tparen")).replace("unexpected TEOF: EOF",as("cc / formula / error / unexpected teof")).replace("unexpected TCOMMA",as("cc / formula / error / unexpected tcomma")).replace("unexpected TSEMICOLON",as("cc / formula / error / unexpected tsemicolon")).replace("undefined variable",as("cc / formula / error / undefined variable")).replace("parse error",as("cc / formula / error / parser error")).replace("Unknown character",as("cc / formula / error / unknown-character")).replace("unexpected",as("cc / formula / error / unexpected")).replace("member access is not permitted",as("cc / formula / error / member-access")):t}(e))&&(t.errNiceDisplay=!0),(t.errDisplay||t.formula)&&this._differs(e.formulaHint,e.formulaHint=function({errDisplay:t,formula:e}){if("="===e.trim().charAt(0))return as("cc / formula / hint / equal-sign");if(!t||"string"!=typeof t)return"";const n=t.split("<br />");for(let t=0;t<n.length;t++)if(n[t].startsWith("undefined variable:")){const e=n[t].split(": ")[1].split("(row")[0].trim();if(eu.keywords.includes(e.toUpperCase())&&!eu.keywords.includes(e))return`${as("cc / formula / hint / use")} <tt>${e.toUpperCase()}</tt> ${as("cc / formula / hint / instead-of")} <tt>${e}</tt>`;if("row"===e)return`${as("cc / formula / hint / use")} <tt>ROWNUMBER</tt> ${as("cc / formula / hint / instead-of")} <tt>row</tt>`}const r=(e||"").match(/Math\.([a-zA-Z0-9]+)/);if(r&&eu.keywords.includes(r[1].toUpperCase()))return`${as("cc / formula / hint / use")} <tt>${r[1].toUpperCase()}</tt> ${as("cc / formula / hint / instead-of")} <tt>${r[0]}</tt>`;const o=[{s:"substr",h:"SUBSTR(x, start, length)"},{s:"substring",h:"SUBSTR(x, start, length)"},{s:"replace",h:"REPLACE(x, old, new)"},{s:"indexOf",h:"INDEXOF(x, search)"},{s:"toFixed",h:"ROUND(x, decimals)"},{s:"length",h:"LENGTH(x)"},{s:"trim",h:"TRIM(x)"},{s:"split",h:"SPLIT(x, sep)"},{s:"join",h:"JOIN(x, sep)"},{s:"getFullYear",h:"YEAR(x)"},{s:"getMonth",h:"MONTH(x)"},{s:"getDate",h:"DAY(x)"},{s:"includes",h:"y in x"}];for(let t=0;t<o.length;t++){const{s:n,h:r}=o[t],a=new RegExp("([a-z0-9_]+)\\."+n+"\\("),i=e.match(a);if(i)return`${as("cc / formula / hint / use")} <tt>${r.replace("%x",i[1])}</tt> ${as("cc / formula / hint / instead-of")}<tt>x.${n}()</tt>`}return t.includes('"&"')&&e.includes("&&")?`${as("cc / formula / hint / use")} <tt>x and y</tt> ${as("cc / formula / hint / instead-of")} <tt>x && y</tt>`:t.includes("is not a function")&&e.includes("||")?`${as("cc / formula / hint / use")} <tt>x or y</tt> ${as("cc / formula / hint / instead-of")} <tt>x || y</tt>`:""}(e))&&(t.formulaHint=!0)};var Ou=function(t){if(Array.isArray(t)){const e={};return Object.keys(t).forEach(n=>e[n]=t[n]),e}return t};var Tu={autoDivisor(){const{dw_chart:t}=this.store.get(),{column:e}=this.get(),n=dw.utils.metricSuffix(t.locale()),r=e.values(),o=dw.utils.significantDimension(r);let a=o<-2?3*Math.round(-1*o/3):o>4?-1*o:0;const i=r.map((function(t){return t/Math.pow(10,a)}));let s=dw.utils.significantDimension(i);s<=0&&(s=i.reduce((function(t,e){return Math.max(t,Math.min(3,dw.utils.tailLength(e)))}),0)),s===a&&(a=0,s=0),a>15&&(a=0,s=0),this.set({columnFormat:{"number-divisor":a,"number-format":"n"+Math.max(0,s),"number-prepend":"","number-append":a?n[a]||" × 10<sup>"+a+"</sup>":""}})},getColumnFormat(t){const{dw_chart:e}=this.store.get(),n=Ou(e.get("metadata.data.column-format",{}));let r=Ya(n[t.name()]);return r&&"auto"!==r&&void 0===r.length||(r={type:"auto",ignore:!1,"number-divisor":0,"number-prepend":"","number-append":"","number-format":"auto"}),r}};function Su(){const{column:t}=this.get();this.set({colTypes:[{value:"auto",label:"auto ("+t.type()+")"},{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"}]}),this.set({columnFormat:this.getColumnFormat(t)}),this.on("state",({changed:e,current:n})=>{if(e.column){const e=n.column;this.set({columnFormat:this.getColumnFormat(e)});const{colTypes:r}=this.get();r[0].label="auto ("+t.type()+")"}if(e.columnFormat){const t=n.columnFormat,{dw_chart:e}=this.store.get(),r=n.column,o=Ou(Ya(e.get("metadata.data.column-format",{}))),a=o[r.name()];if(!a||JSON.stringify(a)!==JSON.stringify(t)){if("auto"===t["number-divisor"])return void setTimeout(()=>this.autoDivisor(),100);o[r.name()]=Ya(t),e.set("metadata.data.column-format",o)}}})}function Ru(t,e){var n,r,o,a,i,s,u,c,l,f,h={},p={},d=as("Prepend/Append"),m=!1,v=!1,y={label:as("Round numbers to"),options:e.roundOptions,optgroups:e.numberFormats,width:"180px"};void 0!==e.columnFormat["number-format"]&&(y.value=e.columnFormat["number-format"],h.value=!0);var b=new g.default({root:t.root,store:t.store,data:y,_bind(n,r){var o={};!h.value&&n.value&&(e.columnFormat["number-format"]=r.value,o.columnFormat=e.columnFormat),t._set(o),h={}}});t.root._beforecreate.push(()=>{b._bind({value:1},b.get())});var w={label:as("Divide numbers by"),options:e.divisors_opts,optgroups:e.divisors,width:"180px"};void 0!==e.columnFormat["number-divisor"]&&(w.value=e.columnFormat["number-divisor"],p.value=!0);var _=new g.default({root:t.root,store:t.store,data:w,_bind(n,r){var o={};!p.value&&n.value&&(e.columnFormat["number-divisor"]=r.value,o.columnFormat=e.columnFormat),t._set(o),p={}}});function x(){m=!0,e.columnFormat["number-prepend"]=c.value,t.set({columnFormat:e.columnFormat}),m=!1}function N(){v=!0,e.columnFormat["number-append"]=f.value,t.set({columnFormat:e.columnFormat}),v=!1}return t.root._beforecreate.push(()=>{_._bind({value:1},_.get())}),{c(){b._fragment.c(),n=R("\n\n        "),_._fragment.c(),r=R("\n\n        "),o=T("div"),a=T("label"),i=R(d),s=R("\n            "),u=T("div"),c=T("input"),l=R("\n                #\n                "),f=T("input"),a.className="control-label svelte-1qp115j",I(c,"input",x),c.autocomplete="screw-you-google-chrome",P(c,"width","6ex"),P(c,"text-align","right"),c.dataset.lpignore="true",c.name="prepend",j(c,"type","text"),I(f,"input",N),f.autocomplete="screw-you-google-chrome",P(f,"width","6ex"),f.dataset.lpignore="true",f.name="append",j(f,"type","text"),u.className="controls form-inline svelte-1qp115j",o.className="control-group vis-option-type-select"},m(t,h){b._mount(t,h),A(t,n,h),_._mount(t,h),A(t,r,h),A(t,o,h),M(o,a),M(a,i),M(o,s),M(o,u),M(u,c),c.value=e.columnFormat["number-prepend"],M(u,l),M(u,f),f.value=e.columnFormat["number-append"]},p(t,n){e=n;var r={};t.roundOptions&&(r.options=e.roundOptions),t.numberFormats&&(r.optgroups=e.numberFormats),!h.value&&t.columnFormat&&(r.value=e.columnFormat["number-format"],h.value=void 0!==e.columnFormat["number-format"]),b._set(r),h={};var o={};t.divisors_opts&&(o.options=e.divisors_opts),t.divisors&&(o.optgroups=e.divisors),!p.value&&t.columnFormat&&(o.value=e.columnFormat["number-divisor"],p.value=void 0!==e.columnFormat["number-divisor"]),_._set(o),p={},!m&&t.columnFormat&&(c.value=e.columnFormat["number-prepend"]),!v&&t.columnFormat&&(f.value=e.columnFormat["number-append"])},d(t){b.destroy(t),t&&C(n),_.destroy(t),t&&(C(r),C(o)),L(c,"input",x),L(f,"input",N)}}}function Du(t){q(this,t),this._state=N({columnFormat:{type:"auto",ignore:!1,"number-divisor":0,"number-format":"auto","number-prepend":"","number-append":""},colTypes:[],divisors_opts:[{value:0,label:as("describe / column-format / no-change")},{value:"auto",label:as("describe / column-format / automatic")}],divisors:[{label:as("describe / column-format / divide-by"),options:[{value:3,label:"1000"},{value:6,label:as("describe / column-format / million")},{value:9,label:as("describe / column-format / billion")}]},{label:as("describe / column-format / multiply-by"),options:[{value:-2,label:"100"},{value:-3,label:"1000"},{value:-6,label:as("describe / column-format / million")},{value:-9,label:as("describe / column-format / billion")},{value:-12,label:as("describe / column-format / trillion")}]}],numberFormats:[{label:as("Decimal places"),options:[{value:"n3",label:"3 (1,234.568)"},{value:"n2",label:"2 (1,234.57)"},{value:"n1",label:"1 (1,234.6)"},{value:"n0",label:"0 (1,235)"}]},{label:as("Significant digits"),options:[{value:"s6",label:"6 (1,234.57)"},{value:"s5",label:"5 (123.45)"},{value:"s4",label:"4 (12.34)"},{value:"s3",label:"3 (1.23)"},{value:"s2",label:"2 (0.12)"},{value:"s1",label:"1 (0.01)"}]}],roundOptions:[{value:"-",label:as("describe / column-format / individual")},{value:"auto",label:as("describe / column-format / auto-detect")}]},t.data),this._recompute({column:1},this._state),this._intro=!0,this._fragment=function(t,e){var n,r,o,a,i,s,u,c,l,f={},h={},p={label:as("Column type"),options:e.colTypes,width:"180px"};void 0!==e.columnFormat.type&&(p.value=e.columnFormat.type,f.value=!0);var d=new g.default({root:t.root,store:t.store,data:p,_bind(n,r){var o={};!f.value&&n.value&&(e.columnFormat.type=r.value,o.columnFormat=e.columnFormat),t._set(o),f={}}});t.root._beforecreate.push(()=>{d._bind({value:1},d.get())});var m={label:as("Hide column from visualization")};void 0!==e.columnFormat.ignore&&(m.value=e.columnFormat.ignore,h.value=!0);var y=new v.default({root:t.root,store:t.store,data:m,_bind(n,r){var o={};!h.value&&n.value&&(e.columnFormat.ignore=r.value,o.columnFormat=e.columnFormat),t._set(o),h={}}});t.root._beforecreate.push(()=>{y._bind({value:1},y.get())});var b=e.column&&"number"==e.column.type()&&Ru(t,e);return{c(){n=T("div"),r=T("h3"),o=R(e.title),a=R("\n\n    "),i=T("div"),d._fragment.c(),s=R("\n\n        "),y._fragment.c(),u=R("\n\n        "),c=T("hr"),l=R("\n\n        "),b&&b.c(),r.className="first",i.className="form-horizontal"},m(t,e){A(t,n,e),M(n,r),M(r,o),M(n,a),M(n,i),d._mount(i,null),M(i,s),y._mount(i,null),M(i,u),M(i,c),M(i,l),b&&b.m(i,null)},p(n,r){e=r,n.title&&F(o,e.title);var a={};n.colTypes&&(a.options=e.colTypes),!f.value&&n.columnFormat&&(a.value=e.columnFormat.type,f.value=void 0!==e.columnFormat.type),d._set(a),f={};var s={};!h.value&&n.columnFormat&&(s.value=e.columnFormat.ignore,h.value=void 0!==e.columnFormat.ignore),y._set(s),h={},e.column&&"number"==e.column.type()?b?b.p(n,e):((b=Ru(t,e)).c(),b.m(i,null)):b&&(b.d(1),b=null)},d(t){t&&C(n),d.destroy(),y.destroy(),b&&b.d()}}}(this,this._state),this.root._oncreate.push(()=>{Su.call(this),this.fire("update",{changed:E({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),V(this))}N(Du.prototype,X),N(Du.prototype,Tu),Du.prototype._recompute=function(t,e){t.column&&this._differs(e.title,e.title=function({column:t}){return as("describe / edit-column","core",{s:`"${t?t.title()||t.name():"--"}"`})}(e))&&(t.title=!0)};var Iu=Math.ceil,Lu=Math.max;var ju=dn,Fu=nn,Pu=Ae,Hu=Q;var $u=Dt;var Uu=function(t,e,n,r){for(var o=-1,a=Lu(Iu((e-t)/(n||1)),0),i=Array(a);a--;)i[r?a:++o]=t,t+=n;return i},Bu=function(t,e,n){if(!Hu(n))return!1;var r=typeof e;return!!("number"==r?Fu(n)&&Pu(e,n.length):"string"==r&&e in n)&&ju(n[e],t)},zu=function(t){return t?(t=$u(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Vu=function(t){return function(e,n,r){return r&&"number"!=typeof r&&Bu(e,n,r)&&(n=r=void 0),e=zu(e),void 0===n?(n=e,e=0):n=zu(n),r=void 0===r?e<n?1:-1:zu(r),Uu(e,n,r,t)}}(),Yu=le,qu=$a,Wu=Object.prototype.hasOwnProperty,Gu=qu((function(t,e,n){Wu.call(t,n)?++t[n]:Yu(t,n,1)}));const Ku=(J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})((function(t){return Math.max(0,String(t-Math.floor(t)).replace(/00000*[0-9]+$/,"").replace(/33333*[0-9]+$/,"").replace(/99999*[0-9]+$/,"").length-2)}));var Xu=function(t){return(+t).toFixed((0,Ku.default)(t))};function Ju(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zu(t){let e=t,n=t;function r(t,e,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const a=r+o>>>1;n(t[a],e)<0?r=a+1:o=a}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>Ju(t(e),n)}(t)),{left:r,center:function(t,n,o,a){null==o&&(o=0),null==a&&(a=t.length);const i=r(t,n,o,a-1);return i>o&&e(t[i-1],n)>-e(t[i],n)?i-1:i},right:function(t,e,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const a=r+o>>>1;n(t[a],e)>0?o=a:r=a+1}return r}}}const Qu=Zu(Ju).right;Zu((function(t){return null===t?NaN:+t})).center;var tc=Qu;function ec(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let o=-1;for(let a of t)null!=(a=e(a,++o,t))&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}function nc(t){return t}var rc=Array.prototype.slice;function oc(t){return function(){return t}}var ac=Math.sqrt(50),ic=Math.sqrt(10),sc=Math.sqrt(2);function uc(t,e,n){var r,o,a,i,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(i=cc(t,e,n))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),e=Math.floor(e/i),a=new Array(o=Math.ceil(e-t+1));++s<o;)a[s]=(t+s)*i;else for(i=-i,t=Math.ceil(t*i),e=Math.floor(e*i),a=new Array(o=Math.ceil(e-t+1));++s<o;)a[s]=(t+s)/i;return r&&a.reverse(),a}function cc(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,o);return o>=0?(a>=ac?10:a>=ic?5:a>=sc?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=ac?10:a>=ic?5:a>=sc?2:1)}function lc(t){return Math.ceil(Math.log(function(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(o=+o)>=o&&++n}return n}(t))/Math.LN2)+1}function fc(){var t=nc,e=ec,n=lc;function r(r){Array.isArray(r)||(r=Array.from(r));var o,a,i=r.length,s=new Array(i);for(o=0;o<i;++o)s[o]=t(r[o],o,r);var u=e(s),c=u[0],l=u[1],f=n(s,c,l);Array.isArray(f)||(f=+f,e===ec&&([c,l]=function(t,e,n){let r;for(;;){const o=cc(t,e,n);if(o===r||0===o||!isFinite(o))return[t,e];o>0?(t=Math.floor(t/o)*o,e=Math.ceil(e/o)*o):o<0&&(t=Math.ceil(t*o)/o,e=Math.floor(e*o)/o),r=o}}(c,l,f)),(f=uc(c,l,f))[f.length-1]===l&&f.pop());for(var h=f.length;f[0]<=c;)f.shift(),--h;for(;f[h-1]>l;)f.pop(),--h;var p,d=new Array(h+1);for(o=0;o<=h;++o)(p=d[o]=[]).x0=o>0?f[o-1]:c,p.x1=o<h?f[o]:l;for(o=0;o<i;++o)c<=(a=s[o])&&a<=l&&d[tc(f,a,0,h)].push(r[o]);return d}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:oc(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:oc([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?oc(rc.call(t)):oc(t),r):n},r}function hc(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function pc(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function dc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function mc(t,e,n){if(r=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n))).length){if((e=+e)<=0||r<2)return pc(t);if(e>=1)return hc(t);var r,o=(r-1)*e,a=Math.floor(o),i=hc(function t(e,n,r=0,o=e.length-1,a=Ju){for(;o>r;){if(o-r>600){const i=o-r+1,s=n-r+1,u=Math.log(i),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(i-c)/i)*(s-i/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*c/i+l)),Math.min(o,Math.floor(n+(i-s)*c/i+l)),a)}const i=e[n];let s=r,u=o;for(dc(e,r,n),a(e[o],i)>0&&dc(e,r,o);s<u;){for(dc(e,s,u),++s,--u;a(e[s],i)<0;)++s;for(;a(e[u],i)>0;)--u}0===a(e[r],i)?dc(e,r,u):(++u,dc(e,u,o)),u<=n&&(r=u+1),n<=u&&(o=u-1)}return e}(t,a).subarray(0,a+1));return i+(pc(t.subarray(a+1))-i)*(o-a)}}function vc(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(o);++r<o;)a[r]=t+r*n;return a}function gc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const yc=Symbol("implicit");function bc(){var t=new Map,e=[],n=[],r=yc;function o(o){var a=o+"",i=t.get(a);if(!i){if(r!==yc)return r;t.set(a,i=e.push(o))}return n[(i-1)%n.length]}return o.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return o},o.range=function(t){return arguments.length?(n=Array.from(t),o):n.slice()},o.unknown=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return bc(e,n).unknown(r)},gc.apply(o,arguments),o}function wc(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _c(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xc(){}var Nc="\\s*([+-]?\\d+)\\s*",Ec="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ac=/^#([0-9a-f]{3,8})$/,Cc=new RegExp("^rgb\\("+[Nc,Nc,Nc]+"\\)$"),kc=new RegExp("^rgb\\("+[Mc,Mc,Mc]+"\\)$"),Oc=new RegExp("^rgba\\("+[Nc,Nc,Nc,Ec]+"\\)$"),Tc=new RegExp("^rgba\\("+[Mc,Mc,Mc,Ec]+"\\)$"),Sc=new RegExp("^hsl\\("+[Ec,Mc,Mc]+"\\)$"),Rc=new RegExp("^hsla\\("+[Ec,Mc,Mc,Ec]+"\\)$"),Dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ic(){return this.rgb().formatHex()}function Lc(){return this.rgb().formatRgb()}function jc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ac.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Fc(e):3===n?new Uc(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Pc(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Pc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Cc.exec(t))?new Uc(e[1],e[2],e[3],1):(e=kc.exec(t))?new Uc(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Oc.exec(t))?Pc(e[1],e[2],e[3],e[4]):(e=Tc.exec(t))?Pc(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Sc.exec(t))?Yc(e[1],e[2]/100,e[3]/100,1):(e=Rc.exec(t))?Yc(e[1],e[2]/100,e[3]/100,e[4]):Dc.hasOwnProperty(t)?Fc(Dc[t]):"transparent"===t?new Uc(NaN,NaN,NaN,0):null}function Fc(t){return new Uc(t>>16&255,t>>8&255,255&t,1)}function Pc(t,e,n,r){return r<=0&&(t=e=n=NaN),new Uc(t,e,n,r)}function Hc(t){return t instanceof xc||(t=jc(t)),t?new Uc((t=t.rgb()).r,t.g,t.b,t.opacity):new Uc}function $c(t,e,n,r){return 1===arguments.length?Hc(t):new Uc(t,e,n,null==r?1:r)}function Uc(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Bc(){return"#"+Vc(this.r)+Vc(this.g)+Vc(this.b)}function zc(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Vc(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Yc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wc(t,e,n,r)}function qc(t){if(t instanceof Wc)return new Wc(t.h,t.s,t.l,t.opacity);if(t instanceof xc||(t=jc(t)),!t)return new Wc;if(t instanceof Wc)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,s=a-o,u=(a+o)/2;return s?(i=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+o:2-a-o,i*=60):s=u>0&&u<1?0:i,new Wc(i,s,u,t.opacity)}function Wc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Gc(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}wc(xc,jc,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ic,formatHex:Ic,formatHsl:function(){return qc(this).formatHsl()},formatRgb:Lc,toString:Lc}),wc(Uc,$c,_c(xc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Uc(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Uc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bc,formatHex:Bc,formatRgb:zc,toString:zc})),wc(Wc,(function(t,e,n,r){return 1===arguments.length?qc(t):new Wc(t,e,n,null==r?1:r)}),_c(xc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Wc(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Wc(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Uc(Gc(t>=240?t-240:t+120,o,r),Gc(t,o,r),Gc(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Kc=t=>()=>t;function Xc(t){return 1==(t=+t)?Jc:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Kc(isNaN(e)?n:e)}}function Jc(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Kc(isNaN(t)?e:t)}var Zc=function t(e){var n=Xc(e);function r(t,e){var r=n((t=$c(t)).r,(e=$c(e)).r),o=n(t.g,e.g),a=n(t.b,e.b),i=Jc(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=i(e),t+""}}return r.gamma=t,r}(1);function Qc(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,o=e.slice();return function(a){for(n=0;n<r;++n)o[n]=t[n]*(1-a)+e[n]*a;return o}}function tl(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,a=new Array(o),i=new Array(r);for(n=0;n<o;++n)a[n]=sl(t[n],e[n]);for(;n<r;++n)i[n]=e[n];return function(t){for(n=0;n<o;++n)i[n]=a[n](t);return i}}function el(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function nl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function rl(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=sl(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var ol=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,al=new RegExp(ol.source,"g");function il(t,e){var n,r,o,a=ol.lastIndex=al.lastIndex=0,i=-1,s=[],u=[];for(t+="",e+="";(n=ol.exec(t))&&(r=al.exec(e));)(o=r.index)>a&&(o=e.slice(a,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,u.push({i:i,x:nl(n,r)})),a=al.lastIndex;return a<e.length&&(o=e.slice(a),s[i]?s[i]+=o:s[++i]=o),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function sl(t,e){var n,r,o=typeof e;return null==e||"boolean"===o?Kc(e):("number"===o?nl:"string"===o?(n=jc(e))?(e=n,Zc):il:e instanceof jc?Zc:e instanceof Date?el:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?tl:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?rl:nl:Qc))(t,e)}function ul(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function cl(t){return+t}var ll=[0,1];function fl(t){return t}function hl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function pl(t,e,n){var r=t[0],o=t[1],a=e[0],i=e[1];return o<r?(r=hl(o,r),a=n(i,a)):(r=hl(r,o),a=n(a,i)),function(t){return a(r(t))}}function dl(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),a=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)o[i]=hl(t[i],t[i+1]),a[i]=n(e[i],e[i+1]);return function(e){var n=tc(t,e,1,r)-1;return a[n](o[n](e))}}function ml(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vl(){var t,e,n,r,o,a,i=ll,s=ll,u=sl,c=fl;function l(){var t,e,n,u=Math.min(i.length,s.length);return c!==fl&&(t=i[0],e=i[u-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?dl:pl,o=a=null,f}function f(e){return isNaN(e=+e)?n:(o||(o=r(i.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((a||(a=r(s,i.map(t),nl)))(n)))},f.domain=function(t){return arguments.length?(i=Array.from(t,cl),l()):i.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=ul,l()},f.clamp=function(t){return arguments.length?(c=!!t||fl,l()):c!==fl},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function gl(){return vl()(fl,fl)}function yl(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function bl(t){return(t=yl(Math.abs(t)))?t[1]:NaN}var wl,_l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xl(t){if(!(e=_l.exec(t)))throw new Error("invalid format: "+t);var e;return new Nl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Nl(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function El(t,e){var n=yl(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}xl.prototype=Nl.prototype,Nl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ml={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>El(100*t,e),r:El,s:function(t,e){var n=yl(t,e);if(!n)return t+"";var r=n[0],o=n[1],a=o-(wl=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+yl(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Al(t){return t}var Cl,kl,Ol,Tl=Array.prototype.map,Sl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Rl(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Al:(e=Tl.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var o=t.length,a=[],i=0,s=e[0],u=0;o>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(t.substring(o-=s,o+s)),!((u+=s+1)>r));)s=e[i=(i+1)%e.length];return a.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Al:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Tl.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=xl(t)).fill,n=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,m=t.comma,v=t.precision,g=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Ml[y]||(void 0===v&&(v=12),g=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var b="$"===h?o:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===h?a:/[%p]/.test(y)?u:"",_=Ml[y],x=/[defgprs%]/.test(y);function N(t){var o,a,u,h=b,N=w;if("c"===y)N=_(t)+N,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,o=-1;r<n;++r)switch(t[r]){case".":o=e=r;break;case"0":0===o&&(o=r),e=r;break;default:if(!+t[r])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==f&&(E=!1),h=(E?"("===f?f:c:"-"===f||"("===f?"":f)+h,N=("s"===y?Sl[8+wl/3]:"")+N+(E&&"("===f?")":""),x)for(o=-1,a=t.length;++o<a;)if(48>(u=t.charCodeAt(o))||u>57){N=(46===u?i+t.slice(o+1):t.slice(o))+N,t=t.slice(0,o);break}}m&&!p&&(t=r(t,1/0));var M=h.length+t.length+N.length,A=M<d?new Array(d-M+1).join(e):"";switch(m&&p&&(t=r(A+t,A.length?d-N.length:1/0),A=""),n){case"<":t=h+t+N+A;break;case"=":t=h+A+t+N;break;case"^":t=A.slice(0,M=A.length>>1)+h+t+N+A.slice(M);break;default:t=A+h+t+N}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),N.toString=function(){return t+""},N}return{format:f,formatPrefix:function(t,e){var n=f(((t=xl(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(bl(e)/3))),o=Math.pow(10,-r),a=Sl[8+r/3];return function(t){return n(o*t)+a}}}}function Dl(t,e,n,r){var o,a=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/o;return a>=ac?o*=10:a>=ic?o*=5:a>=sc&&(o*=2),e<t?-o:o}(t,e,n);switch((r=xl(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(bl(e)/3)))-bl(Math.abs(t)))}(a,i))||(r.precision=o),Ol(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bl(e)-bl(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-bl(Math.abs(t)))}(a))||(r.precision=o-2*("%"===r.type))}return kl(r)}function Il(t){var e=t.domain;return t.ticks=function(t){var n=e();return uc(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Dl(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,a=e(),i=0,s=a.length-1,u=a[i],c=a[s],l=10;for(c<u&&(o=u,u=c,c=o,o=i,i=s,s=o);l-- >0;){if((o=cc(u,c,n))===r)return a[i]=u,a[s]=c,e(a);if(o>0)u=Math.floor(u/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;u=Math.ceil(u*o)/o,c=Math.floor(c*o)/o}r=o}return t},t}function Ll(){var t=gl();return t.copy=function(){return ml(t,Ll())},gc.apply(t,arguments),Il(t)}Cl=Rl({thousands:",",grouping:[3],currency:["$",""]}),kl=Cl.format,Ol=Cl.formatPrefix;var jl=Ll(),Fl=function t(){var e,n,r=bc().unknown(void 0),o=r.domain,a=r.range,i=0,s=1,u=!1,c=0,l=0,f=.5;function h(){var t=o().length,r=s<i,h=r?s:i,p=r?i:s;e=(p-h)/Math.max(1,t-c+2*l),u&&(e=Math.floor(e)),h+=(p-h-e*(t-c))*f,n=e*(1-c),u&&(h=Math.round(h),n=Math.round(n));var d=vc(t).map((function(t){return h+e*t}));return a(r?d.reverse():d)}return delete r.unknown,r.domain=function(t){return arguments.length?(o(t),h()):o()},r.range=function(t){return arguments.length?([i,s]=t,i=+i,s=+s,h()):[i,s]},r.rangeRound=function(t){return[i,s]=t,i=+i,s=+s,u=!0,h()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(t){return arguments.length?(u=!!t,h()):u},r.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),h()):c},r.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),h()):c},r.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},r.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),h()):f},r.copy=function(){return t(o(),[i,s]).round(u).paddingInner(c).paddingOuter(l).align(f)},gc.apply(h(),arguments)}(),Pl=Ll();const Hl=t=>t?t<.01?"<1%":(100*t).toFixed(0)+"%":"0%";function $l({validValues:t,format:e}){const n=pc(t),r=hc(t),o=function(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let o=-1;for(let a of t)null!=(a=e(a,++o,t))&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}(t),a=mc(t,.5,i);var i;return[{x:n,label:e(n),name:as("describe / histogram / min")},{x:r,label:e(r),name:as("describe / histogram / max")},{x:o,label:e(o),name:as("describe / histogram / mean")},{x:a,label:e(a),name:as("describe / histogram / median")}]}function Ul(t,e,n,r){return(0===e?as("describe / histogram / tooltip / first"):e===n.length-1?as("describe / histogram / tooltip / last"):as("describe / histogram / tooltip")).replace("$1",t.length).replace("$2",Hl(t.length/r)).replace("$3",Xu(t.x0)).replace("$4",Xu(t.x1))}var Bl={show(t){this.set({highlight:t})},resize:function(){var t=this.refs.svg.getBoundingClientRect();this.set({width:t.right-t.left,height:t.bottom-t.top})}};function zl(){this.resize()}function Vl(t){const{component:e,ctx:n}=this._svelte;e.show(n.s)}function Yl(t){const{component:e}=this._svelte;e.show(!1)}function ql(t,e,n){const r=Object.create(t);return r.s=e[n],r}function Wl(t,e,n){const r=Object.create(t);return r.bin=e[n],r.i=n,r}function Gl(t,e,n){const r=Object.create(t);return r.tick=e[n],r}function Kl(t,e){var n,r,o,a,i,s=e.tick.label;return{c(){n=S("g"),r=S("line"),o=S("text"),a=R(s),j(r,"y2","3"),j(r,"class","svelte-p5ucpx"),j(o,"y","5"),j(o,"class","svelte-p5ucpx"),j(n,"class","tick svelte-p5ucpx"),j(n,"transform",i="translate("+e.xScale(e.tick.x)+",0)")},m(t,e){A(t,n,e),M(n,r),M(n,o),M(o,a)},p(t,e){t.ticks&&s!==(s=e.tick.label)&&F(a,s),(t.xScale||t.ticks)&&i!==(i="translate("+e.xScale(e.tick.x)+",0)")&&j(n,"transform",i)},d(t){t&&C(n)}}}function Xl(t,e){var n,r;return{c(){j(n=S("polygon"),"transform",r="translate("+e.xScale(e.highlight.x)+",0)"),j(n,"points","0,0,4,6,-4,6")},m(t,e){A(t,n,e)},p(t,e){(t.xScale||t.highlight)&&r!==(r="translate("+e.xScale(e.highlight.x)+",0)")&&j(n,"transform",r)},d(t){t&&C(n)}}}function Jl(t,e){var n,r,o,a,i,s,u,c=Ul(e.bin,e.i,e.bins,e.validValues.length);return{c(){n=S("g"),r=S("title"),o=R(c),j(a=S("rect"),"width",i=e.bin.x1!=e.bin.x0?e.xScaleBand.bandwidth():20),j(a,"height",s=e.innerHeight-e.yScale(e.bin.length)),j(a,"class","svelte-p5ucpx"),j(n,"class","bar"),j(n,"transform",u="translate("+e.xScaleBand(e.bin.x0)+","+e.yScale(e.bin.length)+")")},m(t,e){A(t,n,e),M(n,r),M(r,o),M(n,a)},p(t,e){(t.bins||t.validValues)&&c!==(c=Ul(e.bin,e.i,e.bins,e.validValues.length))&&F(o,c),(t.bins||t.xScaleBand)&&i!==(i=e.bin.x1!=e.bin.x0?e.xScaleBand.bandwidth():20)&&j(a,"width",i),(t.innerHeight||t.yScale||t.bins)&&s!==(s=e.innerHeight-e.yScale(e.bin.length))&&j(a,"height",s),(t.xScaleBand||t.bins||t.yScale)&&u!==(u="translate("+e.xScaleBand(e.bin.x0)+","+e.yScale(e.bin.length)+")")&&j(n,"transform",u)},d(t){t&&C(n)}}}function Zl(t,e){var n,r,o,a,i,s=e.s.name,u=e.s.label;return{c(){n=T("li"),r=R(s),o=R(": "),a=T("tt"),i=R(u),a._svelte={component:t,ctx:e},I(a,"mouseleave",Yl),I(a,"mouseenter",Vl),a.className="svelte-p5ucpx",n.className="svelte-p5ucpx"},m(t,e){A(t,n,e),M(n,r),M(n,o),M(n,a),M(a,i)},p(t,n){e=n,t.stats&&s!==(s=e.s.name)&&F(r,s),t.stats&&u!==(u=e.s.label)&&F(i,u),a._svelte.ctx=e},d(t){t&&C(n),L(a,"mouseleave",Yl),L(a,"mouseenter",Vl)}}}function Ql(t,e){var n,r,o,a,i,s,u,c,l=as("describe / histogram / invalid"),f=Hl(e.NAs/e.values.length);return{c(){n=T("li"),r=R(l),o=R(":\n        "),a=T("tt"),i=R(e.NAs),s=R(" ("),u=R(f),c=R(")"),P(a,"color","#c71e1d"),a.className="svelte-p5ucpx",n.className="svelte-p5ucpx"},m(t,e){A(t,n,e),M(n,r),M(n,o),M(n,a),M(a,i),M(n,s),M(n,u),M(n,c)},p(t,e){t.NAs&&F(i,e.NAs),(t.NAs||t.values)&&f!==(f=Hl(e.NAs/e.values.length))&&F(u,f)},d(t){t&&C(n)}}}function tf(t){q(this,t),this.refs={},this._state=N({format:t=>t,t:0,padding:{top:10,right:65,bottom:20,left:5},height:200,width:500,values:[],highlight:!1},t.data),this._recompute({values:1,validValues:1,format:1,niceDomain:1,width:1,padding:1,bins:1,innerWidth:1,xScaleBand:1,xScale:1,height:1,innerHeight:1},this._state),this._intro=!0,this._fragment=function(t,e){for(var n,r,o,a,i,s,u,c,l,f,h,p,d,m,v,g=as("describe / histogram"),y=as("describe / histogram / learn-more"),b=e.ticks,w=[],_=0;_<b.length;_+=1)w[_]=Kl(t,Gl(e,b,_));var x=e.highlight&&Xl(t,e),N=e.bins,E=[];for(_=0;_<N.length;_+=1)E[_]=Jl(t,Wl(e,N,_));var O=e.stats,I=[];for(_=0;_<O.length;_+=1)I[_]=Zl(t,ql(e,O,_));var L=e.NAs>0&&Ql(t,e);return{c(){n=T("h3"),r=R(g),o=R("\n"),a=S("svg"),i=S("g"),s=S("g");for(var t=0;t<w.length;t+=1)w[t].c();u=D(),x&&x.c(),l=S("g");for(t=0;t<E.length;t+=1)E[t].c();h=R("\n"),p=T("ul");for(t=0;t<I.length;t+=1)I[t].c();d=R(" "),L&&L.c(),m=R("\n"),v=T("p"),n.className="svelte-p5ucpx",j(s,"class","axis x-axis svelte-p5ucpx"),j(s,"transform",c="translate(0, "+e.innerHeight+")"),j(l,"class","bars svelte-p5ucpx"),j(i,"transform",f="translate("+[e.padding.left,e.padding.top]+")"),j(a,"class","svelte-p5ucpx"),p.className="svelte-p5ucpx",v.className="learn-more"},m(e,c){A(e,n,c),M(n,r),A(e,o,c),A(e,a,c),M(a,i),M(i,s);for(var f=0;f<w.length;f+=1)w[f].m(s,null);M(s,u),x&&x.m(s,null),M(i,l);for(f=0;f<E.length;f+=1)E[f].m(l,null);t.refs.svg=a,A(e,h,c),A(e,p,c);for(f=0;f<I.length;f+=1)I[f].m(p,null);M(p,d),L&&L.m(p,null),A(e,m,c),A(e,v,c),v.innerHTML=y},p(e,n){if(e.xScale||e.ticks){b=n.ticks;for(var r=0;r<b.length;r+=1){const o=Gl(n,b,r);w[r]?w[r].p(e,o):(w[r]=Kl(t,o),w[r].c(),w[r].m(s,u))}for(;r<w.length;r+=1)w[r].d(1);w.length=b.length}if(n.highlight?x?x.p(e,n):((x=Xl(t,n)).c(),x.m(s,null)):x&&(x.d(1),x=null),e.innerHeight&&c!==(c="translate(0, "+n.innerHeight+")")&&j(s,"transform",c),e.xScaleBand||e.bins||e.yScale||e.innerHeight||e.validValues){N=n.bins;for(r=0;r<N.length;r+=1){const o=Wl(n,N,r);E[r]?E[r].p(e,o):(E[r]=Jl(t,o),E[r].c(),E[r].m(l,null))}for(;r<E.length;r+=1)E[r].d(1);E.length=N.length}if(e.padding&&f!==(f="translate("+[n.padding.left,n.padding.top]+")")&&j(i,"transform",f),e.stats){O=n.stats;for(r=0;r<O.length;r+=1){const o=ql(n,O,r);I[r]?I[r].p(e,o):(I[r]=Zl(t,o),I[r].c(),I[r].m(p,d))}for(;r<I.length;r+=1)I[r].d(1);I.length=O.length}n.NAs>0?L?L.p(e,n):((L=Ql(t,n)).c(),L.m(p,null)):L&&(L.d(1),L=null)},d(e){e&&(C(n),C(o),C(a)),k(w,e),x&&x.d(),k(E,e),t.refs.svg===a&&(t.refs.svg=null),e&&(C(h),C(p)),k(I,e),L&&L.d(),e&&(C(m),C(v))}}}(this,this._state),this.root._oncreate.push(()=>{zl.call(this),this.fire("update",{changed:E({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),V(this))}N(tf.prototype,X),N(tf.prototype,Bl),tf.prototype._recompute=function(t,e){t.values&&(this._differs(e.NAs,e.NAs=function({values:t}){return t.filter(t=>"string"==typeof t||Number.isNaN(t)).length}(e))&&(t.NAs=!0),this._differs(e.validValues,e.validValues=function({values:t}){return t.filter(t=>"number"==typeof t&&!Number.isNaN(t))}(e))&&(t.validValues=!0)),(t.validValues||t.format)&&this._differs(e.stats,e.stats=$l(e))&&(t.stats=!0),t.validValues&&this._differs(e.niceDomain,e.niceDomain=function({validValues:t}){return Ll().domain(ec(t)).nice().domain()}(e))&&(t.niceDomain=!0),(t.niceDomain||t.validValues)&&this._differs(e.bins,e.bins=function({niceDomain:t,validValues:e}){const n=t,r=fc().domain(n).thresholds(lc)(e),o=Gu(r.map(t=>t.x1-t.x0));if(r.length>2&&Object.keys(o).length>1){const t=r[1].x1-r[1].x0,o=n[0]+Math.ceil((n[1]-n[0])/t)*t;return fc().domain([n[0],o]).thresholds(Vu(n[0],o+.4*t,t))(e)}return r}(e))&&(t.bins=!0),(t.width||t.padding)&&this._differs(e.innerWidth,e.innerWidth=function({width:t,padding:e}){return t-e.left-e.right}(e))&&(t.innerWidth=!0),(t.bins||t.innerWidth)&&this._differs(e.xScaleBand,e.xScaleBand=function({bins:t,innerWidth:e}){return Fl.domain(t.map(t=>t.x0)).paddingInner(.1).rangeRound([0,e]).align(0)}(e))&&(t.xScaleBand=!0),(t.niceDomain||t.bins||t.xScaleBand)&&this._differs(e.xScale,e.xScale=function({niceDomain:t,bins:e,xScaleBand:n}){return jl.domain(t).rangeRound([0,n.step()*e.length])}(e))&&(t.xScale=!0),(t.xScale||t.format)&&this._differs(e.ticks,e.ticks=function({xScale:t,format:e}){return t.ticks(4).map(t=>({x:t,label:e(t)}))}(e))&&(t.ticks=!0),(t.height||t.padding)&&this._differs(e.innerHeight,e.innerHeight=function({height:t,padding:e}){return t-e.bottom-e.top}(e))&&(t.innerHeight=!0),(t.innerHeight||t.bins)&&this._differs(e.yScale,e.yScale=function({innerHeight:t,bins:e}){return Pl.domain([0,hc(e,(function(t){return t.length}))]).range([t,0])}(e))&&(t.yScale=!0),(t.bins||t.xScale)&&this._differs(e.barWidth,e.barWidth=function({bins:t,xScale:e}){return e(t[0].x1)-e(t[0].x0)-1}(e))&&(t.barWidth=!0)};var ef={},nf={exports:{}};!function(t,e){t.exports=function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof J&&J.global===J&&J||Function("return this")()||{},e=Array.prototype,n=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,o=e.push,a=e.slice,i=n.toString,s=n.hasOwnProperty,u="undefined"!=typeof ArrayBuffer,c="undefined"!=typeof DataView,l=Array.isArray,f=Object.keys,h=Object.create,p=u&&ArrayBuffer.isView,d=isNaN,m=isFinite,v=!{toString:null}.propertyIsEnumerable("toString"),g=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],y=Math.pow(2,53)-1;function b(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var a=Array(e+1);for(o=0;o<e;o++)a[o]=arguments[o];return a[e]=r,t.apply(this,a)}}function w(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function _(t){return void 0===t}function x(t){return!0===t||!1===t||"[object Boolean]"===i.call(t)}function N(t){var e="[object "+t+"]";return function(t){return i.call(t)===e}}var E=N("String"),M=N("Number"),A=N("Date"),C=N("RegExp"),k=N("Error"),O=N("Symbol"),T=N("ArrayBuffer"),S=N("Function"),R=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof R&&(S=function(t){return"function"==typeof t||!1});var D=S,I=N("Object"),L=c&&I(new DataView(new ArrayBuffer(8))),j="undefined"!=typeof Map&&I(new Map),F=N("DataView"),P=L?function(t){return null!=t&&D(t.getInt8)&&T(t.buffer)}:F,H=l||N("Array");function $(t,e){return null!=t&&s.call(t,e)}var U=N("Arguments");!function(){U(arguments)||(U=function(t){return $(t,"callee")})}();var B=U;function z(t){return M(t)&&d(t)}function V(t){return function(){return t}}function Y(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=y}}function q(t){return function(e){return null==e?void 0:e[t]}}var W=q("byteLength"),G=Y(W),K=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,X=u?function(t){return p?p(t)&&!P(t):G(t)&&K.test(i.call(t))}:V(!1),Z=q("length");function Q(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var r=g.length,o=t.constructor,a=D(o)&&o.prototype||n,i="constructor";for($(t,i)&&!e.contains(i)&&e.push(i);r--;)(i=g[r])in t&&t[i]!==a[i]&&!e.contains(i)&&e.push(i)}function tt(t){if(!w(t))return[];if(f)return f(t);var e=[];for(var n in t)$(t,n)&&e.push(n);return v&&Q(t,e),e}function et(t,e){var n=tt(e),r=n.length;if(null==t)return!r;for(var o=Object(t),a=0;a<r;a++){var i=n[a];if(e[i]!==o[i]||!(i in o))return!1}return!0}function nt(t){return t instanceof nt?t:this instanceof nt?void(this._wrapped=t):new nt(t)}function rt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,W(t))}function ot(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var a=typeof t;return("function"===a||"object"===a||"object"==typeof e)&&function t(e,n,o,a){e instanceof nt&&(e=e._wrapped),n instanceof nt&&(n=n._wrapped);var s=i.call(e);if(s!==i.call(n))return!1;if(L&&"[object Object]"==s&&P(e)){if(!P(n))return!1;s="[object DataView]"}switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return r.valueOf.call(e)===r.valueOf.call(n);case"[object ArrayBuffer]":case"[object DataView]":return t(rt(e),rt(n),o,a)}var u="[object Array]"===s;if(!u&&X(e)){if(W(e)!==W(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;u=!0}if(!u){if("object"!=typeof e||"object"!=typeof n)return!1;var c=e.constructor,l=n.constructor;if(c!==l&&!(D(c)&&c instanceof c&&D(l)&&l instanceof l)&&"constructor"in e&&"constructor"in n)return!1}a=a||[];for(var f=(o=o||[]).length;f--;)if(o[f]===e)return a[f]===n;if(o.push(e),a.push(n),u){if((f=e.length)!==n.length)return!1;for(;f--;)if(!ot(e[f],n[f],o,a))return!1}else{var h,p=tt(e);if(f=p.length,tt(n).length!==f)return!1;for(;f--;)if(h=p[f],!$(n,h)||!ot(e[h],n[h],o,a))return!1}return o.pop(),a.pop(),!0}(t,e,n,o)}function at(t){if(!w(t))return[];var e=[];for(var n in t)e.push(n);return v&&Q(t,e),e}function it(t){var e=Z(t);return function(n){if(null==n)return!1;var r=at(n);if(Z(r))return!1;for(var o=0;o<e;o++)if(!D(n[t[o]]))return!1;return t!==ft||!D(n[st])}}nt.VERSION="1.13.1",nt.prototype.value=function(){return this._wrapped},nt.prototype.valueOf=nt.prototype.toJSON=nt.prototype.value,nt.prototype.toString=function(){return String(this._wrapped)};var st="forEach",ut=["clear","delete"],ct=["get","has","set"],lt=ut.concat(st,ct),ft=ut.concat(ct),ht=["add"].concat(ut,st,"has"),pt=j?it(lt):N("Map"),dt=j?it(ft):N("WeakMap"),mt=j?it(ht):N("Set"),vt=N("WeakSet");function gt(t){for(var e=tt(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r}function yt(t){for(var e={},n=tt(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e}function bt(t){var e=[];for(var n in t)D(t[n])&&e.push(n);return e.sort()}function wt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var a=arguments[o],i=t(a),s=i.length,u=0;u<s;u++){var c=i[u];e&&void 0!==n[c]||(n[c]=a[c])}return n}}var _t=wt(at),xt=wt(tt),Nt=wt(at,!0);function Et(t){if(!w(t))return{};if(h)return h(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Mt(t){return w(t)?H(t)?t.slice():_t({},t):t}function At(t){return H(t)?t:[t]}function Ct(t){return nt.toPath(t)}function kt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function Ot(t,e,n){var r=kt(t,Ct(e));return _(r)?n:r}function Tt(t){return t}function St(t){return t=xt({},t),function(e){return et(e,t)}}function Rt(t){return t=Ct(t),function(e){return kt(e,t)}}function Dt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,a){return t.call(e,n,r,o,a)}}return function(){return t.apply(e,arguments)}}function It(t,e,n){return null==t?Tt:D(t)?Dt(t,e,n):w(t)&&!H(t)?St(t):Rt(t)}function Lt(t,e){return It(t,e,1/0)}function jt(t,e,n){return nt.iteratee!==Lt?nt.iteratee(t,e):It(t,e,n)}function Ft(){}function Pt(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}nt.toPath=At,nt.iteratee=Lt;var Ht=Date.now||function(){return(new Date).getTime()};function $t(t){var e=function(e){return t[e]},n="(?:"+tt(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}}var Ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Bt=$t(Ut),zt=$t(yt(Ut)),Vt=nt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Yt=/(.)^/,qt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Wt=/\\|'|\r|\n|\u2028|\u2029/g;function Gt(t){return"\\"+qt[t]}var Kt=/^\s*(\w|\$)+\s*$/,Xt=0;function Jt(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var a=Et(t.prototype),i=t.apply(a,o);return w(i)?i:a}var Zt=b((function(t,e){var n=Zt.placeholder,r=function(){for(var o=0,a=e.length,i=Array(a),s=0;s<a;s++)i[s]=e[s]===n?arguments[o++]:e[s];for(;o<arguments.length;)i.push(arguments[o++]);return Jt(t,r,this,this,i)};return r}));Zt.placeholder=nt;var Qt=b((function(t,e,n){if(!D(t))throw new TypeError("Bind must be called on a function");var r=b((function(o){return Jt(t,r,e,this,n.concat(o))}));return r})),te=Y(Z);function ee(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var o=r.length,a=0,i=Z(t);a<i;a++){var s=t[a];if(te(s)&&(H(s)||B(s)))if(e>1)ee(s,e-1,n,r),o=r.length;else for(var u=0,c=s.length;u<c;)r[o++]=s[u++];else n||(r[o++]=s)}return r}var ne=b((function(t,e){var n=(e=ee(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=Qt(t[r],t)}return t})),re=b((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),oe=Zt(re,nt,1);function ae(t){return function(){return!t.apply(this,arguments)}}function ie(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var se=Zt(ie,2);function ue(t,e,n){e=jt(e,n);for(var r,o=tt(t),a=0,i=o.length;a<i;a++)if(e(t[r=o[a]],r,t))return r}function ce(t){return function(e,n,r){n=jt(n,r);for(var o=Z(e),a=t>0?0:o-1;a>=0&&a<o;a+=t)if(n(e[a],a,e))return a;return-1}}var le=ce(1),fe=ce(-1);function he(t,e,n,r){for(var o=(n=jt(n,r,1))(e),a=0,i=Z(t);a<i;){var s=Math.floor((a+i)/2);n(t[s])<o?a=s+1:i=s}return a}function pe(t,e,n){return function(r,o,i){var s=0,u=Z(r);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+u,s):u=i>=0?Math.min(i+1,u):i+u+1;else if(n&&i&&u)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(a.call(r,s,u),z))>=0?i+s:-1;for(i=t>0?s:u-1;i>=0&&i<u;i+=t)if(r[i]===o)return i;return-1}}var de=pe(1,le,he),me=pe(-1,fe);function ve(t,e,n){var r=(te(t)?le:ue)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function ge(t,e,n){var r,o;if(e=Dt(e,n),te(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var a=tt(t);for(r=0,o=a.length;r<o;r++)e(t[a[r]],a[r],t)}return t}function ye(t,e,n){e=jt(e,n);for(var r=!te(t)&&tt(t),o=(r||t).length,a=Array(o),i=0;i<o;i++){var s=r?r[i]:i;a[i]=e(t[s],s,t)}return a}function be(t){var e=function(e,n,r,o){var a=!te(e)&&tt(e),i=(a||e).length,s=t>0?0:i-1;for(o||(r=e[a?a[s]:s],s+=t);s>=0&&s<i;s+=t){var u=a?a[s]:s;r=n(r,e[u],u,e)}return r};return function(t,n,r,o){var a=arguments.length>=3;return e(t,Dt(n,o,4),r,a)}}var we=be(1),_e=be(-1);function xe(t,e,n){var r=[];return e=jt(e,n),ge(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function Ne(t,e,n){e=jt(e,n);for(var r=!te(t)&&tt(t),o=(r||t).length,a=0;a<o;a++){var i=r?r[a]:a;if(!e(t[i],i,t))return!1}return!0}function Ee(t,e,n){e=jt(e,n);for(var r=!te(t)&&tt(t),o=(r||t).length,a=0;a<o;a++){var i=r?r[a]:a;if(e(t[i],i,t))return!0}return!1}function Me(t,e,n,r){return te(t)||(t=gt(t)),("number"!=typeof n||r)&&(n=0),de(t,e,n)>=0}var Ae=b((function(t,e,n){var r,o;return D(e)?o=e:(e=Ct(e),r=e.slice(0,-1),e=e[e.length-1]),ye(t,(function(t){var a=o;if(!a){if(r&&r.length&&(t=kt(t,r)),null==t)return;a=t[e]}return null==a?a:a.apply(t,n)}))}));function Ce(t,e){return ye(t,Rt(e))}function ke(t,e,n){var r,o,a=-1/0,i=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,u=(t=te(t)?t:gt(t)).length;s<u;s++)null!=(r=t[s])&&r>a&&(a=r);else e=jt(e,n),ge(t,(function(t,n,r){((o=e(t,n,r))>i||o===-1/0&&a===-1/0)&&(a=t,i=o)}));return a}function Oe(t,e,n){if(null==e||n)return te(t)||(t=gt(t)),t[Pt(t.length-1)];var r=te(t)?Mt(t):gt(t),o=Z(r);e=Math.max(Math.min(e,o),0);for(var a=o-1,i=0;i<e;i++){var s=Pt(i,a),u=r[i];r[i]=r[s],r[s]=u}return r.slice(0,e)}function Te(t,e){return function(n,r,o){var a=e?[[],[]]:{};return r=jt(r,o),ge(n,(function(e,o){var i=r(e,o,n);t(a,e,i)})),a}}var Se=Te((function(t,e,n){$(t,n)?t[n].push(e):t[n]=[e]})),Re=Te((function(t,e,n){t[n]=e})),De=Te((function(t,e,n){$(t,n)?t[n]++:t[n]=1})),Ie=Te((function(t,e,n){t[n?0:1].push(e)}),!0),Le=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function je(t,e,n){return e in n}var Fe=b((function(t,e){var n={},r=e[0];if(null==t)return n;D(r)?(e.length>1&&(r=Dt(r,e[1])),e=at(t)):(r=je,e=ee(e,!1,!1),t=Object(t));for(var o=0,a=e.length;o<a;o++){var i=e[o],s=t[i];r(s,i,t)&&(n[i]=s)}return n})),Pe=b((function(t,e){var n,r=e[0];return D(r)?(r=ae(r),e.length>1&&(n=e[1])):(e=ye(ee(e,!1,!1),String),r=function(t,n){return!Me(e,n)}),Fe(t,r,n)}));function He(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function $e(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:He(t,t.length-e)}function Ue(t,e,n){return a.call(t,null==e||n?1:e)}var Be=b((function(t,e){return e=ee(e,!0,!0),xe(t,(function(t){return!Me(e,t)}))})),ze=b((function(t,e){return Be(t,e)}));function Ve(t,e,n,r){x(e)||(r=n,n=e,e=!1),null!=n&&(n=jt(n,r));for(var o=[],a=[],i=0,s=Z(t);i<s;i++){var u=t[i],c=n?n(u,i,t):u;e&&!n?(i&&a===c||o.push(u),a=c):n?Me(a,c)||(a.push(c),o.push(u)):Me(o,u)||o.push(u)}return o}var Ye=b((function(t){return Ve(ee(t,!0,!0))}));function qe(t){for(var e=t&&ke(t,Z).length||0,n=Array(e),r=0;r<e;r++)n[r]=Ce(t,r);return n}var We=b(qe);function Ge(t,e){return t._chain?nt(e).chain():e}function Ke(t){return ge(bt(t),(function(e){var n=nt[e]=t[e];nt.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),Ge(this,n.apply(nt,t))}})),nt}ge(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var n=e[t];nt.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),Ge(this,e)}})),ge(["concat","join","slice"],(function(t){var n=e[t];nt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=n.apply(t,arguments)),Ge(this,t)}}));var Xe=Ke({__proto__:null,VERSION:"1.13.1",restArguments:b,isObject:w,isNull:function(t){return null===t},isUndefined:_,isBoolean:x,isElement:function(t){return!(!t||1!==t.nodeType)},isString:E,isNumber:M,isDate:A,isRegExp:C,isError:k,isSymbol:O,isArrayBuffer:T,isDataView:P,isArray:H,isFunction:D,isArguments:B,isFinite:function(t){return!O(t)&&m(t)&&!isNaN(parseFloat(t))},isNaN:z,isTypedArray:X,isEmpty:function(t){if(null==t)return!0;var e=Z(t);return"number"==typeof e&&(H(t)||E(t)||B(t))?0===e:0===Z(tt(t))},isMatch:et,isEqual:function(t,e){return ot(t,e)},isMap:pt,isWeakMap:dt,isSet:mt,isWeakSet:vt,keys:tt,allKeys:at,values:gt,pairs:function(t){for(var e=tt(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},invert:yt,functions:bt,methods:bt,extend:_t,extendOwn:xt,assign:xt,defaults:Nt,create:function(t,e){var n=Et(t);return e&&xt(n,e),n},clone:Mt,tap:function(t,e){return e(t),t},get:Ot,has:function(t,e){for(var n=(e=Ct(e)).length,r=0;r<n;r++){var o=e[r];if(!$(t,o))return!1;t=t[o]}return!!n},mapObject:function(t,e,n){e=jt(e,n);for(var r=tt(t),o=r.length,a={},i=0;i<o;i++){var s=r[i];a[s]=e(t[s],s,t)}return a},identity:Tt,constant:V,noop:Ft,toPath:At,property:Rt,propertyOf:function(t){return null==t?Ft:function(e){return Ot(t,e)}},matcher:St,matches:St,times:function(t,e,n){var r=Array(Math.max(0,t));e=Dt(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r},random:Pt,now:Ht,escape:Bt,unescape:zt,templateSettings:Vt,template:function(t,e,n){!e&&n&&(e=n),e=Nt({},e,nt.templateSettings);var r=RegExp([(e.escape||Yt).source,(e.interpolate||Yt).source,(e.evaluate||Yt).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(r,(function(e,n,r,i,s){return a+=t.slice(o,s).replace(Wt,Gt),o=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e})),a+="';\n";var i,s=e.variable;if(s){if(!Kt.test(s))throw new Error("variable is not a bare identifier: "+s)}else a="with(obj||{}){\n"+a+"}\n",s="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(s,"_",a)}catch(t){throw t.source=a,t}var u=function(t){return i.call(this,t,nt)};return u.source="function("+s+"){\n"+a+"}",u},result:function(t,e,n){var r=(e=Ct(e)).length;if(!r)return D(n)?n.call(t):n;for(var o=0;o<r;o++){var a=null==t?void 0:t[e[o]];void 0===a&&(a=n,o=r),t=D(a)?a.call(t):a}return t},uniqueId:function(t){var e=++Xt+"";return t?t+e:e},chain:function(t){var e=nt(t);return e._chain=!0,e},iteratee:Lt,partial:Zt,bind:Qt,bindAll:ne,memoize:function(t,e){var n=function(r){var o=n.cache,a=""+(e?e.apply(this,arguments):r);return $(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return n.cache={},n},delay:re,defer:oe,throttle:function(t,e,n){var r,o,a,i,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Ht(),r=null,i=t.apply(o,a),r||(o=a=null)},c=function(){var c=Ht();s||!1!==n.leading||(s=c);var l=e-(c-s);return o=this,a=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,i=t.apply(o,a),r||(o=a=null)):r||!1===n.trailing||(r=setTimeout(u,l)),i};return c.cancel=function(){clearTimeout(r),s=0,r=o=a=null},c},debounce:function(t,e,n){var r,o,a,i,s,u=function(){var c=Ht()-o;e>c?r=setTimeout(u,e-c):(r=null,n||(i=t.apply(s,a)),r||(a=s=null))},c=b((function(c){return s=this,a=c,o=Ht(),r||(r=setTimeout(u,e),n&&(i=t.apply(s,a))),i}));return c.cancel=function(){clearTimeout(r),r=a=s=null},c},wrap:function(t,e){return Zt(e,t)},negate:ae,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},before:ie,once:se,findKey:ue,findIndex:le,findLastIndex:fe,sortedIndex:he,indexOf:de,lastIndexOf:me,find:ve,detect:ve,findWhere:function(t,e){return ve(t,St(e))},each:ge,forEach:ge,map:ye,collect:ye,reduce:we,foldl:we,inject:we,reduceRight:_e,foldr:_e,filter:xe,select:xe,reject:function(t,e,n){return xe(t,ae(jt(e)),n)},every:Ne,all:Ne,some:Ee,any:Ee,contains:Me,includes:Me,include:Me,invoke:Ae,pluck:Ce,where:function(t,e){return xe(t,St(e))},max:ke,min:function(t,e,n){var r,o,a=1/0,i=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,u=(t=te(t)?t:gt(t)).length;s<u;s++)null!=(r=t[s])&&r<a&&(a=r);else e=jt(e,n),ge(t,(function(t,n,r){((o=e(t,n,r))<i||o===1/0&&a===1/0)&&(a=t,i=o)}));return a},shuffle:function(t){return Oe(t,1/0)},sample:Oe,sortBy:function(t,e,n){var r=0;return e=jt(e,n),Ce(ye(t,(function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")},groupBy:Se,indexBy:Re,countBy:De,partition:Ie,toArray:function(t){return t?H(t)?a.call(t):E(t)?t.match(Le):te(t)?ye(t,Tt):gt(t):[]},size:function(t){return null==t?0:te(t)?t.length:tt(t).length},pick:Fe,omit:Pe,first:$e,head:$e,take:$e,initial:He,last:function(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Ue(t,Math.max(0,t.length-e))},rest:Ue,tail:Ue,drop:Ue,compact:function(t){return xe(t,Boolean)},flatten:function(t,e){return ee(t,e,!1)},without:ze,uniq:Ve,unique:Ve,union:Ye,intersection:function(t){for(var e=[],n=arguments.length,r=0,o=Z(t);r<o;r++){var a=t[r];if(!Me(e,a)){var i;for(i=1;i<n&&Me(arguments[i],a);i++);i===n&&e.push(a)}}return e},difference:Be,unzip:qe,transpose:qe,zip:We,object:function(t,e){for(var n={},r=0,o=Z(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},range:function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),a=0;a<r;a++,t+=n)o[a]=t;return o},chunk:function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(a.call(t,r,r+=e));return n},mixin:Ke,default:nt});return Xe._=Xe,Xe}()}(nf);var rf=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const of=nf.exports,af=rf(b.default),sf=t=>(e,n)=>(0,of.isDate)(e)?t(e,n):e;const uf=new Set(["฿","₿","¢","$","€","eur","£","gbp","¥","yen","usd","cad","us$","ca$","can$"]);var cf=function(t,e,n={}){if(void 0===e||isNaN(e)||null===e)return"";let r=n.format||"0.[00]";const o=n.multiply||1,a=n.prepend||"",i=n.append||"",s=n.minusChar||"−",u=n.plusMinusChar||"±";r.includes("%")&&Number.isFinite(e)&&(e*=.01),e*=o;const c=r.indexOf("(")>-1,l=r.indexOf(";")>-1;r=r.replace(/;/g,",");let f=t(c?e:Math.abs(e)).format(r);if(l){const n=t.options.currentLocale,o=t.locales[n].delimiters.thousands,a=r.includes("%")?e/.01:e;f=Math.abs(a)<1e4?f.replace(o,""):f}return a&&!c&&e<0&&uf.has(a.trim().toLowerCase())?`${s}${a}${f.replace("+","")}${i}`:a&&e>=0&&uf.has(a.trim().toLowerCase())&&r.includes("+")?`${0===e?u:"+"}${a}${f.replace("+","")}${i}`:0===e&&r.includes("+")?`${a}${f.replace("+",u)}${i}`:e<0&&!c?`${a}${s}${f.replace("+","")}${i}`:`${a}${f}${i}`},lf=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const ff=lf(cf),hf=lf((function(t,e){return Math.abs(t-e)<1e-6}));var pf=function(t,e=null,n=null){if(!e)return t;const r=Array.isArray(e)?e:e.split(".");let o=t;for(let t=0;t<r.length&&null!=o;t++)o=o[r[t]];return null==o?n:o},df=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ef,"__esModule",{value:!0});var mf=ef.columnFormatter=void 0;const vf=df((function(t,{normalizeDatesToEn:e=!0}={}){if(!t.format())return of.identity;const n=(t,n)=>{if(!e)return(0,af.default)(t).format(n);const r=af.default.locale();af.default.locale("en");const o=(0,af.default)(t).format(n);return af.default.locale(r),o};switch(t.precision()){case"year":return sf(t=>t.getFullYear());case"half":return sf(t=>t.getFullYear()+" H"+(t.getMonth()/6+1));case"quarter":return sf(t=>t.getFullYear()+" Q"+(t.getMonth()/3+1));case"month":return sf(t=>n(t,"MMM YY"));case"week":return sf(t=>function(t){const e=t.getUTCDay(),n=new Date(t.valueOf());n.setDate(n.getDate()-(e+6)%7+3);const r=n.getUTCFullYear(),o=Math.floor((n.getTime()-new Date(r,0,1,-6).getTime())/864e5);return[r,1+Math.floor(o/7),e>0?e:7]}(t).slice(0,2).join(" W"));case"day":return sf((t,e)=>n(t,e?"dddd, MMMM DD, YYYY":"l"));case"day-minutes":return sf((t,e)=>n(t,"MMM DD"+(e?", YYYY":"")).replace(/ /g,"&nbsp;")+" - "+n(t,"LT").replace(" ","&nbsp;"));case"day-seconds":return sf((t,e)=>(e?n(t,"MMM DD, YYYY").replace(/ /g,"&nbsp;")+" - ":"")+n(t,"LTS").replace(" ","&nbsp;"))}})),gf=df((function(t,e){const n=e["number-format"]||"-",r=Number(e["number-divisor"]||0),o=(e["number-append"]||"").replace(/ /g," "),a=(e["number-prepend"]||"").replace(/ /g," ");return function(e,i,s){if(isNaN(e))return e;const u=n;let c=0;var l,f;0!==r&&"-"===u&&(c=1),"s"===u.substr(0,1)&&(c=Math.max(0,(l=e,f=+u.substr(1),0===l?0:Math.round(f-Math.ceil(Math.log(Math.abs(l))/Math.LN10))))),s&&(c=0),"-"===u&&(c=(0,hf.default)(e,Math.round(e))?0:(0,hf.default)(e,.1*Math.round(10*e))?1:(0,hf.default)(e,.01*Math.round(100*e))?2:(0,hf.default)(e,.001*Math.round(1e3*e))?3:(0,hf.default)(e,1e-4*Math.round(1e4*e))?4:(0,hf.default)(e,1e-5*Math.round(1e5*e))?5:6),"n"===u[0]&&(c=Number(u.substr(1,u.length)));let h="0,0";for(let t=0;t<c;t++)0===t&&(h+="."),h+="0";return(0,ff.default)(t,e,{format:h,prepend:i?a:"",append:i?o:"",multiply:Math.pow(10,-1*r)})}})),yf=df(pf),bf=t=>t;function wf(t,e,n,r){const{numeral:o}=t.get(),a={date:"fa fa-clock-o"};return function(i,s,u,c,l,f,h){if(n.numColumns()<=c||!n.hasColumn(c))return;const p=n.column(c),{searchResults:d,currentResult:m,activeColumn:v}=t.get(),g=t.getColumnFormat(p.name());if((u=i.toPhysicalRow(u))>0){const t=mf(o,p,e.get().metadata,p.name(),{normalizeDatesToEn:!1});f=null===p.val(u-1)||""===p.val(u-1)?"–":t(p.val(u-1),!0)}parseInt(f)<0&&s.classList.add("negative"),s.classList.add(p.type()+"Type"),s.dataset.column=c,"text"===p.type()&&f&&f.length>70&&(f=f.substr(0,60)+"…"),0===u?(s.classList.add("firstRow"),a[p.type()]&&(f='<i class="'+a[p.type()]+'"></i> '+f)):s.classList.add(u%2?"oddRow":"evenRow"),g.ignore&&s.classList.add("ignored"),v&&v.name()===p.name()&&s.classList.add("active");const y=r.hooks.run(i,"modifyRow",u);d.forEach(t=>{t.row===y&&t.col===c&&s.classList.add("htSearchResult")}),m&&m.row===y&&m.col===c&&s.classList.add("htCurrentSearchResult"),u>0&&!p.type(!0).isValid(p.val(u-1))&&null!==p.val(u-1)&&""!==p.val(u-1)&&s.classList.add("parsingError"),u>0&&(null===p.val(u-1)||""===p.val(u-1))&&s.classList.add("noData"),p.isComputed&&p.errors.length&&p.errors.find(t=>"all"===t.row||t.row===u-1)&&s.classList.add("parsingError"),h.readOnly&&s.classList.add("readOnly");const b=e.getMetadata("data");(function(t,e,{changes:n=[],transpose:r}){const o=r?"column":"row",a=r?"row":"column";return!!n.find(n=>t===n[a]&&e===n[o])})(n.columnOrder()[c],u,b)&&s.classList.add("changed"),function(t,e,n,o,a,i){var s=Qi(r.helper.stringify(i));e.innerHTML=s}(0,s,0,0,0,f)}}mf=ef.columnFormatter=function(t,e,n,r,o={}){return"date"===e.type()?(0,vf.default)(e.type(!0),o):"number"===e.type()?(0,gf.default)(t,(0,yf.default)(n,"data.column-format."+r,{})):bf};let _f=null,xf=null;var Nf={render(){const{hot:t}=this.get();t.render()},doSearch(){const{hot:t,search:e}=this.get();clearTimeout(xf),xf=setTimeout(()=>{if(t&&e){const n=t.getPlugin("search").query(e);this.set({searchResults:n})}else this.set({searchResults:[]})},300)},update(){const{data:t,hot:e,tableDataset:n}=this.get();if(!t)return;const{dw_chart:r}=this.store.get();this.set({columnOrder:n.columnOrder()});const o=[[]];n.eachColumn(t=>o[0].push(t.title())),n.eachRow(t=>{const e=[];n.eachColumn(n=>e.push(n.raw(t))),o.push(e)}),e.loadData(o);const a=wf(this,r,n,y.default);e.updateSettings({cells:(t,e)=>{const{readonly:r}=this.get();return{readOnly:r||n.hasColumn(e)&&n.column(e).isComputed&&0===t,renderer:a}},manualColumnMove:[]}),this.set({hasChanges:Ya(r.get("metadata.data.changes",[])).length>0}),y.default.hooks.once("afterRender",()=>this.initCustomEvents()),y.default.hooks.once("afterRender",()=>this.fire("afterRender")),e.render()},dataChanged(t){const{hot:e,tableDataset:n}=this.get(),r=this.store.get().dw_chart;t.forEach(([t,o,a,i])=>{if(a!==i){const{transpose:s}=this.get(),u=Ya(r.get("metadata.data.changes",[]));if(t=e.toPhysicalRow(t),o=n.columnOrder()[o],s){const e=t;t=o,o=e}u.push({column:o,row:t,value:i,previous:a,time:(new Date).getTime()}),r.set("metadata.data.changes",u)}})},columnMoved(t,e){const{hot:n}=this.get();if(!t.length)return;const{columnOrder:r}=this.get(),o=r.slice(0),a=r[e],i=o.splice(t[0],t.length),s=void 0===a?o.length:a?o.indexOf(a):0;o.splice(s,0,...i),this.store.get().dw_chart.set("metadata.data.column-order",o.slice(0)),this.set({columnOrder:o}),y.default.hooks.once("afterRender",()=>{setTimeout(()=>{this.fire("resetSort"),n.selectCell(0,-1,s,n.countRows()-1,s+i.length-1)},10)})},updateHeight(){const t=this.refs.hot.querySelector(".ht_master.handsontable .wtHolder .wtHider").getBoundingClientRect().height;this.refs.hot.style.height=Math.min(500,t+10)+"px"},updateColumnSelection(){const{activeColumn:t,multiSelection:e,hot:n}=this.get(),r=this.getSelectedColumns();if(1!==r.length)r.length>1?e?(_f.set({activeColumn:null,multiSelection:!1}),n.deselectCell()):_f.set({activeColumn:null,multiSelection:r}):_f.set({activeColumn:null,multiSelection:!1});else{const[e]=r;t&&t.name()===e.name()?(_f.set({activeColumn:null,multiSelection:!1}),n.deselectCell()):_f.set({activeColumn:e,multiSelection:!1})}},getSelectedColumns(){const{tableDataset:t,hot:e}=this.get(),[[n,r,o,a]]=e.getSelected(),i=[];if(Math.abs(n-o)===t.numRows())for(let e=Math.min(r,a);e<=Math.max(r,a);e++)i.push(t.column(e));return i},initCustomEvents(){setTimeout(()=>{this.refs.hot.querySelectorAll(".htCore thead th:first-child").forEach(t=>{t.removeEventListener("click",Af),t.addEventListener("click",Af)})},500)},getColumnFormat(t){const{dw_chart:e}=this.store.get();return e.get("metadata.data.column-format",{})[t]||{type:"auto",ignore:!1}}};function Ef(){_f=this,y.default.hooks.once("afterRender",()=>this.initCustomEvents()),this.refs.hot.getRootNode().addEventListener("keyup",t=>{const{activeColumn:e,tableDataset:n}=this.get();if(e&&"input"!==t.target.tagName.toLowerCase()&&"textarea"!==t.target.tagName.toLowerCase()&&("ArrowRight"===t.key||"ArrowLeft"===t.key)){t.preventDefault(),t.stopPropagation();const r=n.indexOf(e.name());"ArrowRight"===t.key?this.set({activeColumn:n.column((r+1)%n.numColumns())}):this.set({activeColumn:n.column((r-1+n.numColumns())%n.numColumns())})}});const{dw_chart:t}=this.store.get(),e=new y.default(this.refs.hot,{data:[],rowHeaders:t=>y.default.hooks.run(e,"modifyRow",t)+1,colHeaders:!0,fixedRowsTop:1,fixedColumnsLeft:this.get().fixedColumnsLeft,filters:!0,startRows:13,startCols:8,fillHandle:!1,stretchH:"all",height:500,manualColumnMove:!0,selectionMode:"range",autoColumnSize:{useHeaders:!0,syncLimit:5},activeHeaderClassName:"selected",sortIndicator:!0,columnSorting:!0,sortFunction:function(e,n){if(n.col>-1){const r=t.dataset().column(n.col),o=r.type();return(t,n)=>0===t[0]?-1:(t[1]=r.val(t[0]-1),n[1]=r.val(n[0]-1),"number"===o&&(isNaN(t[1])&&(t[1]=e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY),isNaN(n[1])&&(n[1]=e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY)),"date"===o&&("string"==typeof t[1]&&(t[1]=new Date(110,0,1)),"string"==typeof n[1]&&(n[1]=new Date(110,0,1))),("desc"===e?-1:1)*(t[1]>n[1]?1:t[1]<n[1]?-1:0))}return(t,e)=>t[0]-e[0]},afterGetColHeader:(t,e)=>{const{tableDataset:n,activeColumn:r,multiSelection:o}=this.get();if(!n||!n.hasColumn(t))return;const a=n.column(t).name(),i=r&&r.name()===a,s=o&&o.find(t=>t.name()===a);(i||s)&&e.classList.add("selected"),this.getColumnFormat(a).ignore&&e.classList.add("ignored")},search:"search"});window.HT=e,this.set({hot:e}),y.default.hooks.add("afterSetDataAtCell",t=>this.dataChanged(t)),y.default.hooks.add("afterColumnMove",(t,e)=>this.columnMoved(t,e)),y.default.hooks.add("afterRender",()=>this.updateHeight()),y.default.hooks.add("beforeOnCellMouseUp",()=>this.updateColumnSelection())}function Mf({changed:t,current:e,previous:n}){const r=e.hot;if(r){if(t.hot&&this.update(),t.tableDataset&&this.update(),t.search&&n&&(this.doSearch(),this.set({searchIndex:0})),t.searchResults&&r.render(),t.currentResult&&e.currentResult){r.render();const t=e.currentResult;r.scrollViewportTo(t.row,t.col),setTimeout(()=>{r.scrollViewportTo(t.row,t.col)},100)}if(t.activeColumn&&setTimeout(()=>r.render(),10),t.fixedColumnsLeft&&r.updateSettings({fixedColumnsLeft:e.fixedColumnsLeft}),t.sorting){const t=this.store.get().dw_chart;r.getPlugin("columnSorting").sort(t.dataset().indexOf(e.sorting.sortBy),e.sorting.sortDir?"asc":"desc")}}}function Af(t){t.preventDefault();const{transpose:e}=_f.get();_f.set({transpose:!e})}function Cf(t){q(this,t),this.refs={},this._state=N({hot:null,data:"",readonly:!1,numeral:null,skipRows:0,firstRowIsHeader:!0,fixedColumnsLeft:0,searchIndex:0,sortBy:"-",transpose:!1,activeColumn:null,search:"",searchResults:[]},t.data),this._recompute({searchResults:1,searchIndex:1},this._state),this._intro=!0,this._handlers.state=[Mf],Mf.call(this,{changed:E({},this._state),current:this._state}),this._fragment=function(t,e){var n;return{c(){(n=T("div")).id="data-preview"},m(e,r){A(e,n,r),t.refs.hot=n},p:x,d(e){e&&C(n),t.refs.hot===n&&(t.refs.hot=null)}}}(this,this._state),this.root._oncreate.push(()=>{Ef.call(this),this.fire("update",{changed:E({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),V(this))}N(Cf.prototype,X),N(Cf.prototype,Nf),Cf.prototype._recompute=function(t,e){(t.searchResults||t.searchIndex)&&this._differs(e.currentResult,e.currentResult=function({searchResults:t,searchIndex:e}){if(!t||!t.length)return null;const n=t.length;if(e<0||e>=n){for(;e<0;)e+=n;e>n&&(e%=n)}return t[e]}(e))&&(t.currentResult=!0)};const kf={transpose:"metadata.data.transpose",firstRowIsHeader:"metadata.data.horizontal-header",$language:"language"};var Of={nextResult(t){let{searchIndex:e}=this.get();const{searchResults:n}=this.get();e+=t,e<0&&(e+=n.length),e%=n.length,this.set({searchIndex:e})},keyPress(t){"F3"!==t.key&&"Enter"!==t.key||this.nextResult(t.shiftKey?-1:1)},toggleTranspose(){this.set({transpose:!this.get().transpose})},revertChanges(){this.store.get().dw_chart.setMetadata("data.changes",[])},addComputedColumn(){const{dw_chart:t,tableDataset:e}=this.store.get(),n=t=>"Column "+t;let r=0;for(;e.hasColumn(n(++r)););const o=n(r),a=this.store.on("state",({current:t})=>{this.set({activeColumn:t.tableDataset.column(o),multiSelection:!1}),a.cancel()}),i=au(t);i.push({name:o,formula:""}),t.setMetadata("describe.computed-columns",i),t.saveSoon()},sort(t,e,n){t.preventDefault(),t.stopPropagation(),this.set({sortBy:e,sortDir:n})},force(t,e=!0){t.preventDefault(),this.set({forceColumnFormat:e})},hideMultiple(t,e){const n=this.store.get().dw_chart,r=Ya(n.get("metadata.data.column-format",{}));t.forEach(t=>{r[t.name()]?r[t.name()].ignore=e:r[t.name()]={type:"auto",ignore:e}}),n.setMetadata("data.column-format",r),this.set({multiSelection:!1,activeColumn:null})},afterRender(){this.refs.ccEd&&this.refs.ccEd.fire("hotRendered")},navigateTo(t){const{navigateTo:e}=this.get();e({id:t})}};function Tf(){const{dw_chart:t}=this.store.get(),e=Object.entries(kf).reduce((e,[n,r])=>{const o=pf(t.get(),r);return null!==o&&(e[n]=o),e},{});this.set(e),t.get("metadata.data.changes",[]).length>1&&this.set({hasChanges:!0}),t.onChange((t,e,n)=>{const r=Object.entries(kf).find(([,t])=>t===e);r&&this.set({[r[0]]:n})}),window.addEventListener("keypress",t=>{if(t.ctrlKey&&"f"===t.key){t.preventDefault();const e=this.refs.parent.getRootNode().activeElement;this.refs.search!==e?this.refs.search.focus():this.nextResult(1)}})}function Sf({changed:t,current:e}){t.activeColumn&&!e.activeColumn&&this.set({forceColumnFormat:!1}),t.dayjsLocale&&e.dayjsLocale&&(b.default.locale(e.dayjsLocale),this.refs.hot.render()),Object.entries(kf).forEach(([n,r])=>{if(t[n]){const t=e[n],{dw_chart:o}=this.store.get();if("$language"===n){if(!t)return;o.set("language",t),o.locale(t,()=>{this.refs.hot.render()})}else o.set(r,t)}}),t.transpose&&this.set({activeColumn:null,multiSelection:!1})}function Rf(t){const{component:e,ctx:n}=this._svelte;e.sort(t,n.col.name(),!0)}function Df(t){const{component:e,ctx:n}=this._svelte;e.sort(t,n.col.name(),!1)}function If(t){const{component:e,ctx:n}=this._svelte;e.sort(t,n.col.name(),!0)}function Lf(t,e,n){const r=Object.create(t);return r.col=e[n],r}function jf(t,e){var n,r,o,a,i,s,u,c=as("Make sure the data looks right"),l=as("describe / data-looks-right"),f={},h={label:as("First row as label")};void 0!==e.firstRowIsHeader&&(h.value=e.firstRowIsHeader,f.value=!0);var p=new v.default({root:t.root,store:t.store,data:h,_bind(e,n){var r={};!f.value&&e.value&&(r.firstRowIsHeader=n.value),t._set(r),f={}}});t.root._beforecreate.push(()=>{p._bind({value:1},p.get())});var d=e.showLocaleSelect&&Hf(t);return{c(){n=T("h3"),r=R(c),o=R("\n                "),a=T("p"),i=R("\n                "),p._fragment.c(),s=R(" "),d&&d.c(),u=D(),n.className="first"},m(t,e){A(t,n,e),M(n,r),A(t,o,e),A(t,a,e),a.innerHTML=l,A(t,i,e),p._mount(t,e),A(t,s,e),d&&d.m(t,e),A(t,u,e)},p(n,r){e=r;var o={};!f.value&&n.firstRowIsHeader&&(o.value=e.firstRowIsHeader,f.value=void 0!==e.firstRowIsHeader),p._set(o),f={},e.showLocaleSelect?d||((d=Hf(t)).c(),d.m(u.parentNode,u)):d&&(d.d(1),d=null)},d(t){t&&(C(n),C(o),C(a),C(i)),p.destroy(t),t&&C(s),d&&d.d(t),t&&C(u)}}}function Ff(t,e){var n,r;function o(t){return t.customColumn?Uf:t.columnFormat?$f:void 0}var a=o(e),i=a&&a(t,e),s="number"==e.activeColumn.type()&&zf(t,e);return{c(){i&&i.c(),n=R("\n\n                \n                "),s&&s.c(),r=D()},m(t,e){i&&i.m(t,e),A(t,n,e),s&&s.m(t,e),A(t,r,e)},p(e,u){a===(a=o(u))&&i?i.p(e,u):(i&&i.d(1),(i=a&&a(t,u))&&i.c(),i&&i.m(n.parentNode,n)),"number"==u.activeColumn.type()?s?s.p(e,u):((s=zf(t,u)).c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(t){i&&i.d(t),t&&C(n),s&&s.d(t),t&&C(r)}}}function Pf(t,e){var n,r,o,a,i,s,u,c,l,f,h,p,d,m,v,g=as("describe / show-hide-multi"),y=as("describe / show-selected"),b=as("describe / hide-selected");function w(n){t.hideMultiple(e.multiSelection,!1)}function _(n){t.hideMultiple(e.multiSelection,!0)}return{c(){n=T("h3"),r=R(g),o=R("\n                "),a=T("ul"),i=T("li"),s=T("button"),u=T("i"),c=R(" "),l=R(y),f=R("\n                    "),h=T("li"),p=T("button"),d=T("i"),m=R(" "),v=R(b),n.className="first",u.className="fa fa-eye",I(s,"click",w),s.className="btn",P(i,"margin-bottom","5px"),d.className="fa fa-eye-slash",I(p,"click",_),p.className="btn",a.className="unstyled"},m(t,e){A(t,n,e),M(n,r),A(t,o,e),A(t,a,e),M(a,i),M(i,s),M(s,u),M(s,c),M(s,l),M(a,f),M(a,h),M(h,p),M(p,d),M(p,m),M(p,v)},p(t,n){e=n},d(t){t&&(C(n),C(o),C(a)),L(s,"click",w),L(p,"click",_)}}}function Hf(t,e){var n,r,o,a,i,s=as("describe / locale-select / hed"),u=as("describe / locale-select / body"),c=new _.default({root:t.root,store:t.store});return{c(){n=T("h4"),r=R(s),o=R("\n                "),a=T("p"),i=R("\n                "),c._fragment.c(),n.className="mt-5"},m(t,e){A(t,n,e),M(n,r),A(t,o,e),A(t,a,e),a.innerHTML=u,A(t,i,e),c._mount(t,e)},d(t){t&&(C(n),C(o),C(a),C(i)),c.destroy(t)}}}function $f(t,e){var n,r,o={},a={};void 0!==e.columnFormat&&(a.column=e.columnFormat,o.column=!0),void 0!==e.normalColumns&&(a.columns=e.normalColumns,o.columns=!0);var i=new Du({root:t.root,store:t.store,data:a,_bind(e,n){var r={};!o.column&&e.column&&(r.columnFormat=n.column),!o.columns&&e.columns&&(r.normalColumns=n.columns),t._set(r),o={}}});t.root._beforecreate.push(()=>{i._bind({column:1,columns:1},i.get())});var s=e.columnFormat.isComputed&&Bf(t);return{c(){i._fragment.c(),n=R("\n                "),s&&s.c(),r=D()},m(t,e){i._mount(t,e),A(t,n,e),s&&s.m(t,e),A(t,r,e)},p(n,a){e=a;var u={};!o.column&&n.columnFormat&&(u.column=e.columnFormat,o.column=void 0!==e.columnFormat),!o.columns&&n.normalColumns&&(u.columns=e.normalColumns,o.columns=void 0!==e.normalColumns),i._set(u),o={},e.columnFormat.isComputed?s||((s=Bf(t)).c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(t){i.destroy(t),t&&C(n),s&&s.d(t),t&&C(r)}}}function Uf(t,e){var n,r,o,a={},i=as("describe / edit-format"),s={};void 0!==e.customColumn&&(s.column=e.customColumn,a.column=!0),void 0!==e.columns&&(s.columns=e.columns,a.columns=!0);var u=new ku({root:t.root,store:t.store,data:s,_bind(e,n){var r={};!a.column&&e.column&&(r.customColumn=n.column),!a.columns&&e.columns&&(r.columns=n.columns),t._set(r),a={}}});function c(e){t.force(e,!0)}return t.root._beforecreate.push(()=>{u._bind({column:1,columns:1},u.get())}),u.on("unselect",(function(e){t.set({activeColumn:!1})})),t.refs.ccEd=u,{c(){u._fragment.c(),n=R("\n\n                "),r=T("button"),o=R(i),I(r,"click",c),r.className="btn"},m(t,e){u._mount(t,e),A(t,n,e),A(t,r,e),M(r,o)},p(t,n){e=n;var r={};!a.column&&t.customColumn&&(r.column=e.customColumn,a.column=void 0!==e.customColumn),!a.columns&&t.columns&&(r.columns=e.columns,a.columns=void 0!==e.columns),u._set(r),a={}},d(e){u.destroy(e),t.refs.ccEd===u&&(t.refs.ccEd=null),e&&(C(n),C(r)),L(r,"click",c)}}}function Bf(t,e){var n,r,o,a,i=as("describe / edit-formula");function s(e){t.force(e,!1)}return{c(){n=T("button"),r=T("i"),o=R(" "),a=R(i),r.className="fa fa-chevron-left",I(n,"click",s),n.className="btn"},m(t,e){A(t,n,e),M(n,r),M(n,o),M(n,a)},d(t){t&&C(n),L(n,"click",s)}}}function zf(t,e){var n={},r={};void 0!==e.activeValues&&(r.values=e.activeValues,n.values=!0),void 0!==e.activeFormat&&(r.format=e.activeFormat,n.format=!0);var o=new tf({root:t.root,store:t.store,data:r,_bind(e,r){var o={};!n.values&&e.values&&(o.activeValues=r.values),!n.format&&e.format&&(o.activeFormat=r.format),t._set(o),n={}}});return t.root._beforecreate.push(()=>{o._bind({values:1,format:1},o.get())}),{c(){o._fragment.c()},m(t,e){o._mount(t,e)},p(t,r){e=r;var a={};!n.values&&t.activeValues&&(a.values=e.activeValues,n.values=void 0!==e.activeValues),!n.format&&t.activeFormat&&(a.format=e.activeFormat,n.format=void 0!==e.activeFormat),o._set(a),n={}},d(t){o.destroy(t)}}}function Vf(t,e){var n,r,o,a,i,s,u,c,l,f,h,p=e.col.title();return{c(){n=T("li"),r=T("a"),o=T("i"),i=R("\n                                    "),s=T("i"),c=R("   "),l=R(p),o._svelte={component:t,ctx:e},I(o,"click",If),o.className=a="fa fa-sort-"+("text"==e.col.type()?"alpha":"amount")+"-asc fa-fw svelte-130nws0",s._svelte={component:t,ctx:e},I(s,"click",Df),s.className=u="fa fa-sort-"+("text"==e.col.type()?"alpha":"amount")+"-desc fa-fw svelte-130nws0",r._svelte={component:t,ctx:e},I(r,"click",Rf),r.href=f="#/"+e.col.name(),r.className="svelte-130nws0",n.className=h=(e.col.name()==e.sortBy?"active":"")+" svelte-130nws0"},m(t,e){A(t,n,e),M(n,r),M(r,o),M(r,i),M(r,s),M(r,c),M(r,l)},p(t,i){e=i,o._svelte.ctx=e,t.normalColumns&&a!==(a="fa fa-sort-"+("text"==e.col.type()?"alpha":"amount")+"-asc fa-fw svelte-130nws0")&&(o.className=a),s._svelte.ctx=e,t.normalColumns&&u!==(u="fa fa-sort-"+("text"==e.col.type()?"alpha":"amount")+"-desc fa-fw svelte-130nws0")&&(s.className=u),t.normalColumns&&p!==(p=e.col.title())&&F(l,p),r._svelte.ctx=e,t.normalColumns&&f!==(f="#/"+e.col.name())&&(r.href=f),(t.normalColumns||t.sortBy)&&h!==(h=(e.col.name()==e.sortBy?"active":"")+" svelte-130nws0")&&(n.className=h)},d(t){t&&C(n),L(o,"click",If),L(s,"click",Df),L(r,"click",Rf)}}}function Yf(t,e){var n,r,o,a;function i(e){t.nextResult(-1)}function s(e){t.nextResult(1)}return{c(){n=T("div"),(r=T("button")).innerHTML='<i class="fa fa-chevron-up"></i>',o=R("\n                            "),(a=T("button")).innerHTML='<i class="fa fa-chevron-down"></i>',I(r,"click",i),r.className="btn svelte-130nws0",I(a,"click",s),a.className="btn svelte-130nws0",n.className="btn-group"},m(t,e){A(t,n,e),M(n,r),M(n,o),M(n,a)},d(t){t&&C(n),L(r,"click",i),L(a,"click",s)}}}function qf(t,e){var n,r;return{c(){n=T("div"),r=R(e.resultsDisplay),n.className="results svelte-130nws0"},m(t,e){A(t,n,e),M(n,r)},p(t,e){t.resultsDisplay&&F(r,e.resultsDisplay)},d(t){t&&C(n)}}}function Wf(t){q(this,t),this.refs={},this._state=N(N(this.store._init(["language","dw_chart","tableDataset"]),{locale:"en-US",search:"",chartData:"",readonly:!1,numeral:null,dayjsLocale:null,showLocaleSelect:!0,transpose:!1,hasChanges:!1,firstRowIsHeader:!0,fixedColumnsLeft:0,searchIndex:0,activeColumn:!1,customColumn:!1,columnFormat:!1,multiSelection:!1,forceColumnFormat:!1,searchResults:[],sortBy:"-",sortDir:!0}),t.data),this.store._add(this,["language","dw_chart","tableDataset"]),this._recompute({$language:1,searchIndex:1,searchResults:1,activeColumn:1,forceColumnFormat:1,$dw_chart:1,numeral:1,$tableDataset:1,columns:1,sortBy:1,sortDir:1,searchIndexSafe:1},this._state),this._intro=!0,this._handlers.update=[Sf],this._handlers.destroy=[K],this._fragment=function(t,e){var n,r,o,a,i,s,u,c,l,f,h,p,d,m,v,g,y,b,_,x,N,E,S,D,F,H,$,U,B,z,V,Y,q,W,G,K,X,J,Z,Q,tt,et,nt,rt,ot,at,it,st,ut,ct,lt,ft,ht,pt,dt,mt,vt,gt,yt,bt,wt,_t,xt,Nt,Et,Mt,At=as("Back"),Ct=as("Proceed"),kt=as("describe / info-table-header"),Ot=as("describe / sort-by"),Tt=as("describe / no-sorting"),St=!1,Rt={},Dt=as("describe / transpose-long"),It=as("computed columns / add-btn"),Lt=as("Revert changes");function jt(t){return t.multiSelection?Pf:t.activeColumn?Ff:jf}var Ft=jt(e),Pt=Ft(t,e);function Ht(e){e.preventDefault(),t.navigateTo("upload")}function $t(e){e.preventDefault(),t.navigateTo("visualize")}function Ut(e){t.sort(e,"-")}for(var Bt=e.normalColumns,zt=[],Vt=0;Vt<Bt.length;Vt+=1)zt[Vt]=Vf(t,Lf(e,Bt,Vt));var Yt=new w.default({root:t.root,store:t.store,slots:{default:O(),content:O(),button:O()}});function qt(){St=!0,t.set({search:et.value}),St=!1}function Wt(e){t.keyPress(e)}var Gt=e.searchResults.length>0&&Yf(t),Kt=e.search&&qf(t,e),Xt={numeral:e.numeral,tableDataset:e.$tableDataset};void 0!==e.chartData&&(Xt.data=e.chartData,Rt.data=!0),void 0!==e.transpose&&(Xt.transpose=e.transpose,Rt.transpose=!0),void 0!==e.firstRowIsHeader&&(Xt.firstRowIsHeader=e.firstRowIsHeader,Rt.firstRowIsHeader=!0),void 0!==e.fixedColumnsLeft&&(Xt.fixedColumnsLeft=e.fixedColumnsLeft,Rt.fixedColumnsLeft=!0),void 0!==e.activeColumn&&(Xt.activeColumn=e.activeColumn,Rt.activeColumn=!0),void 0!==e.readonly&&(Xt.readonly=e.readonly,Rt.readonly=!0),void 0!==e.sorting&&(Xt.sorting=e.sorting,Rt.sorting=!0),void 0!==e.search&&(Xt.search=e.search,Rt.search=!0),void 0!==e.searchResults&&(Xt.searchResults=e.searchResults,Rt.searchResults=!0),void 0!==e.searchIndex&&(Xt.searchIndex=e.searchIndex,Rt.searchIndex=!0),void 0!==e.multiSelection&&(Xt.multiSelection=e.multiSelection,Rt.multiSelection=!0),void 0!==e.hasChanges&&(Xt.hasChanges=e.hasChanges,Rt.hasChanges=!0);var Jt=new Cf({root:t.root,store:t.store,data:Xt,_bind(e,n){var r={};!Rt.data&&e.data&&(r.chartData=n.data),!Rt.transpose&&e.transpose&&(r.transpose=n.transpose),!Rt.firstRowIsHeader&&e.firstRowIsHeader&&(r.firstRowIsHeader=n.firstRowIsHeader),!Rt.fixedColumnsLeft&&e.fixedColumnsLeft&&(r.fixedColumnsLeft=n.fixedColumnsLeft),!Rt.activeColumn&&e.activeColumn&&(r.activeColumn=n.activeColumn),!Rt.readonly&&e.readonly&&(r.readonly=n.readonly),!Rt.sorting&&e.sorting&&(r.sorting=n.sorting),!Rt.search&&e.search&&(r.search=n.search),!Rt.searchResults&&e.searchResults&&(r.searchResults=n.searchResults),!Rt.searchIndex&&e.searchIndex&&(r.searchIndex=n.searchIndex),!Rt.multiSelection&&e.multiSelection&&(r.multiSelection=n.multiSelection),!Rt.hasChanges&&e.hasChanges&&(r.hasChanges=n.hasChanges),t._set(r),Rt={}}});function Zt(e){t.toggleTranspose()}function Qt(e){t.addComputedColumn()}function te(e){t.revertChanges()}return t.root._beforecreate.push(()=>{Jt._bind({data:1,transpose:1,firstRowIsHeader:1,fixedColumnsLeft:1,activeColumn:1,readonly:1,sorting:1,search:1,searchResults:1,searchIndex:1,multiSelection:1,hasChanges:1},Jt.get())}),Jt.on("resetSort",(function(e){t.set({sortBy:"-"})})),Jt.on("afterRender",(function(e){t.afterRender()})),t.refs.hot=Jt,{c(){n=T("div"),r=T("div"),o=T("div"),a=T("div"),Pt.c(),i=R("\n\n                "),s=T("hr"),u=R("\n\n                "),c=T("div"),l=T("a"),f=T("i"),h=R(" "),p=R(At),d=R("\n                    "),m=T("a"),v=R(Ct),g=R(" "),y=T("i"),b=R("\n        "),_=T("div"),x=T("div"),N=T("noscript"),E=R("\n                "),S=T("img"),D=R("\n            "),F=T("div"),H=T("div"),$=T("button"),U=T("noscript"),B=R("… "),z=T("span"),V=R("\n                        "),Y=T("ul"),q=T("li"),W=T("a"),K=R("\n                            ");for(var t=0;t<zt.length;t+=1)zt[t].c();Yt._fragment.c(),X=R("\n\n                "),J=T("div"),Z=T("i"),Q=R("\n                    "),tt=T("div"),et=T("input"),rt=R("\n                        "),Gt&&Gt.c(),at=R("\n\n                    "),Kt&&Kt.c(),it=R("\n\n            "),Jt._fragment.c(),st=R("\n\n            "),ut=T("div"),ct=T("button"),lt=T("img"),ft=R("\n                    "),ht=R(Dt),pt=R("\n\n                "),dt=T("button"),mt=T("i"),vt=R(" "),gt=R(It),yt=R("…"),bt=R("\n\n                "),wt=T("button"),_t=T("i"),xt=R(" "),Nt=R(Lt),Et=R("…"),f.className="icon-chevron-left",I(l,"click",Ht),l.href="upload",l.className="btn submit",y.className="icon-chevron-right icon-white",I(m,"click",$t),m.href="visualize",m.className="submit btn btn-primary",m.dataset.uid="describe-proceed-button",c.className="btn-group",a.className="sidebar",o.className="column is-4 is-3-widescreen",S.alt="arrow",S.src="/static/img/arrow.svg",x.className="help svelte-130nws0",z.className="caret",j($,"slot","button"),$.className="btn dropdown-toggle",$.dataset.toggle="dropdown",I(W,"click",Ut),W.href="#s",W.className="svelte-130nws0",q.className=G=("-"==e.sortBy?"active":"")+" svelte-130nws0",j(Y,"slot","content"),Y.className="sort-menu svelte-130nws0",H.className="sort-box svelte-130nws0",Z.className="im im-magnifier svelte-130nws0",I(et,"input",qt),I(et,"keypress",Wt),et.autocomplete="screw-you-google-chrome",j(et,"type","search"),et.placeholder=as("describe / search / placeholder"),et.className=nt=(e.searchResults.length>0?"with-results":"")+" search-query svelte-130nws0",tt.className=ot=e.searchResults.length>0?"input-append":"",J.className="search-box form-search svelte-130nws0",F.className="pull-right",P(F,"margin-bottom","10px"),lt.alt="transpose",lt.src="/static/css/chart-editor/transpose.png",lt.className="svelte-130nws0",I(ct,"click",Zt),ct.className="btn transpose svelte-130nws0",mt.className="fa fa-calculator",I(dt,"click",Qt),dt.className="btn computed-columns",_t.className="fa fa-undo",I(wt,"click",te),wt.className=Mt="btn "+(e.hasChanges?"":"disabled")+" svelte-130nws0",wt.id="reset-data-changes",ut.className="buttons below-table pull-right svelte-130nws0",_.className="column pt-5",r.className="columns is-variable is-5-widescreen is-8-fullhd",n.className="chart-editor"},m(w,C){A(w,n,C),M(n,r),M(r,o),M(o,a),Pt.m(a,null),M(a,i),M(a,s),M(a,u),M(a,c),M(c,l),M(l,f),M(l,h),M(l,p),M(c,d),M(c,m),M(m,v),M(m,g),M(m,y),M(r,b),M(r,_),M(_,x),M(x,N),N.insertAdjacentHTML("beforebegin",kt),M(x,E),M(x,S),M(_,D),M(_,F),M(F,H),M(Yt._slotted.button,$),M($,U),U.insertAdjacentHTML("beforebegin",Ot),M($,B),M($,z),M(Yt._slotted.default,V),M(Yt._slotted.content,Y),M(Y,q),M(q,W),W.innerHTML=Tt,M(Y,K);for(var k=0;k<zt.length;k+=1)zt[k].m(Y,null);Yt._mount(H,null),M(F,X),M(F,J),M(J,Z),M(J,Q),M(J,tt),M(tt,et),t.refs.search=et,et.value=e.search,M(tt,rt),Gt&&Gt.m(tt,null),M(J,at),Kt&&Kt.m(J,null),M(_,it),Jt._mount(_,null),M(_,st),M(_,ut),M(ut,ct),M(ct,lt),M(ct,ft),M(ct,ht),M(ut,pt),M(ut,dt),M(dt,mt),M(dt,vt),M(dt,gt),M(dt,yt),M(ut,bt),M(ut,wt),M(wt,_t),M(wt,xt),M(wt,Nt),M(wt,Et),t.refs.parent=n},p(n,r){if(Ft===(Ft=jt(e=r))&&Pt?Pt.p(n,e):(Pt.d(1),(Pt=Ft(t,e)).c(),Pt.m(a,i)),n.sortBy&&G!==(G=("-"==e.sortBy?"active":"")+" svelte-130nws0")&&(q.className=G),n.normalColumns||n.sortBy){Bt=e.normalColumns;for(var o=0;o<Bt.length;o+=1){const r=Lf(e,Bt,o);zt[o]?zt[o].p(n,r):(zt[o]=Vf(t,r),zt[o].c(),zt[o].m(Y,null))}for(;o<zt.length;o+=1)zt[o].d(1);zt.length=Bt.length}!St&&n.search&&(et.value=e.search),n.searchResults&&nt!==(nt=(e.searchResults.length>0?"with-results":"")+" search-query svelte-130nws0")&&(et.className=nt),e.searchResults.length>0?Gt||((Gt=Yf(t)).c(),Gt.m(tt,null)):Gt&&(Gt.d(1),Gt=null),n.searchResults&&ot!==(ot=e.searchResults.length>0?"input-append":"")&&(tt.className=ot),e.search?Kt?Kt.p(n,e):((Kt=qf(t,e)).c(),Kt.m(J,null)):Kt&&(Kt.d(1),Kt=null);var s={};n.numeral&&(s.numeral=e.numeral),n.$tableDataset&&(s.tableDataset=e.$tableDataset),!Rt.data&&n.chartData&&(s.data=e.chartData,Rt.data=void 0!==e.chartData),!Rt.transpose&&n.transpose&&(s.transpose=e.transpose,Rt.transpose=void 0!==e.transpose),!Rt.firstRowIsHeader&&n.firstRowIsHeader&&(s.firstRowIsHeader=e.firstRowIsHeader,Rt.firstRowIsHeader=void 0!==e.firstRowIsHeader),!Rt.fixedColumnsLeft&&n.fixedColumnsLeft&&(s.fixedColumnsLeft=e.fixedColumnsLeft,Rt.fixedColumnsLeft=void 0!==e.fixedColumnsLeft),!Rt.activeColumn&&n.activeColumn&&(s.activeColumn=e.activeColumn,Rt.activeColumn=void 0!==e.activeColumn),!Rt.readonly&&n.readonly&&(s.readonly=e.readonly,Rt.readonly=void 0!==e.readonly),!Rt.sorting&&n.sorting&&(s.sorting=e.sorting,Rt.sorting=void 0!==e.sorting),!Rt.search&&n.search&&(s.search=e.search,Rt.search=void 0!==e.search),!Rt.searchResults&&n.searchResults&&(s.searchResults=e.searchResults,Rt.searchResults=void 0!==e.searchResults),!Rt.searchIndex&&n.searchIndex&&(s.searchIndex=e.searchIndex,Rt.searchIndex=void 0!==e.searchIndex),!Rt.multiSelection&&n.multiSelection&&(s.multiSelection=e.multiSelection,Rt.multiSelection=void 0!==e.multiSelection),!Rt.hasChanges&&n.hasChanges&&(s.hasChanges=e.hasChanges,Rt.hasChanges=void 0!==e.hasChanges),Jt._set(s),Rt={},n.hasChanges&&Mt!==(Mt="btn "+(e.hasChanges?"":"disabled")+" svelte-130nws0")&&(wt.className=Mt)},d(e){e&&C(n),Pt.d(),L(l,"click",Ht),L(m,"click",$t),L(W,"click",Ut),k(zt,e),Yt.destroy(),L(et,"input",qt),L(et,"keypress",Wt),t.refs.search===et&&(t.refs.search=null),Gt&&Gt.d(),Kt&&Kt.d(),Jt.destroy(),t.refs.hot===Jt&&(t.refs.hot=null),L(ct,"click",Zt),L(dt,"click",Qt),L(wt,"click",te),t.refs.parent===n&&(t.refs.parent=null)}}}(this,this._state),this.root._oncreate.push(()=>{Tf.call(this),this.fire("update",{changed:E({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),V(this))}function Gf(t,e){this._handlers={},this._dependents=[],this._computed=$(),this._sortedComputedProperties=[],this._state=N({},t),this._differs=e&&e.immutable?B:U}N(Wf.prototype,X),N(Wf.prototype,Of),Wf.prototype._recompute=function(t,e){t.$language&&this._differs(e.locale,e.locale=function({$language:t}){return t}(e))&&(t.locale=!0),(t.searchIndex||t.searchResults)&&this._differs(e.searchIndexSafe,e.searchIndexSafe=function({searchIndex:t,searchResults:e}){return t<0&&(t+=e.length),t%=e.length}(e))&&(t.searchIndexSafe=!0),(t.activeColumn||t.forceColumnFormat)&&(this._differs(e.customColumn,e.customColumn=function({activeColumn:t,forceColumnFormat:e}){return!(!t||e||!t.isComputed)&&t}(e))&&(t.customColumn=!0),this._differs(e.columnFormat,e.columnFormat=function({activeColumn:t,forceColumnFormat:e}){return!(!t||t.isComputed&&!e)&&t}(e))&&(t.columnFormat=!0)),t.activeColumn&&this._differs(e.activeValues,e.activeValues=function({activeColumn:t}){return t?t.values():[]}(e))&&(t.activeValues=!0),(t.activeColumn||t.$dw_chart||t.numeral)&&this._differs(e.activeFormat,e.activeFormat=function({activeColumn:t,$dw_chart:e,numeral:n}){return t?mf(n,t,e.get().metadata,t.name()):t=>t}(e))&&(t.activeFormat=!0),(t.activeColumn||t.$tableDataset)&&this._differs(e.columns,e.columns=function({activeColumn:t,$tableDataset:e}){return e?e.columns():[]}(e))&&(t.columns=!0),t.columns&&this._differs(e.normalColumns,e.normalColumns=function({columns:t}){return t.filter(t=>!t.isComputed)}(e))&&(t.normalColumns=!0),(t.sortBy||t.sortDir)&&this._differs(e.sorting,e.sorting=function({sortBy:t,sortDir:e}){return{sortBy:t,sortDir:e}}(e))&&(t.sorting=!0),(t.searchResults||t.searchIndexSafe)&&this._differs(e.resultsDisplay,e.resultsDisplay=function({searchResults:t,searchIndexSafe:e}){return t.length>0?`${e+1} ${as("describe / search / of")} ${t.length} ${as("describe / search / results")}`:as("describe / search / no-matches")}(e))&&(t.resultsDisplay=!0)},N(Gf.prototype,{_add(t,e){this._dependents.push({component:t,props:e})},_init(t){const e={};for(let n=0;n<t.length;n+=1){const r=t[n];e["$"+r]=this._state[r]}return e},_remove(t){let e=this._dependents.length;for(;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set(t,e){const n=this._state;this._state=N(N({},n),t);for(let t=0;t<this._sortedComputedProperties.length;t+=1)this._sortedComputedProperties[t].update(this._state,e);this.fire("state",{changed:e,previous:n,current:this._state}),this._dependents.filter(t=>{const n={};let r=!1;for(let o=0;o<t.props.length;o+=1){const a=t.props[o];a in e&&(n["$"+a]=this._state[a],r=!0)}if(r)return t.component._stage(n),!0}).forEach(t=>{t.component.set({})}),this.fire("update",{changed:e,previous:n,current:this._state})},_sortComputedProperties(){const t=this._computed,e=this._sortedComputedProperties=[],n=$();let r;function o(a){const i=t[a];i&&(i.deps.forEach(t=>{if(t===r)throw new Error(`Cyclical dependency detected between ${t} <-> ${a}`);o(t)}),n[a]||(n[a]=!0,e.push(i)))}for(const t in this._computed)o(r=t)},compute(t,e,n){let r;const o={deps:e,update:(o,a,i)=>{const s=e.map(t=>(t in a&&(i=!0),o[t]));if(i){const e=n.apply(null,s);this._differs(e,r)&&(r=e,a[t]=!0,o[t]=r)}}};this._computed[t]=o,this._sortComputedProperties();const a=N({},this._state),i={};o.update(a,i,!0),this._set(a,i)},fire:z,get:Y,on:W,set(t){const e=this._state,n=this._changed={};let r=!1;for(const o in t){if(this._computed[o])throw new Error(`'${o}' is a read-only computed property`);this._differs(t[o],e[o])&&(n[o]=r=!0)}r&&this._set(t,n)}});return{App:Wf,data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0},store:new Gf({})}}));
//# sourceMappingURL=describe.js.map
